/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     (c) 2010-2011 Jeremy Ashkenas, DocumentCloud Inc.

//     (c) 2011-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors

//     Backbone may be freely distributed under the MIT license.

// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.

// Distributed under MIT license

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20150601
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*! @source http://purl.eligrey.com/github/l10n.js/blob/master/l10n.js*/

/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */

/*!
 * jScrollPane - v2.0.19 - 2013-11-16
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2013 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */

// Copyright (c) 2013 Kelvin Luck

// Dual licensed under the MIT or GPL Version 2 licenses.

/*!
 * jQuery blockUI plugin
 * Version 2.70.0-2014.11.23
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */

!function(){function e(e,t,i){e.fn.jScrollPane||(e.fn.jScrollPane=function(s){function n(s,n){function r(t){var n,o,p,c,u,h,m=!1,v=!1;if(U=t,F===i)u=s.scrollTop(),h=s.scrollLeft(),s.css({overflow:"hidden",padding:0}),z=s.innerWidth()+bt,N=s.innerHeight(),s.width(z),F=e('<div class="jspPane" />').css("padding",yt).append(s.children()),X=e('<div class="jspContainer" />').css({width:z+"px",height:N+"px"}).append(F).appendTo(s);else{if(s.css("width",""),m=U.stickToBottom&&T(),v=U.stickToRight&&A(),c=s.innerWidth()+bt!=z||s.outerHeight()!=N,c&&(z=s.innerWidth()+bt,N=s.innerHeight(),X.css({width:z+"px",height:N+"px"})),!c&&wt==q&&F.outerHeight()==Z)return void s.width(z);wt=q,F.css("width",""),s.width(z),X.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}F.css("overflow","auto"),q=t.contentWidth?t.contentWidth:F[0].scrollWidth,Z=F[0].scrollHeight,F.css("overflow",""),W=q/z,Y=Z/N,Q=Y>1,K=W>1,K||Q?(s.addClass("jspScrollable"),n=U.maintainPosition&&(et||st),n&&(o=C(),p=S()),a(),l(),d(),n&&(P(v?q-z:o,!1),x(m?Z-N:p,!1)),L(),E(),V(),U.enableKeyboardNavigation&&$(),U.clickOnTrack&&f(),H(),U.hijackInternalLinks&&j()):(s.removeClass("jspScrollable"),F.css({top:0,left:0,width:X.width()-bt}),I(),R(),D(),g()),U.autoReinitialise&&!vt?vt=setInterval(function(){r(U)},U.autoReinitialiseDelay):!U.autoReinitialise&&vt&&clearInterval(vt),u&&s.scrollTop(0)&&x(u,!1),h&&s.scrollLeft(0)&&P(h,!1),s.trigger("jsp-initialised",[K||Q])}function a(){Q&&(X.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),nt=X.find(">.jspVerticalBar"),rt=nt.find(">.jspTrack"),G=rt.find(">.jspDrag"),U.showArrows&&(pt=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",u(0,-1)).bind("click.jsp",O),dt=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",u(0,1)).bind("click.jsp",O),U.arrowScrollOnHover&&(pt.bind("mouseover.jsp",u(0,-1,pt)),dt.bind("mouseover.jsp",u(0,1,dt))),c(rt,U.verticalArrowPositions,pt,dt)),ot=N,X.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ot-=e(this).outerHeight()}),G.hover(function(){G.addClass("jspHover")},function(){G.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",O),G.addClass("jspActive");var i=t.pageY-G.position().top;return e("html").bind("mousemove.jsp",function(e){v(e.pageY-i,!1)}).bind("mouseup.jsp mouseleave.jsp",m),!1}),o())}function o(){rt.height(ot+"px"),et=0,at=U.verticalGutter+rt.outerWidth(),F.width(z-at-bt);try{0===nt.position().left&&F.css("margin-left",at+"px")}catch(e){}}function l(){K&&(X.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),ct=X.find(">.jspHorizontalBar"),ut=ct.find(">.jspTrack"),tt=ut.find(">.jspDrag"),U.showArrows&&(gt=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",u(-1,0)).bind("click.jsp",O),mt=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",u(1,0)).bind("click.jsp",O),U.arrowScrollOnHover&&(gt.bind("mouseover.jsp",u(-1,0,gt)),mt.bind("mouseover.jsp",u(1,0,mt))),c(ut,U.horizontalArrowPositions,gt,mt)),tt.hover(function(){tt.addClass("jspHover")},function(){tt.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",O),tt.addClass("jspActive");var i=t.pageX-tt.position().left;return e("html").bind("mousemove.jsp",function(e){b(e.pageX-i,!1)}).bind("mouseup.jsp mouseleave.jsp",m),!1}),ht=X.innerWidth(),p())}function p(){X.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ht-=e(this).outerWidth()}),ut.width(ht+"px"),st=0}function d(){if(K&&Q){var t=ut.outerHeight(),i=rt.outerWidth();ot-=t,e(ct).find(">.jspCap:visible,>.jspArrow").each(function(){ht+=e(this).outerWidth()}),ht-=i,N-=i,z-=t,ut.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),o(),p()}K&&F.width(X.outerWidth()-bt+"px"),Z=F.outerHeight(),Y=Z/N,K&&(ft=Math.ceil(1/W*ht),ft>U.horizontalDragMaxWidth?ft=U.horizontalDragMaxWidth:ft<U.horizontalDragMinWidth&&(ft=U.horizontalDragMinWidth),tt.width(ft+"px"),it=ht-ft,w(st)),Q&&(lt=Math.ceil(1/Y*ot),lt>U.verticalDragMaxHeight?lt=U.verticalDragMaxHeight:lt<U.verticalDragMinHeight&&(lt=U.verticalDragMinHeight),G.height(lt+"px"),J=ot-lt,y(et))}function c(e,t,i,s){var n,r="before",a="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==r?a=t:t==a&&(r=t,n=i,i=s,s=n),e[r](i)[a](s)}function u(e,t,i){return function(){return h(e,t,this,i),this.blur(),!1}}function h(t,i,s,n){s=e(s).addClass("jspActive");var r,a,o=!0,l=function(){0!==t&&_t.scrollByX(t*U.arrowButtonSpeed),0!==i&&_t.scrollByY(i*U.arrowButtonSpeed),a=setTimeout(l,o?U.initialDelay:U.arrowRepeatFreq),o=!1};l(),r=n?"mouseout.jsp":"mouseup.jsp",n=n||e("html"),n.bind(r,function(){s.removeClass("jspActive"),a&&clearTimeout(a),a=null,n.unbind(r)})}function f(){g(),Q&&rt.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var s,n=e(this),r=n.offset(),a=t.pageY-r.top-et,o=!0,l=function(){var e=n.offset(),i=t.pageY-e.top-lt/2,r=N*U.scrollPagePercent,d=J*r/(Z-N);if(0>a)et-d>i?_t.scrollByY(-r):v(i);else{if(!(a>0))return void p();i>et+d?_t.scrollByY(r):v(i)}s=setTimeout(l,o?U.initialDelay:U.trackClickRepeatFreq),o=!1},p=function(){s&&clearTimeout(s),s=null,e(document).unbind("mouseup.jsp",p)};return l(),e(document).bind("mouseup.jsp",p),!1}}),K&&ut.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var s,n=e(this),r=n.offset(),a=t.pageX-r.left-st,o=!0,l=function(){var e=n.offset(),i=t.pageX-e.left-ft/2,r=z*U.scrollPagePercent,d=it*r/(q-z);if(0>a)st-d>i?_t.scrollByX(-r):b(i);else{if(!(a>0))return void p();i>st+d?_t.scrollByX(r):b(i)}s=setTimeout(l,o?U.initialDelay:U.trackClickRepeatFreq),o=!1},p=function(){s&&clearTimeout(s),s=null,e(document).unbind("mouseup.jsp",p)};return l(),e(document).bind("mouseup.jsp",p),!1}})}function g(){ut&&ut.unbind("mousedown.jsp"),rt&&rt.unbind("mousedown.jsp")}function m(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),G&&G.removeClass("jspActive"),tt&&tt.removeClass("jspActive")}function v(e,t){Q&&(0>e?e=0:e>J&&(e=J),t===i&&(t=U.animateScroll),t?_t.animate(G,"top",e,y):(G.css("top",e),y(e)))}function y(e){e===i&&(e=G.position().top),X.scrollTop(0),et=e;var t=0===et,n=et==J,r=e/J,a=-r*(Z-N);(kt!=t||Pt!=n)&&(kt=t,Pt=n,s.trigger("jsp-arrow-change",[kt,Pt,xt,Mt])),_(t,n),F.css("top",a),s.trigger("jsp-scroll-y",[-a,t,n]).trigger("scroll")}function b(e,t){K&&(0>e?e=0:e>it&&(e=it),t===i&&(t=U.animateScroll),t?_t.animate(tt,"left",e,w):(tt.css("left",e),w(e)))}function w(e){e===i&&(e=tt.position().left),X.scrollTop(0),st=e;var t=0===st,n=st==it,r=e/it,a=-r*(q-z);(xt!=t||Mt!=n)&&(xt=t,Mt=n,s.trigger("jsp-arrow-change",[kt,Pt,xt,Mt])),k(t,n),F.css("left",a),s.trigger("jsp-scroll-x",[-a,t,n]).trigger("scroll")}function _(e,t){U.showArrows&&(pt[e?"addClass":"removeClass"]("jspDisabled"),dt[t?"addClass":"removeClass"]("jspDisabled"))}function k(e,t){U.showArrows&&(gt[e?"addClass":"removeClass"]("jspDisabled"),mt[t?"addClass":"removeClass"]("jspDisabled"))}function x(e,t){var i=e/(Z-N);v(i*J,t)}function P(e,t){var i=e/(q-z);b(i*it,t)}function M(t,i,s){var n,r,a,o,l,p,d,c,u,h=0,f=0;try{n=e(t)}catch(g){return}for(r=n.outerHeight(),a=n.outerWidth(),X.scrollTop(0),X.scrollLeft(0);!n.is(".jspPane");)if(h+=n.position().top,f+=n.position().left,n=n.offsetParent(),/^body|html$/i.test(n[0].nodeName))return;o=S(),p=o+N,o>h||i?c=h-U.horizontalGutter:h+r>p&&(c=h-N+r+U.horizontalGutter),isNaN(c)||x(c,s),l=C(),d=l+z,l>f||i?u=f-U.horizontalGutter:f+a>d&&(u=f-z+a+U.horizontalGutter),isNaN(u)||P(u,s)}function C(){return-F.position().left}function S(){return-F.position().top}function T(){var e=Z-N;return e>20&&e-S()<10}function A(){var e=q-z;return e>20&&e-C()<10}function E(){X.unbind(St).bind(St,function(e,t,i,s){var n=st,r=et,a=e.deltaFactor||U.mouseWheelSpeed;return _t.scrollBy(i*a,-s*a,!1),n==st&&r==et})}function I(){X.unbind(St)}function O(){return!1}function L(){F.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){M(e.target,!1)})}function R(){F.find(":input,a").unbind("focus.jsp")}function $(){function t(){var e=st,t=et;switch(i){case 40:_t.scrollByY(U.keyboardSpeed,!1);break;case 38:_t.scrollByY(-U.keyboardSpeed,!1);break;case 34:case 32:_t.scrollByY(N*U.scrollPagePercent,!1);break;case 33:_t.scrollByY(-N*U.scrollPagePercent,!1);break;case 39:_t.scrollByX(U.keyboardSpeed,!1);break;case 37:_t.scrollByX(-U.keyboardSpeed,!1)}return n=e!=st||t!=et}var i,n,r=[];K&&r.push(ct[0]),Q&&r.push(nt[0]),F.focus(function(){s.focus()}),s.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(s){if(s.target===this||r.length&&e(s.target).closest(r).length){var a=st,o=et;switch(s.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:i=s.keyCode,t();break;case 35:x(Z-N),i=null;break;case 36:x(0),i=null}return n=s.keyCode==i&&a!=st||o!=et,!n}}).bind("keypress.jsp",function(e){return e.keyCode==i&&t(),!n}),U.hideFocus?(s.css("outline","none"),"hideFocus"in X[0]&&s.attr("hideFocus",!0)):(s.css("outline",""),"hideFocus"in X[0]&&s.attr("hideFocus",!1))}function D(){s.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function H(){if(location.hash&&location.hash.length>1){var t,i,s=escape(location.hash.substr(1));try{t=e("#"+s+', a[name="'+s+'"]')}catch(n){return}t.length&&F.find(s)&&(0===X.scrollTop()?i=setInterval(function(){X.scrollTop()>0&&(M(t,!0),e(document).scrollTop(X.position().top),clearInterval(i))},50):(M(t,!0),e(document).scrollTop(X.position().top)))}}function j(){e(document.body).data("jspHijack")||(e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(i){var s,n,r,a,o,l,p=this.href.substr(0,this.href.indexOf("#")),d=location.href;if(-1!==location.href.indexOf("#")&&(d=location.href.substr(0,location.href.indexOf("#"))),p===d){s=escape(this.href.substr(this.href.indexOf("#")+1));try{n=e("#"+s+', a[name="'+s+'"]')}catch(c){return}n.length&&(r=n.closest(".jspScrollable"),a=r.data("jsp"),a.scrollToElement(n,!0),r[0].scrollIntoView&&(o=e(t).scrollTop(),l=n.offset().top,(o>l||l>o+e(t).height())&&r[0].scrollIntoView()),i.preventDefault())}}))}function V(){var e,t,i,s,n,r=!1;X.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(a){var o=a.originalEvent.touches[0];e=C(),t=S(),i=o.pageX,s=o.pageY,n=!1,r=!0}).bind("touchmove.jsp",function(a){if(r){var o=a.originalEvent.touches[0],l=st,p=et;return _t.scrollTo(e+i-o.pageX,t+s-o.pageY),n=n||Math.abs(i-o.pageX)>5||Math.abs(s-o.pageY)>5,l==st&&p==et}}).bind("touchend.jsp",function(){r=!1}).bind("click.jsp-touchclick",function(){return n?(n=!1,!1):void 0})}function B(){var e=S(),t=C();s.removeClass("jspScrollable").unbind(".jsp"),s.replaceWith(Ct.append(F.children())),Ct.scrollTop(e),Ct.scrollLeft(t),vt&&clearInterval(vt)}var U,F,z,N,X,q,Z,W,Y,Q,K,G,J,et,tt,it,st,nt,rt,at,ot,lt,pt,dt,ct,ut,ht,ft,gt,mt,vt,yt,bt,wt,_t=this,kt=!0,xt=!0,Pt=!1,Mt=!1,Ct=s.clone(!1,!1).empty(),St=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===s.css("box-sizing")?(yt=0,bt=0):(yt=s.css("paddingTop")+" "+s.css("paddingRight")+" "+s.css("paddingBottom")+" "+s.css("paddingLeft"),bt=(parseInt(s.css("paddingLeft"),10)||0)+(parseInt(s.css("paddingRight"),10)||0)),e.extend(_t,{removeKeyboardNav:function(){D()},initKeyboardNav:function(){$()},reinitialise:function(t){t=e.extend({},U,t),r(t)},scrollToElement:function(e,t,i){M(e,t,i)},scrollTo:function(e,t,i){P(e,i),x(t,i)},scrollToX:function(e,t){P(e,t)},scrollToY:function(e,t){x(e,t)},scrollToPercentX:function(e,t){P(e*(q-z),t)},scrollToPercentY:function(e,t){x(e*(Z-N),t)},scrollBy:function(e,t,i){_t.scrollByX(e,i),_t.scrollByY(t,i)},scrollByX:function(e,t){var i=C()+Math[0>e?"floor":"ceil"](e),s=i/(q-z);b(s*it,t)},scrollByY:function(e,t){var i=S()+Math[0>e?"floor":"ceil"](e),s=i/(Z-N);v(s*J,t)},positionDragX:function(e,t){b(e,t)},positionDragY:function(e,t){v(e,t)},animate:function(e,t,i,s){var n={};n[t]=i,e.animate(n,{duration:U.animateDuration,easing:U.animateEase,queue:!1,step:s})},getContentPositionX:function(){return C()},getContentPositionY:function(){return S()},getContentWidth:function(){return q},getContentHeight:function(){return Z},getPercentScrolledX:function(){return C()/(q-z)},getPercentScrolledY:function(){return S()/(Z-N)},getIsScrollableH:function(){return K},getIsScrollableV:function(){return Q},getContentPane:function(){return F},scrollToBottom:function(e){v(J,e)},hijackInternalLinks:e.noop,destroy:function(){B()}}),r(n)}return s=e.extend({},e.fn.jScrollPane.defaults,s),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){s[this]=s[this]||s.speed}),this.each(function(){var t=e(this),i=t.data("jsp");i?i.reinitialise(s):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),i=new n(t,s),t.data("jsp",i))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:i,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8})}function t(e){if(!e.fn.cssExtended){var t=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},i=!!CSSStyleDeclaration.prototype.getPropertyValue;i||(CSSStyleDeclaration.prototype.getPropertyValue=function(e){return this.getAttribute(e)},CSSStyleDeclaration.prototype.setProperty=function(e,i,s){this.setAttribute(e,i);var s="undefined"!=typeof s?s:"";if(""!=s){var n=new RegExp(t(e)+"\\s*:\\s*"+t(i)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(n,e+": "+i+" !"+s+";")}},CSSStyleDeclaration.prototype.removeProperty=function(e){return this.removeAttribute(e)},CSSStyleDeclaration.prototype.getPropertyPriority=function(e){var i=new RegExp(t(e)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi");return i.test(this.cssText)?"important":""}),e.fn.cssExtended=function(e,t,i){var s=this.get(0);if("undefined"==typeof s)return this;var n=this.get(0).style;return"undefined"!=typeof e?"undefined"!=typeof t?(i="undefined"!=typeof i?i:"",n.setProperty(e,t,i),this):n.getPropertyValue(e):n}}}function i(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i}function s(e,t){if(AP_Player.debug_output){var i="";"undefined"!=typeof t&&(i=t.replace(/<br \/>/g,"%lineBreak%"),i=jQuery(i).text(),i=i.replace(/%lineBreak%/g,"\n	")),console.log("SPP: "+e+i)}}var n,r,a;!function(e){function t(e,t){return w.call(e,t)}function i(e,t){var i,s,n,r,a,o,l,p,d,c,u,h=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&k.test(e[a])&&(e[a]=e[a].replace(k,"")),e=h.slice(0,h.length-1).concat(e),d=0;d<e.length;d+=1)if(u=e[d],"."===u)e.splice(d,1),d-=1;else if(".."===u){if(1===d&&(".."===e[2]||".."===e[0]))break;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||g)&&f){for(i=e.split("/"),d=i.length;d>0;d-=1){if(s=i.slice(0,d).join("/"),h)for(c=h.length;c>0;c-=1)if(n=f[h.slice(0,c).join("/")],n&&(n=n[s])){r=n,o=d;break}if(r)break;!l&&g&&g[s]&&(l=g[s],p=d)}!r&&l&&(r=l,o=p),r&&(i.splice(0,o,r),e=i.join("/"))}return e}function s(t,i){return function(){var s=_.call(arguments,0);return"string"!=typeof s[0]&&1===s.length&&s.push(null),h.apply(e,s.concat([t,i]))}}function o(e){return function(t){return i(t,e)}}function l(e){return function(t){m[e]=t}}function p(i){if(t(v,i)){var s=v[i];delete v[i],b[i]=!0,u.apply(e,s)}if(!t(m,i)&&!t(b,i))throw new Error("No "+i);return m[i]}function d(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function c(e){return function(){return y&&y.config&&y.config[e]||{}}}var u,h,f,g,m={},v={},y={},b={},w=Object.prototype.hasOwnProperty,_=[].slice,k=/\.js$/;f=function(e,t){var s,n=d(e),r=n[0];return e=n[1],r&&(r=i(r,t),s=p(r)),r?e=s&&s.normalize?s.normalize(e,o(t)):i(e,t):(e=i(e,t),n=d(e),r=n[0],e=n[1],r&&(s=p(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:s}},g={require:function(e){return s(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:c(e)}}},u=function(i,n,r,a){var o,d,c,u,h,y,w=[],_=typeof r;if(a=a||i,"undefined"===_||"function"===_){for(n=!n.length&&r.length?["require","exports","module"]:n,h=0;h<n.length;h+=1)if(u=f(n[h],a),d=u.f,"require"===d)w[h]=g.require(i);else if("exports"===d)w[h]=g.exports(i),y=!0;else if("module"===d)o=w[h]=g.module(i);else if(t(m,d)||t(v,d)||t(b,d))w[h]=p(d);else{if(!u.p)throw new Error(i+" missing "+d);u.p.load(u.n,s(a,!0),l(d),{}),w[h]=m[d]}c=r?r.apply(m[i],w):void 0,i&&(o&&o.exports!==e&&o.exports!==m[i]?m[i]=o.exports:c===e&&y||(m[i]=c))}else i&&(m[i]=r)},n=r=h=function(t,i,s,n,r){if("string"==typeof t)return g[t]?g[t](i):p(f(t,i).f);if(!t.splice){if(y=t,y.deps&&h(y.deps,y.callback),!i)return;i.splice?(t=i,i=s,s=null):t=e}return i=i||function(){},"function"==typeof s&&(s=n,n=r),n?u(e,t,i,s):setTimeout(function(){u(e,t,i,s)},4),h},h.config=function(e){return h(e)},n._defined=m,a=function(e,i,s){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");i.splice||(s=i,i=[]),t(m,e)||t(v,e)||(v[e]=[e,i,s])},a.amd={jQuery:!0}}(),a("vendor/almond",function(){}),function(e,t){"undefined"!=typeof exports?t(e,exports,r("underscore")):"function"==typeof a&&a.amd?a("backbone",["underscore","jquery","exports"],function(i,s,n){e.Backbone=t(e,n,i,s)}):e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,s){{var n=e.Backbone,r=[],a=(r.push,r.slice);r.splice}t.VERSION="1.1.0",t.$=s,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=t.Events={on:function(e,t,i){if(!p(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var s=this._events[e]||(this._events[e]=[]);return s.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,s){if(!p(this,"once",e,[t,s])||!t)return this;var n=this,r=i.once(function(){n.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,s)},off:function(e,t,s){var n,r,a,o,l,d,c,u;if(!this._events||!p(this,"off",e,[t,s]))return this;if(!e&&!t&&!s)return this._events={},this;for(o=e?[e]:i.keys(this._events),l=0,d=o.length;d>l;l++)if(e=o[l],a=this._events[e]){if(this._events[e]=n=[],t||s)for(c=0,u=a.length;u>c;c++)r=a[c],(t&&t!==r.callback&&t!==r.callback._callback||s&&s!==r.context)&&n.push(r);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!p(this,"trigger",e,t))return this;var i=this._events[e],s=this._events.all;return i&&d(i,t),s&&d(s,arguments),this},stopListening:function(e,t,s){var n=this._listeningTo;if(!n)return this;var r=!t&&!s;s||"object"!=typeof t||(s=this),e&&((n={})[e._listenId]=e);for(var a in n)e=n[a],e.off(t,s,this),(r||i.isEmpty(e._events))&&delete this._listeningTo[a];return this}},l=/\s+/,p=function(e,t,i,s){if(!i)return!0;if("object"==typeof i){for(var n in i)e[t].apply(e,[n,i[n]].concat(s));return!1}if(l.test(i)){for(var r=i.split(l),a=0,o=r.length;o>a;a++)e[t].apply(e,[r[a]].concat(s));return!1}return!0},d=function(e,t){var i,s=-1,n=e.length,r=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++s<n;)(i=e[s]).callback.call(i.ctx);return;case 1:for(;++s<n;)(i=e[s]).callback.call(i.ctx,r);return;case 2:for(;++s<n;)(i=e[s]).callback.call(i.ctx,r,a);return;case 3:for(;++s<n;)(i=e[s]).callback.call(i.ctx,r,a,o);return;default:for(;++s<n;)(i=e[s]).callback.apply(i.ctx,t)}},c={listenTo:"on",listenToOnce:"once"};i.each(c,function(e,t){o[t]=function(t,s,n){var r=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=i.uniqueId("l"));return r[a]=t,n||"object"!=typeof s||(n=this),t[e](s,n,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(t,o);var u=t.Model=function(e,t){var s=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(s=this.parse(s,t)||{}),s=i.defaults({},s,i.result(this,"defaults")),this.set(s,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(u.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,s){var n,r,a,o,l,p,d,c;if(null==e)return this;if("object"==typeof e?(r=e,s=t):(r={})[e]=t,s||(s={}),!this._validate(r,s))return!1;a=s.unset,l=s.silent,o=[],p=this._changing,this._changing=!0,p||(this._previousAttributes=i.clone(this.attributes),this.changed={}),c=this.attributes,d=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(n in r)t=r[n],i.isEqual(c[n],t)||o.push(n),i.isEqual(d[n],t)?delete this.changed[n]:this.changed[n]=t,a?delete c[n]:c[n]=t;if(!l){o.length&&(this._pending=!0);for(var u=0,h=o.length;h>u;u++)this.trigger("change:"+o[u],this,c[o[u]],s)}if(p)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var s in this.attributes)t[s]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,s=!1,n=this._changing?this._previousAttributes:this.attributes;for(var r in e)i.isEqual(n[r],t=e[r])||((s||(s={}))[r]=t);return s},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,s=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(s&&s(t,i,e),void t.trigger("sync",t,i,e)):!1},H(this,e),this.sync("read",this,e)},save:function(e,t,s){var n,r,a,o=this.attributes;if(null==e||"object"==typeof e?(n=e,s=t):(n={})[e]=t,s=i.extend({validate:!0},s),n&&!s.wait){if(!this.set(n,s))return!1}else if(!this._validate(n,s))return!1;n&&s.wait&&(this.attributes=i.extend({},o,n)),void 0===s.parse&&(s.parse=!0);var l=this,p=s.success;return s.success=function(e){l.attributes=o;var t=l.parse(e,s);return s.wait&&(t=i.extend(n||{},t)),i.isObject(t)&&!l.set(t,s)?!1:(p&&p(l,e,s),void l.trigger("sync",l,e,s))},H(this,s),r=this.isNew()?"create":s.patch?"patch":"update","patch"===r&&(s.attrs=n),a=this.sync(r,this,s),n&&s.wait&&(this.attributes=o),a},destroy:function(e){e=e?i.clone(e):{};var t=this,s=e.success,n=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&n(),s&&s(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;H(this,e);var r=this.sync("delete",this,e);return e.wait||n(),r},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||D();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var s=this.validationError=this.validate(e,t)||null;return s?(this.trigger("invalid",this,s,i.extend(t,{validationError:s})),!1):!0}});var h=["keys","values","pairs","invert","pick","omit"];i.each(h,function(e){u.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};i.extend(f.prototype,o,{model:u,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,m))},remove:function(e,t){var s=!i.isArray(e);e=s?[e]:i.clone(e),t||(t={});var n,r,a,o;for(n=0,r=e.length;r>n;n++)o=e[n]=this.get(e[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,t.silent||(t.index=a,o.trigger("remove",o,this,t)),this._removeReference(o));return s?e[0]:e},set:function(e,t){t=i.defaults({},t,g),t.parse&&(e=this.parse(e,t));var s=!i.isArray(e);e=s?e?[e]:[]:i.clone(e);var n,r,a,o,l,p,d,c=t.at,h=this.model,f=this.comparator&&null==c&&t.sort!==!1,m=i.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=t.add,_=t.merge,k=t.remove,x=!f&&w&&k?[]:!1;for(n=0,r=e.length;r>n;n++){if(l=e[n],a=l instanceof u?o=l:l[h.prototype.idAttribute],p=this.get(a))k&&(b[p.cid]=!0),_&&(l=l===o?o.attributes:l,t.parse&&(l=p.parse(l,t)),p.set(l,t),f&&!d&&p.hasChanged(m)&&(d=!0)),e[n]=p;else if(w){if(o=e[n]=this._prepareModel(l,t),!o)continue;v.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)}x&&x.push(p||o)}if(k){for(n=0,r=this.length;r>n;++n)b[(o=this.models[n]).cid]||y.push(o);y.length&&this.remove(y,t)}if(v.length||x&&x.length)if(f&&(d=!0),this.length+=v.length,null!=c)for(n=0,r=v.length;r>n;n++)this.models.splice(c+n,0,v[n]);else{x&&(this.models.length=0);var P=x||v;for(n=0,r=P.length;r>n;n++)this.models.push(P[n])}if(d&&this.sort({silent:!0}),!t.silent){for(n=0,r=v.length;r>n;n++)(o=v[n]).trigger("add",o,this,t);(d||x&&x.length)&&this.trigger("sort",this,t)}return s?e[0]:e},reset:function(e,t){t||(t={});for(var s=0,n=this.models.length;n>s;s++)this._removeReference(this.models[s]);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,s=this;return e.success=function(i){var n=e.reset?"reset":"set";s[n](i,e),t&&t(s,i,e),s.trigger("sync",s,i,e)},H(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var s=this,n=t.success;return t.success=function(e,t,i){i.wait&&s.add(e,i),n&&n(e,t,i)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof u)return e.collection||(e.collection=this),e;t=t?i.clone(t):{},t.collection=this;var s=new this.model(e,t);return s.validationError?(this.trigger("invalid",this,s.validationError,t),!1):s},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,s){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,s),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];i.each(v,function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var y=["groupBy","countBy","sortBy"];i.each(y,function(e){f.prototype[e]=function(t,s){var n=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,n,s)}});var b=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,o,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var s=e[t];if(i.isFunction(s)||(s=this[e[t]]),s){var n=t.match(w),r=n[1],a=n[2];s=i.bind(s,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,s):this.$el.on(r,a,s)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className"));var s=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(s,!1)}}}),t.sync=function(e,s,n){var r=x[e];i.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:r,dataType:"json"};if(n.url||(a.url=i.result(s,"url")||D()),null!=n.data||!s||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(n.attrs||s.toJSON(n))),n.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),n.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",n.emulateJSON&&(a.data._method=r);var o=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||n.emulateJSON||(a.processData=!1),"PATCH"===a.type&&k&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=n.xhr=t.ajax(i.extend(a,n));return s.trigger("request",s,l,n),l};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};
t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var P=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,S=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(P.prototype,o,{initialize:function(){},route:function(e,s,n){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(s)&&(n=s,s=""),n||(n=this[s]);var r=this;return t.history.route(e,function(i){var a=r._extractParameters(e,i);n&&n.apply(r,a),r.trigger.apply(r,["route:"+s].concat(a)),r.trigger("route",s,a),t.history.trigger("route",r,s,a)}),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(T,"\\$&").replace(M,"(?:$1)?").replace(C,function(e,t){return t?e:"([^/]+)"}).replace(S,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var s=e.exec(t).slice(1);return i.map(s,function(e){return e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,O=/msie [\w.]+/,L=/\/$/,R=/[?#].*$/;A.started=!1,i.extend(A.prototype,o,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(L,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(E,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var s=this.getFragment(),n=document.documentMode,r=O.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(I,"/"),r&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(s)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=s;var a=this.location,o=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!o)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&o&&a.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!A.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(R,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var s=e.href.replace(/(javascript:|#).*$/,"");e.replace(s+"#"+t)}else e.hash="#"+t}}),t.history=new A;var $=function(e,t){var s,n=this;s=e&&i.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},i.extend(s,n,t);var r=function(){this.constructor=s};return r.prototype=n.prototype,s.prototype=new r,e&&i.extend(s.prototype,e),s.__super__=n.prototype,s};u.extend=f.extend=P.extend=b.extend=A.extend=$;var D=function(){throw new Error('A "url" property or function must be specified')},H=function(e,t){var i=t.error;t.error=function(s){i&&i(e,s,t),e.trigger("error",e,s,t)}};return t}),function(e,t){if("object"==typeof exports){var i=r("underscore"),s=r("backbone");module.exports=t(i,s)}else"function"==typeof a&&a.amd&&a("backbone.wreqr",["underscore","backbone"],t)}(this,function(e,t){"use strict";return t.Wreqr=function(e,t,i){var s={};return s.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var s=null;t.isObject(e)&&!t.isFunction(e)&&(s=e.context,e=e.callback),this.setHandler(i,e,s)},this)},setHandler:function(e,t,i){var s={callback:t,context:i};this._wreqrHandlers[e]=s,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw new Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,i),s.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},i.isFunction(this.initialize)&&this.initialize(e)};return i.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),s.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,s){var n=this.storage.getCommands(e);i.each(n.instances,function(e){t.apply(s,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,s=e.storageType||this.storageType;t=i.isFunction(s)?new s:s,this.storage=t}})}(s),s.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(s),s.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,i),s}(t,t.Marionette,e),t.Wreqr}),function(e,t){if("object"==typeof exports){var i=r("underscore"),s=r("backbone");module.exports=t(i,s)}else"function"==typeof a&&a.amd&&a("backbone.babysitter",["underscore","backbone"],t)}(this,function(e,t){"option strict";return t.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===i?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(s){t.isFunction(s[e])&&s[e].apply(s,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var s=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(s,function(e){i.prototype[e]=function(){var i=t.values(this._views),s=[i].concat(t.toArray(arguments));return t[e].apply(t,s)}}),i}(t,e),t.ChildViewContainer}),function(e,t){if("object"==typeof exports){var i=r("underscore"),s=r("backbone"),n=r("backbone.wreqr"),o=r("backbone.babysitter");module.exports=t(i,s,n,o)}else"function"==typeof a&&a.amd&&a("marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],t)}(this,function(e,t){!function(e,t,i){"use strict";function s(e){return a.call(e)}function n(e,t){var i=new Error(e);throw i.name=t||"Error",i}var r={};t.Marionette=r,r.$=t.$;var a=Array.prototype.slice;return r.extend=t.Model.extend,r.getOption=function(e,t){if(e&&t){var i;return i=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},r.normalizeMethods=function(e){var t,s={};return i.each(e,function(e,n){t=e,i.isFunction(t)||(t=this[t]),t&&(s[n]=t)},this),s},r.triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi,s=function(s){var n="on"+s.replace(t,e),r=this[n];return i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),i.isFunction(r)?r.apply(this,i.tail(arguments)):void 0};return s}(),r.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,n(e)}function s(e){e._isRendered=!0,n(e)}function n(e){e._isShown&&e._isRendered&&r(e)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function r(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){s(e)})}}(document.documentElement),function(e){function t(e,t,s,r){var a=r.split(/\s+/);i.each(a,function(i){var r=e[i];r||n("Method '"+i+"' was configured as an event handler, but does not exist."),e.listenTo(t,s,r,e)})}function s(e,t,i,s){e.listenTo(t,i,s,e)}function r(e,t,s,n){var r=n.split(/\s+/);i.each(r,function(i){var n=e[i];e.stopListening(t,s,n,e)})}function a(e,t,i,s){e.stopListening(t,i,s,e)}function o(e,t,s,n,r){t&&s&&(i.isFunction(s)&&(s=s.call(e)),i.each(s,function(s,a){i.isFunction(s)?n(e,t,a,s):r(e,t,a,s)}))}e.bindEntityEvents=function(e,i,n){o(e,i,n,s,t)},e.unbindEntityEvents=function(e,t,i){o(e,t,i,a,r)}}(r),r.Callbacks=function(){this._deferred=r.$.Deferred(),this._callbacks=[]},i.extend(r.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(i,s){t&&(i=t),e.call(i,s)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=r.$.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),r.Controller=function(e){this.triggerMethod=r.triggerMethod,this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,i.extend(r.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),r.Region=function(e){if(this.options=e||{},this.el=r.getOption(this,"el"),!this.el){var t=new Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var i=Array.prototype.slice.apply(arguments);this.initialize.apply(this,i)}},i.extend(r.Region,{buildRegion:function(e,t){var s="string"==typeof e,n="string"==typeof e.selector,r="undefined"==typeof e.regionType,a="function"==typeof e;if(!a&&!s&&!n)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var o,l;s&&(o=e),e.selector&&(o=e.selector,delete e.selector),a&&(l=e),!a&&r&&(l=t),e.regionType&&(l=e.regionType,delete e.regionType),(s||a)&&(e={}),e.el=o;var p=new l(e);return e.parentEl&&(p.getEl=function(t){var s=e.parentEl;return i.isFunction(s)&&(s=s()),s.find(t)}),p}}),i.extend(r.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||i.isUndefined(e.$el),s=e!==this.currentView;s&&this.close(),e.render(),(s||t)&&this.open(e),this.currentView=e,r.triggerMethod.call(this,"show",e),r.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return r.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),r.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),r.Region.extend=r.extend,r.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var s={};return i.each(e,function(e,n){"string"==typeof e&&(e={selector:e}),e.selector&&(e=i.defaults({},e,t));var r=this.addRegion(n,e);s[n]=r},this),s},addRegion:function(t,s){var n,r=i.isObject(s),a=i.isString(s),o=!!s.selector;return n=a||r&&o?e.Region.buildRegion(s,e.Region):i.isFunction(s)?e.Region.buildRegion(s,e.Region):s,this._store(t,n),this.triggerMethod("region:add",t,n),n},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){i.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){i.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=i.size(this._regions)}}),s=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return i.each(s,function(e){t.prototype[e]=function(){var t=i.values(this._regions),s=[t].concat(i.toArray(arguments));return i[e].apply(i,s)}}),t}(r),r.TemplateCache=function(e){this.templateId=e},i.extend(r.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new r.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=s(arguments),i=t.length;if(i>0)for(e=0;i>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=r.$(e).html();return t&&0!==t.length||n("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return i.template(e)}}),r.Renderer={render:function(e,t){if(!e){var i=new Error("Cannot render the template since it's false, null or undefined.");throw i.name="TemplateNotFoundError",i}var s;return(s="function"==typeof e?e:r.TemplateCache.get(e))(t)}},r.View=t.View.extend({constructor:function(e){i.bindAll(this,"render");var s=Array.prototype.slice.apply(arguments);this.options=i.extend({},i.result(this,"options"),i.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(i.result(this,"events")),t.View.prototype.constructor.apply(this,s),r.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:r.triggerMethod,normalizeMethods:r.normalizeMethods,getTemplate:function(){return r.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=r.getOption(this,"templateHelpers");return i.isFunction(t)&&(t=t.call(this)),i.extend(e,t)},normalizeUIKeys:function(e){return"undefined"!=typeof e?(i.each(i.keys(e),function(t){var i=t.split("@ui.");2===i.length&&(e[i[0]+this.ui[i[1]]]=e[t],delete e[t])},this),e):void 0},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(t,function(t,s){var n=i.isObject(t),r=n?t.event:t;e[s]=function(e){if(e){var i=e.preventDefault,s=e.stopPropagation,a=n?t.preventDefault:i,o=n?t.stopPropagation:s;a&&i&&i.apply(e),o&&s&&s.apply(e)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(r,l)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),r.bindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.bindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,i.isFunction(e)&&(e=e.call(this));var s={},n=this.configureTriggers();i.extend(s,e,n),t.View.prototype.delegateEvents.call(this,s)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),r.unbindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.unbindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(e),function(t){var i=e[t];this.ui[t]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),r.ItemView=r.View.extend({constructor:function(){r.View.prototype.constructor.apply(this,s(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),i=r.Renderer.render(t,e);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),r.View.prototype.close.apply(this,s(arguments)),this.triggerMethod("item:closed"))}}),r.CollectionView=r.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),r.View.prototype.constructor.apply(this,s(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(e){r.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),i=this.collection.indexOf(e);this.addItemView(e,t,i)},onShowCalled:function(){this.children.each(function(e){r.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getItemView(t),this.addItemView(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new t.Model;this.addItemView(i,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return r.getOption(this,"emptyView")},getItemView:function(){var e=r.getOption(this,"itemView");return e||n("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,s){var n=r.getOption(this,"itemViewOptions");i.isFunction(n)&&(n=n.call(this,e,s));var a=this.buildItemView(e,t,n);return this.addChildViewEventForwarding(a),this.triggerMethod("before:item:added",a),this.children.add(a),this.renderItemView(a,s),this._isShown&&!this.isBuffering&&r.triggerMethod.call(a,"show"),this.triggerMethod("after:item:added",a),a},addChildViewEventForwarding:function(e){var t=r.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var n=s(arguments),a=n[0],o=this.normalizeMethods(this.getItemEvents());n[0]=t+":"+a,n.splice(1,0,e),"undefined"!=typeof o&&i.isFunction(o[a])&&o[a].apply(this,n),r.triggerMethod.apply(this,n)},this)},getItemEvents:function(){return i.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,s){var n=i.extend({model:e},s);return new t(n)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),r.View.prototype.close.apply(this,s(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.prototype.constructor.apply(this,s(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var e=r.getOption(this,"itemView")||this.constructor;return e||n("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),r.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return r.Renderer.render(t,e)},appendBuffer:function(e,t){var i=this.getItemViewContainer(e);i.append(t)},appendHtml:function(e,t){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var i=this.getItemViewContainer(e);i.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,s=r.getOption(e,"itemViewContainer");if(s){var a=i.isFunction(s)?s.call(this):s;t=e.$(a),t.length<=0&&n("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),r.Layout=r.ItemView.extend({regionType:r.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),r.ItemView.prototype.constructor.call(this,e)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=r.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);r.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,i={regionType:r.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,i)},_initializeRegions:function(e){var t;this._initRegionManager(),t=i.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new r.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),r.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,s(arguments)),this.options=e||{};var i=r.getOption(this,"appRoutes"),n=this._getController();this.processAppRoutes(n,i)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},processAppRoutes:function(e,t){if(t){var s=i.keys(t).reverse();i.each(s,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return r.getOption(this,"controller")},_addAppRoute:function(e,t,s){var n=e[s];if(!n)throw new Error("Method '"+s+"' was not found on the controller");this.route(t,s,i.bind(n,e))}}),r.Application=function(e){this._initRegionManager(),this._initCallbacks=new r.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},i.extend(this,e),this.triggerMethod=r.triggerMethod},i.extend(r.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var i=r.Module;t&&(i=t.moduleClass||i);var n=s(arguments);return n.unshift(this),i.create.apply(i,n)},_initRegionManager:function(){this._regionManager=new r.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),r.Application.extend=r.extend,r.Module=function(e,t,s){this.moduleName=e,this.options=i.extend({},this.options,s),this.initialize=s.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=r.triggerMethod,i.isFunction(this.initialize)&&this.initialize(this.options,e,t)},r.Module.extend=r.extend,i.extend(r.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,r.triggerMethod.call(this,"before:stop"),i.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),r.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,s){if(e){var n=i.flatten([this,this.app,t,r,r.$,i,s]);e.apply(this,n)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks}}),i.extend(r.Module,{create:function(e,t,n){var r=e,a=s(arguments);a.splice(0,3),t=t.split(".");var o=t.length,l=[];return l[o-1]=n,i.each(t,function(t,i){var s=r;r=this._getModule(s,t,e,n),this._addModuleDefinition(s,r,l[i],a)},this),r},_getModule:function(e,t,s,n){var a=r.Module,o=i.extend({},n);n&&(a=n.moduleClass||a);var l=e[t];return l||(l=new a(t,s,o),e[t]=l,e.submodules[t]=l),l},_addModuleDefinition:function(e,t,s,n){var r,a;i.isFunction(s)?(r=s,a=!0):i.isObject(s)?(r=s.define,a="undefined"!=typeof s.startWithParent?s.startWithParent:!0):a=!0,r&&t.addDefinition(r,n),t.startWithParent=t.startWithParent&&a,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),r}(this,t,e);return t.Marionette}),function(e,t){function i(i,s){function n(e){return ht.preferFlash&&rt&&!ht.ignoreFlash&&ht.flash[e]!==t&&ht.flash[e]}function r(e){return function(t){var i,s=this._s;return i=s&&s._a?e.call(this,t):null}}this.setupOptions={url:i||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=s||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20150601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;
var a,o,l,p,d,c,u,h,f,g,m,v,y,b,w,_,k,x,P,M,C,S,T,A,E,I,O,L,R,$,D,H,j,V,B,U,F,z,N,X,q,Z,W,Y,Q,K,G,J,et,tt,it,st,nt,rt,at,ot,lt,pt,dt,ct,ut,ht=this,ft=null,gt=null,mt=navigator.userAgent,vt=e.location.href.toString(),yt=document,bt=[],wt=!1,_t=!1,kt=!1,xt=!1,Pt=!1,Mt=8,Ct=null,St=null,Tt=!1,At=!1,Et=0,It=null,Ot=[],Lt=null,Rt=Array.prototype.slice,$t=!1,Dt=0,Ht=1e3,jt=mt.match(/(ipad|iphone|ipod)/i),Vt=mt.match(/android/i),Bt=mt.match(/msie/i),Ut=mt.match(/webkit/i),Ft=mt.match(/safari/i)&&!mt.match(/chrome/i),zt=mt.match(/opera/i),Nt=mt.match(/(mobile|pre\/|xoom)/i)||jt||Vt,Xt=!vt.match(/usehtml5audio/i)&&!vt.match(/sm2\-ignorebadua/i)&&Ft&&!mt.match(/silk/i)&&mt.match(/OS X 10_6_([3-7])/i),qt=(e.console!==t&&console.log!==t,yt.hasFocus!==t?yt.hasFocus():null),Zt=Ft&&(yt.hasFocus===t||!yt.hasFocus()),Wt=!Zt,Yt=/(mp3|mp4|mpa|m4a|m4b)/i,Qt="about:blank",Kt="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",Gt=yt.location?yt.location.protocol.match(/http/i):null,Jt=Gt?"":"http://",ei=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,ti=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ii=new RegExp("\\.("+ti.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Gt,B={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==t&&(zt&&opera!==t&&opera.version()<10?new Audio(null):new Audio).canPlayType!==t}catch(e){return!1}}(),this.setup=function(e){var i=!ht.url;return e!==t&&kt&&Lt&&ht.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t),f(e),$t||(Nt?(!ht.setupOptions.ignoreMobileRestrictions||ht.setupOptions.forceUseGlobalHTML5Audio)&&(Ot.push(P.globalHTML5),$t=!0):ht.setupOptions.forceUseGlobalHTML5Audio&&(Ot.push(P.globalHTML5),$t=!0)),!ut&&Nt&&(ht.setupOptions.ignoreMobileRestrictions?Ot.push(P.ignoreMobile):(ht.setupOptions.useHTML5Audio=!0,ht.setupOptions.preferFlash=!1,jt?ht.ignoreFlash=!0:(Vt&&!mt.match(/android\s2\.3/i)||!Vt)&&($t=!0))),e&&(i&&T&&e.url!==t&&ht.beginDelayedInit(),T||e.url===t||"complete"!==yt.readyState||setTimeout(C,1)),ut=!0,ht},this.ok=function(){return Lt?kt&&!xt:ht.useHTML5Audio&&ht.hasHTML5},this.supported=this.ok,this.getMovie=function(t){return o(t)||yt[t]||e[t]},this.createSound=function(e,i){function s(){return r=U(r),ht.sounds[r.id]=new a(r),ht.soundIDs.push(r.id),ht.sounds[r.id]}var n,r,o=null;if(!kt||!ht.ok())return!1;if(i!==t&&(e={id:e,url:i}),r=h(e),r.url=W(r.url),r.id===t&&(r.id=ht.setupOptions.idPrefix+Dt++),N(r.id,!0))return ht.sounds[r.id];if(K(r))o=s(),o._setup_html5(r);else{if(ht.html5Only)return s();if(ht.html5.usingFlash&&r.url&&r.url.match(/data\:/i))return s();c>8&&null===r.isMovieStar&&(r.isMovieStar=!!(r.serverURL||(r.type?r.type.match(ei):!1)||r.url&&r.url.match(ii))),r=F(r,n),o=s(),8===c?gt._createSound(r.id,r.loops||1,r.usePolicyFile):(gt._createSound(r.id,r.url,r.usePeakData,r.useWaveformData,r.useEQData,r.isMovieStar,r.isMovieStar?r.bufferTime:!1,r.loops||1,r.serverURL,r.duration||null,r.autoPlay,!0,r.autoLoad,r.usePolicyFile),r.serverURL||(o.connected=!0,r.onconnect&&r.onconnect.apply(o))),r.serverURL||!r.autoLoad&&!r.autoPlay||o.load(r)}return!r.serverURL&&r.autoPlay&&o.play(),o},this.destroySound=function(e,t){if(!N(e))return!1;var i,s=ht.sounds[e];for(s.stop(),s._iO={},s.unload(),i=0;i<ht.soundIDs.length;i++)if(ht.soundIDs[i]===e){ht.soundIDs.splice(i,1);break}return t||s.destruct(!0),s=null,delete ht.sounds[e],!0},this.load=function(e,t){return N(e)?ht.sounds[e].load(t):!1},this.unload=function(e){return N(e)?ht.sounds[e].unload():!1},this.onPosition=function(e,t,i,s){return N(e)?ht.sounds[e].onposition(t,i,s):!1},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,i){return N(e)?ht.sounds[e].clearOnPosition(t,i):!1},this.play=function(e,t){var i=null,s=t&&!(t instanceof Object);if(!kt||!ht.ok())return!1;if(N(e,s))s&&(t={url:t});else{if(!s)return!1;s&&(t={url:t}),t&&t.url&&(t.id=e,i=ht.createSound(t).play())}return null===i&&(i=ht.sounds[e].play(t)),i},this.start=this.play,this.setPosition=function(e,t){return N(e)?ht.sounds[e].setPosition(t):!1},this.stop=function(e){return N(e)?ht.sounds[e].stop():!1},this.stopAll=function(){var e;for(e in ht.sounds)ht.sounds.hasOwnProperty(e)&&ht.sounds[e].stop()},this.pause=function(e){return N(e)?ht.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=ht.soundIDs.length-1;e>=0;e--)ht.sounds[ht.soundIDs[e]].pause()},this.resume=function(e){return N(e)?ht.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=ht.soundIDs.length-1;e>=0;e--)ht.sounds[ht.soundIDs[e]].resume()},this.togglePause=function(e){return N(e)?ht.sounds[e].togglePause():!1},this.setPan=function(e,t){return N(e)?ht.sounds[e].setPan(t):!1},this.setVolume=function(e,i){var s,n;{if(e===t||isNaN(e)||i!==t)return N(e)?ht.sounds[e].setVolume(i):!1;for(s=0,n=ht.soundIDs.length;n>s;s++)ht.sounds[ht.soundIDs[s]].setVolume(e)}},this.mute=function(e){var t=0;if(e instanceof String&&(e=null),e)return N(e)?ht.sounds[e].mute():!1;for(t=ht.soundIDs.length-1;t>=0;t--)ht.sounds[ht.soundIDs[t]].mute();return ht.muted=!0,!0},this.muteAll=function(){ht.mute()},this.unmute=function(e){var t;if(e instanceof String&&(e=null),e)return N(e)?ht.sounds[e].unmute():!1;for(t=ht.soundIDs.length-1;t>=0;t--)ht.sounds[ht.soundIDs[t]].unmute();return ht.muted=!1,!0},this.unmuteAll=function(){ht.unmute()},this.toggleMute=function(e){return N(e)?ht.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return gt&&8!==c&&(e=parseInt(gt._getMemoryUse(),10)),e},this.disable=function(i){var s;if(i===t&&(i=!1),xt)return!1;for(xt=!0,s=ht.soundIDs.length-1;s>=0;s--)R(ht.sounds[ht.soundIDs[s]]);return u(i),st.remove(e,"load",y),!0},this.canPlayMIME=function(e){var t;return ht.hasHTML5&&(t=G({type:e})),!t&&Lt&&(t=e&&ht.ok()?!!((c>8?e.match(ei):null)||e.match(ht.mimePattern)):null),t},this.canPlayURL=function(e){var t;return ht.hasHTML5&&(t=G({url:e})),!t&&Lt&&(t=e&&ht.ok()?!!e.match(ht.filePattern):null),t},this.canPlayLink=function(e){return e.type!==t&&e.type&&ht.canPlayMIME(e.type)?!0:ht.canPlayURL(e.href)},this.getSoundById=function(e){if(!e)return null;var t=ht.sounds[e];return t},this.onready=function(t,i){var s="onready",n=!1;if("function"!=typeof t)throw H("needFunction",s);return i||(i=e),m(s,t,i),v(),n=!0,n},this.ontimeout=function(t,i){var s="ontimeout",n=!1;if("function"!=typeof t)throw H("needFunction",s);return i||(i=e),m(s,t,i),v({type:s}),n=!0,n},this._writeDebug=function(){return!0},this._wD=this._writeDebug,this._debug=function(){},this.reboot=function(t,i){var s,n,r;for(s=ht.soundIDs.length-1;s>=0;s--)ht.sounds[ht.soundIDs[s]].destruct();if(gt)try{Bt&&(St=gt.innerHTML),Ct=gt.parentNode.removeChild(gt)}catch(a){}if(St=Ct=Lt=gt=null,ht.enabled=T=kt=Tt=At=wt=_t=xt=$t=ht.swfLoaded=!1,ht.soundIDs=[],ht.sounds={},Dt=0,ut=!1,t)bt=[];else for(s in bt)if(bt.hasOwnProperty(s))for(n=0,r=bt[s].length;r>n;n++)bt[s][n].fired=!1;return ht.html5={usingFlash:null},ht.flash={},ht.html5Only=!1,ht.ignoreFlash=!1,e.setTimeout(function(){i||ht.beginDelayedInit()},20),ht},this.reset=function(){return ht.reboot(!0,!0)},this.getMoviePercent=function(){return gt&&"PercentLoaded"in gt?gt.PercentLoaded():null},this.beginDelayedInit=function(){Pt=!0,C(),setTimeout(function(){return At?!1:(E(),M(),At=!0,!0)},20),b()},this.destruct=function(){ht.disable(!0)},a=function(e){var i,s,n,r,a,o,l,p,d,u,f=this,g=!1,m=[],v=0,y=null;d={duration:null,time:null},this.id=e.id,this.sID=this.id,this.url=e.url,this.options=h(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,u=this.url?!1:!0,this.id3={},this._debug=function(){},this.load=function(e){var i,s=null;if(e!==t?f._iO=h(e,f.options):(e=f.options,f._iO=e,y&&y!==f.url&&(f._iO.url=f.url,f.url=null)),f._iO.url||(f._iO.url=f.url),f._iO.url=W(f._iO.url),f.instanceOptions=f._iO,i=f._iO,!i.url&&!f.url)return f;if(i.url===f.url&&0!==f.readyState&&2!==f.readyState)return 3===f.readyState&&i.onload&&ct(f,function(){i.onload.apply(f,[!!f.duration])}),f;if(f.loaded=!1,f.readyState=1,f.playState=0,f.id3={},K(i))s=f._setup_html5(i),s._called_load||(f._html5_canplay=!1,f.url!==i.url&&(f._a.src=i.url,f.setPosition(0)),f._a.autobuffer="auto",f._a.preload="auto",f._a._called_load=!0);else{if(ht.html5Only)return f;if(f._iO.url&&f._iO.url.match(/data\:/i))return f;try{f.isHTML5=!1,f._iO=F(U(i)),f._iO.autoPlay&&(f._iO.position||f._iO.from)&&(f._iO.autoPlay=!1),i=f._iO,8===c?gt._load(f.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):gt._load(f.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(n){I({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return f.url=i.url,f},this.unload=function(){return 0!==f.readyState&&(f.isHTML5?(r(),f._a&&(f._a.pause(),y=et(f._a))):8===c?gt._unload(f.id,Qt):gt._unload(f.id),i()),f},this.destruct=function(e){f.isHTML5?(r(),f._a&&(f._a.pause(),et(f._a),$t||n(),f._a._s=null,f._a=null)):(f._iO.onfailure=null,gt._destroySound(f.id)),e||ht.destroySound(f.id,!0)},this.play=function(e,i){var s,n,r,l,d,m,v=!0,y=null;if(i=i===t?!0:i,e||(e={}),f.url&&(f._iO.url=f.url),f._iO=h(f._iO,f.options),f._iO=h(e,f._iO),f._iO.url=W(f._iO.url),f.instanceOptions=f._iO,!f.isHTML5&&f._iO.serverURL&&!f.connected)return f.getAutoPlay()||f.setAutoPlay(!0),f;if(K(f._iO)&&(f._setup_html5(f._iO),a()),1!==f.playState||f.paused||(s=f._iO.multiShot,s||(f.isHTML5&&f.setPosition(f._iO.position),y=f)),null!==y)return y;if(e.url&&e.url!==f.url&&(f.readyState||f.isHTML5||8!==c||!u?f.load(f._iO):u=!1),f.loaded||(0===f.readyState?(f.isHTML5||ht.html5Only?f.isHTML5?f.load(f._iO):y=f:(f._iO.autoPlay=!0,f.load(f._iO)),f.instanceOptions=f._iO):2===f.readyState&&(y=f)),null!==y)return y;if(!f.isHTML5&&9===c&&f.position>0&&f.position===f.duration&&(e.position=0),f.paused&&f.position>=0&&(!f._iO.serverURL||f.position>0))f.resume();else{if(f._iO=h(e,f._iO),(!f.isHTML5&&null!==f._iO.position&&f._iO.position>0||null!==f._iO.from&&f._iO.from>0||null!==f._iO.to)&&0===f.instanceCount&&0===f.playState&&!f._iO.serverURL){if(r=function(){f._iO=h(e,f._iO),f.play(f._iO)},f.isHTML5&&!f._html5_canplay?(f.load({_oncanplay:r}),y=!1):f.isHTML5||f.loaded||f.readyState&&2===f.readyState||(f.load({onload:r}),y=!1),null!==y)return y;f._iO=p()}(!f.instanceCount||f._iO.multiShotEvents||f.isHTML5&&f._iO.multiShot&&!$t||!f.isHTML5&&c>8&&!f.getAutoPlay())&&f.instanceCount++,f._iO.onposition&&0===f.playState&&o(f),f.playState=1,f.paused=!1,f.position=f._iO.position===t||isNaN(f._iO.position)?0:f._iO.position,f.isHTML5||(f._iO=F(U(f._iO))),f._iO.onplay&&i&&(f._iO.onplay.apply(f),g=!0),f.setVolume(f._iO.volume,!0),f.setPan(f._iO.pan,!0),f.isHTML5?f.instanceCount<2?(a(),n=f._setup_html5(),f.setPosition(f._iO.position),n.play()):(l=new Audio(f._iO.url),d=function(){st.remove(l,"ended",d),f._onfinish(f),et(l),l=null},m=function(){st.remove(l,"canplay",m);try{l.currentTime=f._iO.position/Ht}catch(e){}l.play()},st.add(l,"ended",d),f._iO.volume!==t&&(l.volume=Math.max(0,Math.min(1,f._iO.volume/100))),f.muted&&(l.muted=!0),f._iO.position?st.add(l,"canplay",m):l.play()):(v=gt._start(f.id,f._iO.loops||1,9===c?f.position:f.position/Ht,f._iO.multiShot||!1),9!==c||v||f._iO.onplayerror&&f._iO.onplayerror.apply(f))}return f},this.start=this.play,this.stop=function(e){var t,i=f._iO;return 1===f.playState&&(f._onbufferchange(0),f._resetOnPosition(0),f.paused=!1,f.isHTML5||(f.playState=0),l(),i.to&&f.clearOnPosition(i.to),f.isHTML5?f._a&&(t=f.position,f.setPosition(0),f.position=t,f._a.pause(),f.playState=0,f._onTimer(),r()):(gt._stop(f.id,e),i.serverURL&&f.unload()),f.instanceCount=0,f._iO={},i.onstop&&i.onstop.apply(f)),f},this.setAutoPlay=function(e){f._iO.autoPlay=e,f.isHTML5||(gt._setAutoPlay(f.id,e),e&&(f.instanceCount||1!==f.readyState||f.instanceCount++))},this.getAutoPlay=function(){return f._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var i,s,n=f.isHTML5?Math.max(e,0):Math.min(f.duration||f._iO.duration,Math.max(e,0));if(f.position=n,s=f.position/Ht,f._resetOnPosition(f.position),f._iO.position=n,f.isHTML5){if(f._a){if(f._html5_canplay){if(f._a.currentTime!==s)try{f._a.currentTime=s,(0===f.playState||f.paused)&&f._a.pause()}catch(r){}}else if(s)return f;f.paused&&f._onTimer(!0)}}else i=9===c?f.position:s,f.readyState&&2!==f.readyState&&gt._setPosition(f.id,i,f.paused||!f.playState,f._iO.multiShot);return f},this.pause=function(e){return f.paused||0===f.playState&&1!==f.readyState?f:(f.paused=!0,f.isHTML5?(f._setup_html5().pause(),r()):(e||e===t)&&gt._pause(f.id,f._iO.multiShot),f._iO.onpause&&f._iO.onpause.apply(f),f)},this.resume=function(){var e=f._iO;return f.paused?(f.paused=!1,f.playState=1,f.isHTML5?(f._setup_html5().play(),a()):(e.isMovieStar&&!e.serverURL&&f.setPosition(f.position),gt._pause(f.id,e.multiShot)),!g&&e.onplay?(e.onplay.apply(f),g=!0):e.onresume&&e.onresume.apply(f),f):f},this.togglePause=function(){return 0===f.playState?(f.play({position:9!==c||f.isHTML5?f.position/Ht:f.position}),f):(f.paused?f.resume():f.pause(),f)},this.setPan=function(e,i){return e===t&&(e=0),i===t&&(i=!1),f.isHTML5||gt._setPan(f.id,e),f._iO.pan=e,i||(f.pan=e,f.options.pan=e),f},this.setVolume=function(e,i){return e===t&&(e=100),i===t&&(i=!1),f.isHTML5?f._a&&(ht.muted&&!f.muted&&(f.muted=!0,f._a.muted=!0),f._a.volume=Math.max(0,Math.min(1,e/100))):gt._setVolume(f.id,ht.muted&&!f.muted||f.muted?0:e),f._iO.volume=e,i||(f.volume=e,f.options.volume=e),f},this.mute=function(){return f.muted=!0,f.isHTML5?f._a&&(f._a.muted=!0):gt._setVolume(f.id,0),f},this.unmute=function(){f.muted=!1;var e=f._iO.volume!==t;return f.isHTML5?f._a&&(f._a.muted=!1):gt._setVolume(f.id,e?f._iO.volume:f.options.volume),f},this.toggleMute=function(){return f.muted?f.unmute():f.mute()},this.onPosition=function(e,i,s){return m.push({position:parseInt(e,10),method:i,scope:s!==t?s:f,fired:!1}),f},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var i;if(e=parseInt(e,10),isNaN(e))return!1;for(i=0;i<m.length;i++)e===m[i].position&&(t&&t!==m[i].method||(m[i].fired&&v--,m.splice(i,1)))},this._processOnPosition=function(){var e,t,i=m.length;if(!i||!f.playState||v>=i)return!1;for(e=i-1;e>=0;e--)t=m[e],!t.fired&&f.position>=t.position&&(t.fired=!0,v++,t.method.apply(t.scope,[t.position]),i=m.length);return!0},this._resetOnPosition=function(e){var t,i,s=m.length;if(!s)return!1;for(t=s-1;t>=0;t--)i=m[t],i.fired&&e<=i.position&&(i.fired=!1,v--);return!0},p=function(){var e,t,i=f._iO,s=i.from,n=i.to;return t=function(){f.clearOnPosition(n,t),f.stop()},e=function(){null===n||isNaN(n)||f.onPosition(n,t)},null===s||isNaN(s)||(i.position=s,i.multiShot=!1,e()),i},o=function(){var e,t=f._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&f.onPosition(parseInt(e,10),t[e])},l=function(){var e,t=f._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&f.clearOnPosition(parseInt(e,10))},a=function(){f.isHTML5&&X(f)},r=function(){f.isHTML5&&q(f)},i=function(e){e||(m=[],v=0),g=!1,f._hasTimer=null,f._a=null,f._html5_canplay=!1,f.bytesLoaded=null,f.bytesTotal=null,f.duration=f._iO&&f._iO.duration?f._iO.duration:null,f.durationEstimate=null,f.buffered=[],f.eqData=[],f.eqData.left=[],f.eqData.right=[],f.failures=0,f.isBuffering=!1,f.instanceOptions={},f.instanceCount=0,f.loaded=!1,f.metadata={},f.readyState=0,f.muted=!1,f.paused=!1,f.peakData={left:0,right:0},f.waveformData={left:[],right:[]},f.playState=0,f.position=null,f.id3={}},i(),this._onTimer=function(e){var t,i,s=!1,n={};return f._hasTimer||e?(f._a&&(e||(f.playState>0||1===f.readyState)&&!f.paused)&&(t=f._get_html5_duration(),t!==d.duration&&(d.duration=t,f.duration=t,s=!0),f.durationEstimate=f.duration,i=f._a.currentTime*Ht||0,i!==d.time&&(d.time=i,s=!0),(s||e)&&f._whileplaying(i,n,n,n,n)),s):void 0},this._get_html5_duration=function(){var e=f._iO,t=f._a&&f._a.duration?f._a.duration*Ht:e&&e.duration?e.duration:null,i=t&&!isNaN(t)&&1/0!==t?t:null;return i},this._apply_loop=function(e,t){e.loop=t>1?"loop":""},this._setup_html5=function(e){var t,n=h(f._iO,e),r=$t?ft:f._a,a=decodeURI(n.url);if($t?a===decodeURI(nt)&&(t=!0):a===decodeURI(y)&&(t=!0),r){if(r._s)if($t)r._s&&r._s.playState&&!t&&r._s.stop();else if(!$t&&a===decodeURI(y))return f._apply_loop(r,n.loops),r;t||(y&&i(!1),r.src=n.url,f.url=n.url,y=n.url,nt=n.url,r._called_load=!1)}else n.autoLoad||n.autoPlay?(f._a=new Audio(n.url),f._a.load()):f._a=zt&&opera.version()<10?new Audio(null):new Audio,r=f._a,r._called_load=!1,$t&&(ft=r);return f.isHTML5=!0,f._a=r,r._s=f,s(),f._apply_loop(r,n.loops),n.autoLoad||n.autoPlay?f.load():(r.autobuffer=!1,r.preload="auto"),r},s=function(){function e(e,t,i){return f._a?f._a.addEventListener(e,t,i||!1):null}if(f._a._added_events)return!1;var t;f._a._added_events=!0;for(t in lt)lt.hasOwnProperty(t)&&e(t,lt[t]);return!0},n=function(){function e(e,t,i){return f._a?f._a.removeEventListener(e,t,i||!1):null}var t;f._a._added_events=!1;for(t in lt)lt.hasOwnProperty(t)&&e(t,lt[t])},this._onload=function(e){var t=!!e||!f.isHTML5&&8===c&&f.duration;return f.loaded=t,f.readyState=t?3:2,f._onbufferchange(0),f._iO.onload&&ct(f,function(){f._iO.onload.apply(f,[t])}),!0},this._onbufferchange=function(e){return 0===f.playState?!1:e&&f.isBuffering||!e&&!f.isBuffering?!1:(f.isBuffering=1===e,f._iO.onbufferchange&&f._iO.onbufferchange.apply(f,[e]),!0)},this._onsuspend=function(){return f._iO.onsuspend&&f._iO.onsuspend.apply(f),!0},this._onfailure=function(e,t,i){f.failures++,f._iO.onfailure&&1===f.failures&&f._iO.onfailure(e,t,i)},this._onwarning=function(e,t,i){f._iO.onwarning&&f._iO.onwarning(e,t,i)},this._onfinish=function(){var e=f._iO.onfinish;f._onbufferchange(0),f._resetOnPosition(0),f.instanceCount&&(f.instanceCount--,f.instanceCount||(l(),f.playState=0,f.paused=!1,f.instanceCount=0,f.instanceOptions={},f._iO={},r(),f.isHTML5&&(f.position=0)),(!f.instanceCount||f._iO.multiShotEvents)&&e&&ct(f,function(){e.apply(f)}))},this._whileloading=function(e,t,i,s){var n=f._iO;f.bytesLoaded=e,f.bytesTotal=t,f.duration=Math.floor(i),f.bufferLength=s,f.durationEstimate=f.isHTML5||n.isMovieStar?f.duration:n.duration?f.duration>n.duration?f.duration:n.duration:parseInt(f.bytesTotal/f.bytesLoaded*f.duration,10),f.isHTML5||(f.buffered=[{start:0,end:f.duration}]),(3!==f.readyState||f.isHTML5)&&n.whileloading&&n.whileloading.apply(f)},this._whileplaying=function(e,i,s,n,r){var a,o=f._iO;return isNaN(e)||null===e?!1:(f.position=Math.max(0,e),f._processOnPosition(),!f.isHTML5&&c>8&&(o.usePeakData&&i!==t&&i&&(f.peakData={left:i.leftPeak,right:i.rightPeak}),o.useWaveformData&&s!==t&&s&&(f.waveformData={left:s.split(","),right:n.split(",")}),o.useEQData&&r!==t&&r&&r.leftEQ&&(a=r.leftEQ.split(","),f.eqData=a,f.eqData.left=a,r.rightEQ!==t&&r.rightEQ&&(f.eqData.right=r.rightEQ.split(",")))),1===f.playState&&(f.isHTML5||8!==c||f.position||!f.isBuffering||f._onbufferchange(0),o.whileplaying&&o.whileplaying.apply(f)),!0)},this._oncaptiondata=function(e){f.captiondata=e,f._iO.oncaptiondata&&f._iO.oncaptiondata.apply(f,[e])},this._onmetadata=function(e,t){var i,s,n={};for(i=0,s=e.length;s>i;i++)n[e[i]]=t[i];f.metadata=n,f._iO.onmetadata&&f._iO.onmetadata.call(f,f.metadata)},this._onid3=function(e,t){var i,s,n=[];for(i=0,s=e.length;s>i;i++)n[e[i]]=t[i];f.id3=h(f.id3,n),f._iO.onid3&&f._iO.onid3.apply(f)},this._onconnect=function(e){e=1===e,f.connected=e,e&&(f.failures=0,N(f.id)&&(f.getAutoPlay()?f.play(t,f.getAutoPlay()):f._iO.autoLoad&&f.load()),f._iO.onconnect&&f._iO.onconnect.apply(f,[e]))},this._ondataerror=function(){f.playState>0&&f._iO.ondataerror&&f._iO.ondataerror.apply(f)}},A=function(){return yt.body||yt.getElementsByTagName("div")[0]},o=function(e){return yt.getElementById(e)},h=function(e,i){var s,n,r=e||{};s=i===t?ht.defaultOptions:i;for(n in s)s.hasOwnProperty(n)&&r[n]===t&&(r[n]="object"!=typeof s[n]||null===s[n]?s[n]:h(r[n],s[n]));return r},ct=function(t,i){t.isHTML5||8!==c?i():e.setTimeout(i,0)},g={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},f=function(e,i){var s,n=!0,r=i!==t,a=ht.setupOptions,o=g;for(s in e)if(e.hasOwnProperty(s))if("object"!=typeof e[s]||null===e[s]||e[s]instanceof Array||e[s]instanceof RegExp)r&&o[i]!==t?ht[i][s]=e[s]:a[s]!==t?(ht.setupOptions[s]=e[s],ht[s]=e[s]):o[s]===t?n=!1:ht[s]instanceof Function?ht[s].apply(ht,e[s]instanceof Array?e[s]:[e[s]]):ht[s]=e[s];else{if(o[s]!==t)return f(e[s],s);n=!1}return n},st=function(){function t(e){var t=Rt.call(e),i=t.length;return r?(t[1]="on"+t[1],i>3&&t.pop()):3===i&&t.push(!1),t}function i(e,t){var i=e.shift(),s=[a[t]];r?i[s](e[0],e[1]):i[s].apply(i,e)}function s(){i(t(arguments),"add")}function n(){i(t(arguments),"remove")}var r=e.attachEvent,a={add:r?"attachEvent":"addEventListener",remove:r?"detachEvent":"removeEventListener"};return{add:s,remove:n}}(),lt={abort:r(function(){}),canplay:r(function(){var e,i=this._s;if(i._html5_canplay)return!0;if(i._html5_canplay=!0,i._onbufferchange(0),e=i._iO.position===t||isNaN(i._iO.position)?null:i._iO.position/Ht,this.currentTime!==e)try{this.currentTime=e}catch(s){}i._iO._oncanplay&&i._iO._oncanplay()}),canplaythrough:r(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),durationchange:r(function(){var e,t=this._s;e=t._get_html5_duration(),isNaN(e)||e===t.duration||(t.durationEstimate=t.duration=e)}),ended:r(function(){var e=this._s;e._onfinish()}),error:r(function(){this._s._onload(!1)}),loadeddata:r(function(){var e=this._s;e._loaded||Ft||(e.duration=e._get_html5_duration())}),loadedmetadata:r(function(){}),loadstart:r(function(){this._s._onbufferchange(1)}),play:r(function(){this._s._onbufferchange(0)}),playing:r(function(){this._s._onbufferchange(0)}),progress:r(function(e){var t,i,s=this._s,n=0,r=("progress"===e.type,e.target.buffered),a=e.loaded||0,o=e.total||1;if(s.buffered=[],r&&r.length){for(t=0,i=r.length;i>t;t++)s.buffered.push({start:r.start(t)*Ht,end:r.end(t)*Ht});n=(r.end(0)-r.start(0))*Ht,a=Math.min(1,n/(e.target.duration*Ht))}isNaN(a)||(s._whileloading(a,o,s._get_html5_duration()),a&&o&&a===o&&lt.canplaythrough.call(this,e))}),ratechange:r(function(){}),suspend:r(function(e){var t=this._s;lt.progress.call(this,e),t._onsuspend()}),stalled:r(function(){}),timeupdate:r(function(){this._s._onTimer()}),waiting:r(function(){var e=this._s;e._onbufferchange(1)})},K=function(e){var t;return t=e&&(e.type||e.url||e.serverURL)?e.serverURL||e.type&&n(e.type)?!1:e.type?G({type:e.type}):G({url:e.url})||ht.html5Only||e.url.match(/data\:/i):!1},et=function(e){var i;return e&&(i=Ft?Qt:ht.html5.canPlayType("audio/wav")?Kt:Qt,e.src=i,e._called_unload!==t&&(e._called_load=!1)),$t&&(nt=null),i},G=function(e){if(!ht.useHTML5Audio||!ht.hasHTML5)return!1;var i,s,r,a,o=e.url||null,l=e.type||null,p=ht.audioFormats;if(l&&ht.html5[l]!==t)return ht.html5[l]&&!n(l);if(!J){J=[];for(a in p)p.hasOwnProperty(a)&&(J.push(a),p[a].related&&(J=J.concat(p[a].related)));J=new RegExp("\\.("+J.join("|")+")(\\?.*)?$","i")}return r=o?o.toLowerCase().match(J):null,r&&r.length?r=r[1]:l?(s=l.indexOf(";"),r=(-1!==s?l.substr(0,s):l).substr(6)):i=!1,r&&ht.html5[r]!==t?i=ht.html5[r]&&!n(r):(l="audio/"+r,i=ht.html5.canPlayType({type:l}),ht.html5[r]=i,i=i&&ht.html5[l]&&!n(l)),i},it=function(){function e(e){var t,i,s=!1,n=!1;if(!a||"function"!=typeof a.canPlayType)return s;if(e instanceof Array){for(r=0,i=e.length;i>r;r++)(ht.html5[e[r]]||a.canPlayType(e[r]).match(ht.html5Test))&&(n=!0,ht.html5[e[r]]=!0,ht.flash[e[r]]=!!e[r].match(Yt));s=n}else t=a&&"function"==typeof a.canPlayType?a.canPlayType(e):!1,s=!(!t||!t.match(ht.html5Test));return s}if(!ht.useHTML5Audio||!ht.hasHTML5)return ht.html5.usingFlash=!0,Lt=!0,!1;var i,s,n,r,a=Audio!==t?zt&&opera.version()<10?new Audio(null):new Audio:null,o={};n=ht.audioFormats;for(i in n)if(n.hasOwnProperty(i)&&(s="audio/"+i,o[i]=e(n[i].type),o[s]=o[i],i.match(Yt)?(ht.flash[i]=!0,ht.flash[s]=!0):(ht.flash[i]=!1,ht.flash[s]=!1),n[i]&&n[i].related))for(r=n[i].related.length-1;r>=0;r--)o["audio/"+n[i].related[r]]=o[i],ht.html5[n[i].related[r]]=o[i],ht.flash[n[i].related[r]]=o[i];return o.canPlayType=a?e:null,ht.html5=h(ht.html5,o),ht.html5.usingFlash=Q(),Lt=ht.html5.usingFlash,!0},P={},H=function(){},U=function(e){return 8===c&&e.loops>1&&e.stream&&(e.stream=!1),e},F=function(e){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0),e},z=function(){},l=function(){return!1},R=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=l);t=null},$=function(e){e===t&&(e=!1),(xt||e)&&ht.disable(e)},D=function(e){var t,i=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(i=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return t=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+ht.movieURL,ht.noSWFCache&&(t+="?ts="+(new Date).getTime()),t},k=function(){c=parseInt(ht.flashVersion,10),8!==c&&9!==c&&(ht.flashVersion=c=Mt);var e=ht.debugMode||ht.debugFlash?"_debug.swf":".swf";ht.useHTML5Audio&&!ht.html5Only&&ht.audioFormats.mp4.required&&9>c&&(ht.flashVersion=c=9),ht.version=ht.versionNumber+(ht.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(ht.defaultOptions=h(ht.defaultOptions,ht.flash9Options),ht.features.buffering=!0,ht.defaultOptions=h(ht.defaultOptions,ht.movieStarOptions),ht.filePatterns.flash9=new RegExp("\\.(mp3|"+ti.join("|")+")(\\?.*)?$","i"),ht.features.movieStar=!0):ht.features.movieStar=!1,ht.filePattern=ht.filePatterns[8!==c?"flash9":"flash8"],ht.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),ht.features.peakData=ht.features.waveformData=ht.features.eqData=c>8},O=function(e,t){return gt?void gt._setPolling(e,t):!1},L=function(){},N=this.getSoundById,V=function(){var e=[];return ht.debugMode&&e.push(B.sm2Debug),ht.debugFlash&&e.push(B.flashDebug),ht.useHighPerformance&&e.push(B.highPerf),e.join(" ")},j=function(){var e=(H("fbHandler"),ht.getMoviePercent()),t=B,i={type:"FLASHBLOCK"};return ht.html5Only?!1:void(ht.ok()?ht.oMC&&(ht.oMC.className=[V(),t.swfDefault,t.swfLoaded+(ht.didFlashBlock?" "+t.swfUnblocked:"")].join(" ")):(Lt&&(ht.oMC.className=V()+" "+t.swfDefault+" "+(null===e?t.swfTimedout:t.swfError)),ht.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:i}),I(i)))},m=function(e,i,s){bt[e]===t&&(bt[e]=[]),bt[e].push({method:i,scope:s||null,fired:!1})},v=function(e){if(e||(e={type:ht.ok()?"onready":"ontimeout"}),!kt&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&(ht.ok()||xt&&!e.ignoreInit))return!1;var t,i,s={success:e&&e.ignoreInit?ht.ok():!xt},n=e&&e.type?bt[e.type]||[]:[],r=[],a=[s],o=Lt&&!ht.ok();for(e.error&&(a[0].error=e.error),t=0,i=n.length;i>t;t++)n[t].fired!==!0&&r.push(n[t]);if(r.length)for(t=0,i=r.length;i>t;t++)r[t].scope?r[t].method.apply(r[t].scope,a):r[t].method.apply(this,a),o||(r[t].fired=!0);return!0},y=function(){e.setTimeout(function(){ht.useFlashBlock&&j(),v(),"function"==typeof ht.onload&&ht.onload.apply(e),ht.waitForWindowLoad&&st.add(e,"load",y)},1)},at=function(){if(rt!==t)return rt;var i,s,n,r=!1,a=navigator,o=a.plugins,l=e.ActiveXObject;if(o&&o.length)s="application/x-shockwave-flash",n=a.mimeTypes,n&&n[s]&&n[s].enabledPlugin&&n[s].enabledPlugin.description&&(r=!0);else if(l!==t&&!mt.match(/MSAppHost/i)){try{i=new l("ShockwaveFlash.ShockwaveFlash")}catch(p){i=null}r=!!i,i=null}return rt=r,r},Q=function(){var e,t,i=ht.audioFormats,s=jt&&!!mt.match(/os (1|2|3_0|3_1)\s/i);if(s?(ht.hasHTML5=!1,ht.html5Only=!0,ht.oMC&&(ht.oMC.style.display="none")):ht.useHTML5Audio&&(ht.html5&&ht.html5.canPlayType||(ht.hasHTML5=!1)),ht.useHTML5Audio&&ht.hasHTML5){Y=!0;for(t in i)i.hasOwnProperty(t)&&i[t].required&&(ht.html5.canPlayType(i[t].type)?ht.preferFlash&&(ht.flash[t]||ht.flash[i[t].type])&&(e=!0):(Y=!1,e=!0))}return ht.ignoreFlash&&(e=!1,Y=!0),ht.html5Only=ht.hasHTML5&&ht.useHTML5Audio&&!e,!ht.html5Only},W=function(e){var t,i,s,n=0;if(e instanceof Array){for(t=0,i=e.length;i>t;t++)if(e[t]instanceof Object){if(ht.canPlayMIME(e[t].type)){n=t;break}}else if(ht.canPlayURL(e[t])){n=t;break}e[n].url&&(e[n]=e[n].url),s=e[n]}else s=e;return s},X=function(e){e._hasTimer||(e._hasTimer=!0,!Nt&&ht.html5PollingInterval&&(null===It&&0===Et&&(It=setInterval(Z,ht.html5PollingInterval)),Et++))},q=function(e){e._hasTimer&&(e._hasTimer=!1,!Nt&&ht.html5PollingInterval&&Et--)},Z=function(){var e;if(null!==It&&!Et)return clearInterval(It),It=null,!1;for(e=ht.soundIDs.length-1;e>=0;e--)ht.sounds[ht.soundIDs[e]].isHTML5&&ht.sounds[ht.soundIDs[e]]._hasTimer&&ht.sounds[ht.soundIDs[e]]._onTimer()},I=function(i){i=i!==t?i:{},"function"==typeof ht.onerror&&ht.onerror.apply(e,[{type:i.type!==t?i.type:null}]),i.fatal!==t&&i.fatal&&ht.disable()},ot=function(){if(!Xt||!at())return!1;var e,t,i=ht.audioFormats;for(t in i)if(i.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(ht.html5[t]=!1,i[t]&&i[t].related))for(e=i[t].related.length-1;e>=0;e--)ht.html5[i[t].related[e]]=!1},this._setSandboxType=function(){},this._externalInterfaceOK=function(){if(ht.swfLoaded)return!1;ht.swfLoaded=!0,Zt=!1,Xt&&ot(),setTimeout(d,Bt?100:1)},E=function(e,i){function s(){}function n(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(wt&&_t)return!1;if(ht.html5Only)return k(),s(),ht.oMC=o(ht.movieID),d(),wt=!0,_t=!0,!1;var r,a,l,p,c,u,h,f,g=i||ht.url,m=ht.altURL||g,v="JS/Flash audio component (SoundManager 2)",y=A(),b=V(),w=null,_=yt.getElementsByTagName("html")[0];if(w=_&&_.dir&&_.dir.match(/rtl/i),e=e===t?ht.id:e,k(),ht.url=D(Gt?g:m),i=ht.url,ht.wmode=!ht.wmode&&ht.useHighPerformance?"transparent":ht.wmode,null!==ht.wmode&&(mt.match(/msie 8/i)||!Bt&&!ht.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Ot.push(P.spcWmode),ht.wmode=null),r={name:e,id:e,src:i,quality:"high",allowScriptAccess:ht.allowScriptAccess,bgcolor:ht.bgColor,pluginspage:Jt+"www.macromedia.com/go/getflashplayer",title:v,type:"application/x-shockwave-flash",wmode:ht.wmode,hasPriority:"true"},ht.debugFlash&&(r.FlashVars="debug=1"),ht.wmode||delete r.wmode,Bt)a=yt.createElement("div"),p=['<object id="'+e+'" data="'+i+'" type="'+r.type+'" title="'+r.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',n("movie",i),n("AllowScriptAccess",ht.allowScriptAccess),n("quality",r.quality),ht.wmode?n("wmode",ht.wmode):"",n("bgcolor",ht.bgColor),n("hasPriority","true"),ht.debugFlash?n("FlashVars",r.FlashVars):"","</object>"].join("");else{a=yt.createElement("embed");for(l in r)r.hasOwnProperty(l)&&a.setAttribute(l,r[l])}if(L(),b=V(),y=A())if(ht.oMC=o(ht.movieID)||yt.createElement("div"),ht.oMC.id)f=ht.oMC.className,ht.oMC.className=(f?f+" ":B.swfDefault)+(b?" "+b:""),ht.oMC.appendChild(a),Bt&&(c=ht.oMC.appendChild(yt.createElement("div")),c.className=B.swfBox,c.innerHTML=p),_t=!0;else{if(ht.oMC.id=ht.movieID,ht.oMC.className=B.swfDefault+" "+b,u=null,c=null,ht.useFlashBlock||(ht.useHighPerformance?u={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(u={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},w&&(u.left=Math.abs(parseInt(u.left,10))+"px"))),Ut&&(ht.oMC.style.zIndex=1e4),!ht.debugFlash)for(h in u)u.hasOwnProperty(h)&&(ht.oMC.style[h]=u[h]);try{Bt||ht.oMC.appendChild(a),y.appendChild(ht.oMC),Bt&&(c=ht.oMC.appendChild(yt.createElement("div")),c.className=B.swfBox,c.innerHTML=p),_t=!0}catch(x){throw new Error(H("domError")+" \n"+x.toString())}}return wt=!0,s(),!0},M=function(){return ht.html5Only?(E(),!1):gt?!1:ht.url?(gt=ht.getMovie(ht.id),gt||(Ct?(Bt?ht.oMC.innerHTML=St:ht.oMC.appendChild(Ct),Ct=null,wt=!0):E(ht.id,ht.url),gt=ht.getMovie(ht.id)),"function"==typeof ht.oninitmovie&&setTimeout(ht.oninitmovie,1),!0):!1
},b=function(){setTimeout(w,1e3)},_=function(){e.setTimeout(function(){ht.setup({preferFlash:!1}).reboot(),ht.didFlashBlock=!0,ht.beginDelayedInit()},1)},w=function(){var t,i=!1;return ht.url?Tt?!1:(Tt=!0,st.remove(e,"load",b),rt&&Zt&&!qt?!1:(kt||(t=ht.getMoviePercent(),t>0&&100>t&&(i=!0)),void setTimeout(function(){return t=ht.getMoviePercent(),i?(Tt=!1,e.setTimeout(b,1),!1):void(!kt&&Wt&&(null===t?ht.useFlashBlock||0===ht.flashLoadTimeout?ht.useFlashBlock&&j():!ht.useFlashBlock&&Y?_():v({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}}):0===ht.flashLoadTimeout||(!ht.useFlashBlock&&Y?_():$(!0))))},ht.flashLoadTimeout))):!1},x=function(){function t(){st.remove(e,"focus",x)}return qt||!Zt?(t(),!0):(Wt=!0,qt=!0,Tt=!1,b(),t(),!0)},dt=function(){},pt=function(){},u=function(t){if(kt)return!1;if(ht.html5Only)return kt=!0,y(),!0;var i,s=ht.useFlashBlock&&ht.flashLoadTimeout&&!ht.getMoviePercent(),n=!0;return s||(kt=!0),i={type:!rt&&Lt?"NO_FLASH":"INIT_TIMEOUT"},(xt||t)&&(ht.useFlashBlock&&ht.oMC&&(ht.oMC.className=V()+" "+(null===ht.getMoviePercent()?B.swfTimedout:B.swfError)),v({type:"ontimeout",error:i,ignoreInit:!0}),I(i),n=!1),xt||(ht.waitForWindowLoad&&!Pt?st.add(e,"load",y):y()),n},p=function(){var e,i=ht.setupOptions;for(e in i)i.hasOwnProperty(e)&&(ht[e]===t?ht[e]=i[e]:ht[e]!==i[e]&&(ht.setupOptions[e]=ht[e]))},d=function(){function t(){st.remove(e,"load",ht.beginDelayedInit)}if(kt)return!1;if(ht.html5Only)return kt||(t(),ht.enabled=!0,u()),!0;M();try{gt._externalInterfaceTest(!1),O(!0,ht.flashPollingInterval||(ht.useHighPerformance?10:50)),ht.debugMode||gt._disableDebug(),ht.enabled=!0,ht.html5Only||st.add(e,"unload",l)}catch(i){return I({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),$(!0),u(),!1}return u(),t(),!0},C=function(){return T?!1:(T=!0,p(),L(),!rt&&ht.hasHTML5&&ht.setup({useHTML5Audio:!0,preferFlash:!1}),it(),!rt&&Lt&&(Ot.push(P.needFlash),ht.setup({flashLoadTimeout:1})),yt.removeEventListener&&yt.removeEventListener("DOMContentLoaded",C,!1),M(),!0)},tt=function(){return"complete"===yt.readyState&&(C(),yt.detachEvent("onreadystatechange",tt)),!0},S=function(){Pt=!0,C(),st.remove(e,"load",S)},at(),st.add(e,"focus",x),st.add(e,"load",b),st.add(e,"load",S),yt.addEventListener?yt.addEventListener("DOMContentLoaded",C,!1):yt.attachEvent?yt.attachEvent("onreadystatechange",tt):I({type:"NO_DOM2_EVENTS",fatal:!0})}if(!e||!e.document)throw new Error("SoundManager requires a browser with window and document objects.");var s=null;e.SM2_DEFER!==t&&SM2_DEFER||(s=new i),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=i,module.exports.soundManager=s):"function"==typeof a&&a.amd&&a("soundmanager2",[],function(){function t(t){if(!e.soundManager&&t instanceof Function){var s=t(i);s instanceof i&&(e.soundManager=s)}return e.soundManager}return{constructor:i,getInstance:t}}),e.SoundManager=i,e.soundManager=s}(window),a("text",["module"],function(e){"use strict";var t,i,s,n,a,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,p=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,c=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,h=d&&(location.port||void 0),f={},g=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(p);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=o[t];try{e=new ActiveXObject(i)}catch(s){}if(e){o=[i];break}}return e},parseName:function(e){var t,i,s,n=!1,r=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!a||r>1)?(t=e.substring(0,r),i=e.substring(r+1,e.length)):t=e,s=i||t,r=s.indexOf("!"),-1!==r&&(n="strip"===s.substring(r+1),s=s.substring(0,r),i?i=s:t=s),{moduleName:t,ext:i,strip:n}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,s,n){var r,a,o,l=t.xdRegExp.exec(e);return l?(r=l[2],a=l[3],a=a.split(":"),o=a[1],a=a[0],!(r&&r!==i||a&&a.toLowerCase()!==s.toLowerCase()||(o||a)&&o!==n)):!0},finishLoad:function(e,i,s,n){s=i?t.strip(s):s,g.isBuild&&(f[e]=s),n(s)},load:function(e,i,s,n){if(n.isBuild&&!n.inlineText)return void s();g.isBuild=n.isBuild;var r=t.parseName(e),a=r.moduleName+(r.ext?"."+r.ext:""),o=i.toUrl(a),l=g.useXhr||t.useXhr;return 0===o.indexOf("empty:")?void s():void(!d||l(o,c,u,h)?t.get(o,function(i){t.finishLoad(e,r.strip,i,s)},function(e){s.error&&s.error(e)}):i([a],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,s)}))},write:function(e,i,s){if(f.hasOwnProperty(i)){var n=t.jsEscape(f[i]);s.asModule(e+"!"+i,"define(function () { return '"+n+"';});\n")}},writeFile:function(e,i,s,n,r){var a=t.parseName(i),o=a.ext?"."+a.ext:"",l=a.moduleName+o,p=s.toUrl(a.moduleName+o)+".js";t.load(l,s,function(){var i=function(e){return n(p,e)};i.asModule=function(e,t){return n.asModule(e,p,t)},t.write(e,l,i,r)},r)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=r.nodeRequire("fs"),t.get=function(e,t,s){try{var n=i.readFileSync(e,"utf8");0===n.indexOf("")&&(n=n.substring(1)),t(n)}catch(r){s(r)}}):"xhr"===g.env||!g.env&&t.createXhr()?t.get=function(e,i,s,n){var r,a=t.createXhr();if(a.open("GET",e,!0),n)for(r in n)n.hasOwnProperty(r)&&a.setRequestHeader(r.toLowerCase(),n[r]);g.onXhr&&g.onXhr(a,e),a.onreadystatechange=function(){var t,n;4===a.readyState&&(t=a.status,t>399&&600>t?(n=new Error(e+" HTTP status: "+t),n.xhr=a,s(n)):i(a.responseText),g.onXhrComplete&&g.onXhrComplete(a,e))},a.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,s,n="utf-8",r=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),n)),l="";try{for(i=new java.lang.StringBuffer,s=o.readLine(),s&&s.length()&&65279===s.charAt(0)&&(s=s.substring(1)),null!==s&&i.append(s);null!==(s=o.readLine());)i.append(a),i.append(s);l=String(i.toString())}finally{o.close()}t(l)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,n=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in s,t.get=function(e,t){var i,r,o,l={};a&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{i=s["@mozilla.org/network/file-input-stream;1"].createInstance(n.nsIFileInputStream),i.init(o,1,0,!1),r=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(n.nsIConverterInputStream),r.init(i,"utf-8",i.available(),n.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),l),r.close(),i.close(),t(l.value)}catch(p){throw new Error((o&&o.path||"")+": "+p)}}),t}),a("text!templates/spp-template.html",[],function(){return'<div class="spp-tabs">\r\n	<div class="spp-tab spp-tab-episodes">\r\n		<div><%="Episodes".toLocaleString()%></div>\r\n	</div>\r\n	<div class="spp-tab spp-tab-now-playing spp-tab-active">\r\n		<div><%="Now Playing".toLocaleString()%></div>\r\n	</div>\r\n	<div class="spp-tab spp-tab-details">\r\n		<div><%="Details".toLocaleString()%></div>\r\n	</div>\r\n</div>\r\n<div class="spp-tab-wrap spp-tab-wrap-center">\r\n	<div class="spp-main-image"></div>\r\n	<div class="spp-main-region"></div>\r\n	<div class="spp-playlist-region"></div>\r\n	<div class="spp-episode-details-region spp-off-to-right"></div>\r\n</div>\r\n '}),a("entities/track-model",["spp-app"],function(e){return e.module("Entities",function(e,t,i){e.Track=i.Model.extend({defaults:{data:{active:!1,artwork_url:"",attachments_uri:"",bpm:null,comment_count:0,commentable:!0,created_at:"",current_time:"0:00:00",description:"",download_count:0,download_url:"",downloadable:!0,download:!0,duration:0,duration_time:"0:00:00",episode_number:0,embeddable_by:"all",email:"",fallback_permalink:"",favoritings_count:0,genre:"",id:0,isrc:"",key_signature:"",kind:"track",label_id:null,label_name:"",license:"",method:"file",original_content_size:0,original_format:"mp3",paid:!1,permalink:"",permalink_url:"",playing:!1,playback_count:0,purchase_title:null,purchase_url:null,release:"",release_day:null,release_month:null,release_year:null,sharing:"",show_name:"",state:"",stream_url:"",streamable:!0,tag_list:"",tags:"",tag_string:"",title:"",track_type:"",uri:"",user:{avatar_url:"",id:0,kind:"user",permalink:"",permalink_url:"",uri:"",username:""},user_id:0,video_url:null,waveform_url:"",show_notes:"",truncated_show_notes:""}}})}),e.Entities}),a("entities/playlist-model",["spp-app","entities/track-model"],function(e){e.module("Entities",function(e,t,n,r,a){var o=[];e.Tracks=n.Collection.extend({model:e.Track,initialize:function(){this._currentPage=1,this._tracksPerPage=10,this._moreTracksComing=!1},comparators:{newest:function(e){return-e.get("id")},oldest:function(e){return e.get("id")},mostPopular:function(e){return-e.get("playback_count")},leastPopular:function(e){return e.get("playback_count")}},getCurrentPage:function(){return this._currentPage},setCurrentPage:function(e){this._currentPage=e},getPageOfTracks:function(){var t,i=new Array,s=(this._currentPage-1)*this._tracksPerPage,n=this._currentPage*this._tracksPerPage;return t=this.searchedTracks?this.searchedTracks.models:this.models,a.each(t,function(e,t){e>=s&&n>e&&i.push(t)}),new e.Tracks(i)},setComparator:function(e){return this.comparator=this.comparators[e],this},totalPlaybackCount:function(){return"undefined"==typeof this.cached_playback_count&&(this.cached_playback_count=this.models.reduce(function(e,t){var i=t.get("data");return"number"==typeof i.playback_count?e+i.playback_count:e},0)),this.cached_playback_count},getNextTrack:function(e){var t;t=this.searchedTracks?this.searchedTracks.models:this.models;var i=t.indexOf(e);return t.length>i+1?t[i+1]:null},reverseSortOrder:function(){this.models=this.models.reverse(),this.searchedTracks&&(this.searchedTracks.models=this.searchedTracks.models.reverse())},searchTracks:function(t){if(""==t)return void(this.searchedTracks=null);var i=this.filter(function(e){var i=e.get("data");return i.title.toLowerCase().indexOf(t.toLowerCase())>0?!0:i.tag_list.toLowerCase().indexOf('"'+t.toLowerCase()+'"')>0?!0:!1});this.searchedTracks=new e.Tracks(i)},getNumTracks:function(){return this.searchedTracks?this.searchedTracks.length:this.length},getNumTracksAfterAjax:function(){return this._numTracksAfterAjax},isMoreTracksComing:function(){return this._moreTracksComing}});var l=function(e,t){var i=e.model.get("options");a.ajax({url:AP_Player.ajaxurl,dataType:"json",type:"POST",async:!0,data:{action:"get_spplayer_tracks",stream:i.url,episode_limit:i.episode_limit,delay:i.ajax_delay},success:c,error:p,invokeData:{Layout:e,playerRegion:t}})},p=function(e,t){if("parsererror"===t){var i=e.responseText.replace(/(\r\n|\n|\r)/gm,""),n=/(<span.*\/span>)(.*)/,r=n.exec(i);if(r){s("There was an error while retrieving the feed. The error message is: ",r[1]);try{var a=JSON.parse(r[2]);u(a,this.invokeData.Layout,this.invokeData.playerRegion,a.length,!1)}catch(o){d(this.invokeData.playerRegion)}}else s("There was an error while retrieving the feed."),d(this.invokeData.playerRegion)}else s("There was an error while retrieving the feed."),d(this.invokeData.playerRegion)},d=function(e){a(e.el[0]).cssExtended("background-image","none",AP_Player.importantStr)},c=function(e){u(e,this.invokeData.Layout,this.invokeData.playerRegion,e.length,!1)},u=function(n,r,l,p,c){if(0==n.length)return s("Could not retrieve data from the feed.  Check to ensure the feed is valid."),void d(l);var u,h,f,g=r.model.get("region"),m=r.model.get("options"),v=r.model.attributes.options.sort;"undefined"==typeof o[g]?(h=!0,u=new Array):(h=!1,u=o[g].models),"oldest"==v?(n.reverse(),f=1):f=p;var y=u.length;a.each(n,function(s,n){if(y>0)return y--,"oldest"==v?f++:f--,!0;var a=/(?:[^\s"]+|"[^"]*")+/g;if(void 0!==n.tag_list&&""!=n.tag_list.trim()){var o=n.tag_list.match(a);o=o.join(",").replace(/\"|\"|\"|\"/g,""),n.tag_string=o,o=o.split(","),n.tags=o}else n.tags=new Array;var l=Math.ceil(n.duration/1e3),p=Math.floor(l/60),d=Math.floor(p/60),c=d,h=p%60,g=l%60;if(n.duration_time=c+":"+i(h,2)+":"+i(g,2),n.playing=!1,n.paid=m.paid,""!=m.numbering){var b=m.numbering,w=(b.split("#").length-1,new RegExp("[#]{1,10}")),_=b.replace(w,"([0-9]{0,4})"),k=n.title.match(_);k&&(n.episode_number=k[1]);var x=new RegExp(_,"g");n.title_without_episode_number=n.title.replace(x,"")}else n.title_without_episode_number=n.title,n.episode_number=f;n.show_episode_numbers=m.show_episode_numbers,n.download=m.download,n.social=m.social,n.social_twitter=m.social_twitter,n.social_facebook=m.social_facebook,n.social_gplus=m.social_gplus,n.social_linkedin=m.social_linkedin,n.social_stumble=m.social_stumble,n.social_pinterest=m.social_pinterest,n.social_email=m.social_email,n.subscribe_rss=m.subscribe_rss,n.subscribe_itunes=m.subscribe_itunes,n.subscribe_stitcher=m.subscribe_stitcher,n.subscribe_soundcloud=m.subscribe_soundcloud,n.subscribe_buzzsprout=m.subscribe_buzzsprout,n.subscribe_iheartradio=m.subscribe_iheartradio,n.subscribe_googleplay=m.subscribe_googleplay,n.subscribe_pocketcasts=m.subscribe_pocketcasts,n.poweredby=m.poweredby,n.speedcontrol=m.speedcontrol,n.episode_timer=m.episode_timer,n.show_logo=void 0!==m.show_image?m.show_image:n.artwork_url,n.show_name=m.show_name,n.hashtag=m.hashtag,n.twitter_username=m.twitter_username,n.tweet_text=m.tweet_text,n.permalink=m.permalink?m.permalink:n.permalink_url,n.email="?subject="+encodeURIComponent(n.title.replace(/&amp;/g,"&")),n.email+="&amp;body=Hi,%0D%0A%0D%0AI thought you might enjoy this ",n.email+=void 0!==n.show_name?"episode of "+encodeURIComponent(n.show_name.replace(/&amp;/g,"&"))+":%0D%0A%0D%0A":"podcast:%0D%0A%0D%0A",n.email+=encodeURIComponent(n.title.replace(/&amp;/g,"&"))+"%0D%0A",n.email+=n.permalink?n.permalink:window.location.href,n.email+="%0D%0A%0D%0AEnjoy!",n.method=n.permalink_url.indexOf("soundcloud.com")>0?"soundcloud":"file";var P=/\n/g;if("soundcloud"==n.method){n.show_notes="<p>"+n.description+"</p>",n.show_notes=n.show_notes.replace(P,"</p><p>");var M=/<p>\s*<\/p>/g;n.show_notes=n.show_notes.replace(M,"")}else n.show_notes=n.description;n.stream_url=n.stream_url.indexOf("&")>-1?n.stream_url.slice(0,n.stream_url.indexOf("&")):n.stream_url;var C={data:n},S=new e.Track(C),T=S.get("data");T.cid=S.cid,S.set({data:T}),S.on("change:isPlaying",function(){t.trigger("changeEpisodePlaying",r,this)}),S.on("change:speed",function(){t.trigger("changeSpeed",r,this)}),u.push(S),"oldest"==v?f++:f--});var g=r.model.get("region");o[g]=new e.Tracks(u),c&&(o[g]._moreTracksComing=!0),o[g]._numTracksAfterAjax=p,h?t.trigger("tracksInitialized",r,o[g],l):t.trigger("tracksAdded",r)};return t.reqres.setHandler("tracks:initialize",function(e,t){var i=e.model.get("options"),s="SmartPodcastPlayer_Tracks_"+i.uid;if("object"==typeof window[s]){var n=window[s],r="number"!=typeof i.featured_episode||n.numTracks-i.featured_episode<10;r&&u(n.tracks,e,t,n.numTracks,!0)}l(e,t)}),t.reqres.setHandler("tracks:get",function(e){var t=e.model.get("region");return o[t]}),t.reqres.setHandler("track:featured",function(e){var t,i=e.model.get("region"),s=e.model.get("options"),n=s.featured_episode,r=o[i].length;return o[i].isMoreTracksComing()&&("oldest"===s.sort?n>10&&(n=0):n-=o[i].getNumTracksAfterAjax()-10),"number"==typeof n&&n>0?(n>r&&(n=r),t="oldest"==s.sort?n-1:r-n):t=0,o[i].models[t]}),t.Entities})}),function(){"use strict";var e,t,i="undefined",s="string",n=self.navigator,r=String,a=Object.prototype.hasOwnProperty,o={},l={},p=!1,d=!0,c=/^\s*application\/(?:vnd\.oftn\.|x-)?l10n\+json\s*(?:$|;)/i,u="locale",h="defaultLocale",f="toLocaleString",g="toLowerCase",m=Array.prototype.indexOf||function(e){for(var t=this.length,i=0;t>i;i++)if(i in this&&this[i]===e)return i;return-1},v=function(t){var i=new e,s={};i.open("GET",t,p),i.send(null);try{s=JSON.parse(i.responseText)}catch(n){setTimeout(function(){var e=new Error("Unable to load localization data: "+t);throw e.name="Localization Error",e},0)}return s},y=r[f]=function(e){if(arguments.length>0&&"number"!=typeof e)if(typeof e===s)y(v(e));else if(e===p)l={};else{var t,i,n;for(t in e)if(a.call(e,t)){if(i=e[t],t=t[g](),t in l&&i!==p||(l[t]={}),i===p)continue;if(typeof i===s){if(0!==r[u][g]().indexOf(t)){t in o||(o[t]=[]),o[t].push(i);continue}i=v(i)}for(n in i)a.call(i,n)&&(l[t][n]=i[n])}}return Function.prototype[f].apply(r,arguments)},b=function(e){for(var t,i=o[e],s=0,n=i.length;n>s;s++)t={},t[e]=v(i[s]),y(t);delete o[e]},w=r.prototype[f]=function(){var e,i=t,s=r[i?h:u],n=s[g]().split("-"),a=n.length,c=this.valueOf();t=p;do if(e=n.slice(0,a).join("-"),e in o&&b(e),e in l&&c in l[e])return l[e][c];while(a--);return!i&&r[h]?(t=d,w.call(c)):c};if(typeof XMLHttpRequest===i&&typeof ActiveXObject!==i){var _=ActiveXObject;e=function(){try{return new _("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new _("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new _("Msxml2.XMLHTTP")}catch(i){}throw new Error("XMLHttpRequest not supported by this browser.")}}else e=XMLHttpRequest;if(r[h]=r[h]||"",r[u]=n&&(n.language||n.userLanguage)||"",typeof document!==i)for(var k,x=document.getElementsByTagName("link"),P=x.length;P--;){var M=x[P],C=(M.getAttribute("rel")||"")[g]().split(/\s+/);c.test(M.type)&&(-1!==m.call(C,"localizations")?y(M.getAttribute("href")):-1!==m.call(C,"localization")&&(k={},k[(M.getAttribute("hreflang")||"")[g]()]=M.getAttribute("href"),y(k)))}}(),a("l10n",function(){}),String.toLocaleString({"":{Search:"Search",Download:"Download",Subscribe:"Subscribe",Episodes:"Episodes","Now Playing":"Now playing",Details:"Details","Episode Details":"Episode Details",more:"more",Share:"Share",of:"of"},es:{Search:"Buscar",Download:"Descargar",Subscribe:"Suscribirse",Episodes:"Episodios","Now Playing":"Reproduccin en curso",Details:"Detalles"},fr:{Search:"Rehercher",Download:"Tlcharger",Subscribe:"Sabonner",Episodes:"pisodes","Now Playing":"Lecture en cours",Details:"Dtails"},it:{Search:"Ricerca",Download:"Scarica",Subscribe:"Iscriviti",Episodes:"Episodi","Now Playing":"In riproduzione",Details:"Dettagli"},pt:{Search:"Pesquisar",Download:"Baixar",Subscribe:"Cadastre-se",Episodes:"Episdios","Now Playing":"Tocando agora",Details:"Detalhes"},ru:{Search:"",Download:"",Subscribe:"",Episodes:"","Now Playing":" ",Details:""},pl:{Search:"Poszukiwanie",Download:"pobieranie",Subscribe:"subskrybowa",Episodes:"Epizody","Now Playing":"Teraz odtwarzane",Details:"Detale"},de:{Search:"Suchen",Download:"herunterladen",Subscribe:"abonnieren",Episodes:"Episoden","Now Playing":"Gerade luft",Details:"Details"},ar:{Search:"",Download:"",Subscribe:"",Episodes:"","Now Playing":" ",Details:""},hi:{Search:"",Download:"",Subscribe:" ",Episodes:"","Now Playing":"   ",Details:""},zh:{Search:"",Download:"",Subscribe:"",Episodes:"","Now Playing":"",Details:""},ja:{Search:"",Download:"",Subscribe:"",Episodes:"","Now Playing":"",Details:""},bn:{Search:"",Download:"",Subscribe:"",Episodes:"","Now Playing":" ",Details:""}}),a("translations",function(){}),a("apps/smart-podcast-player/core",["spp-app","text!templates/spp-template.html","entities/track-model","entities/playlist-model","soundmanager2","l10n","translations"],function(e,t){return e.module("Core",function(e,i,s,n,r,a){e.FullLayout=n.Layout.extend({template:a.template(t),className:"spp-player-layout",regions:{mainRegion:".spp-main-region",playlistRegion:".spp-playlist-region",episodeDetailsRegion:".spp-episode-details-region"},initialize:function(){this.isMouse=!1},events:{"click    .spp-tab-episodes":"tabEpisodes","keypress .spp-tab-episodes":"tabEpisodes","click    .spp-tab-details":"tabDetails","keypress .spp-tab-details":"tabDetails","click    .spp-tab-now-playing":"tabNowPlaying","keypress .spp-tab-now-playing":"tabNowPlaying","mousedown .spp-control":function(){this.isMouse||(this.isMouse=!0,this.$el.find(".spp-control").each(function(){this.classList&&this.classList.add("spp-no-outline")}),this.$el.find(".spp-episode-details-body").addClass("spp-no-outline"))},"keydown .spp-control":function(e){this.isMouse&&9==e.which&&0==e.altKey&&(this.isMouse=!1,this.$el.find(".spp-control").each(function(){this.classList&&this.classList.remove("spp-no-outline")}),this.$el.find(".spp-episode-details-body").removeClass("spp-no-outline"))}},tabEpisodes:function(){this.$el.find(".spp-tab").removeClass("spp-tab-active"),this.$el.find(".spp-tab-episodes").addClass("spp-tab-active"),this.playlistRegion.currentView.triggerMethod("show"),this.$el.find(".spp-tab-wrap").removeClass("spp-tab-wrap-right"),this.$el.find(".spp-tab-wrap").removeClass("spp-tab-wrap-center"),this.$el.find(".spp-tab-wrap").addClass("spp-tab-wrap-left")},tabDetails:function(){this.$el.find(".spp-tab").removeClass("spp-tab-active"),this.$el.find(".spp-tab-details").addClass("spp-tab-active"),this.episodeDetailsRegion.currentView.render(),this.$el.find(".spp-tab-wrap").removeClass("spp-tab-wrap-center"),this.$el.find(".spp-tab-wrap").removeClass("spp-tab-wrap-left"),this.$el.find(".spp-tab-wrap").addClass("spp-tab-wrap-right")},tabNowPlaying:function(){this.$el.find(".spp-tab").removeClass("spp-tab-active"),this.$el.find(".spp-tab-now-playing").addClass("spp-tab-active"),this.$el.find(".spp-tab-wrap").removeClass("spp-tab-wrap-left"),this.$el.find(".spp-tab-wrap").removeClass("spp-tab-wrap-right"),this.$el.find(".spp-tab-wrap").addClass("spp-tab-wrap-center")}}),e.Controller={init:function(){r(".smart-podcast-player-container, .smart-podcast-player").each(function(t,n){if(!r(this).hasClass("smart-podcast-player-container"))return!0;var a="SPP_"+t,o={ajax_delay:0,background:"default",color:"#60b86c",download:!0,episode_limit:0,featured_episode:"",hashtag:"",hide_listens:!1,hover_timestamp:!0,show_image:void 0,numbering:"",permalink:void 0,poweredby:!1,show_episode_numbers:!0,show_name:void 0,social:!0,social_twitter:!1,social_facebook:!1,social_linkedin:!1,social_gplus:!1,social_pinterest:!1,social_email:!1,sort:"newest",speedcontrol:!0,style:"light",subscribe_itunes:"",subscribe_buzzsprout:"",subscribe_googleplay:"",subscribe_iheartradio:"",subscribe_pocketcasts:"",subscribe_soundcloud:"",subscribe_stitcher:"",subscribe_rss:!0,tweet_text:"",twitter_username:"",uid:"",url:"",view:"responsive",consumer_key:AP_Player.soundcloudConsumerKey,current_page:1,paid:!1,tracks_per_page:10};for(var l in o)"undefined"!=typeof r(n).data(l)&&(o[l]=r(n).data(l));o.social_twitter===!1&&o.social_facebook===!1&&o.social_linkedin===!1&&o.social_gplus===!1&&o.social_pinterest===!1&&o.social_email===!1&&(o.social=!1),"boolean"==typeof o.subscribe_rss&&o.subscribe_rss&&(o.subscribe_rss=o.url);var p=new e.FullLayout({model:new s.Model({region:a,options:o})});r(n).removeClass("smart-podcast-player-container"),r(n).addClass("smart-podcast-player");var d=new s.Marionette.Region({el:r(n)});i.request("tracks:initialize",p,d)})}},i.on("toggleEpisodeDetails",function(e,t){e.episodeDetailsRegion.$el.hasClass("spp-off-to-right")?(e.episodeDetailsRegion.currentView.render(),i.trigger("showEpisodeDetails",e,t)):i.trigger("hideEpisodeDetails",e)}),i.on("tracksInitialized",function(e,t,s){i.trigger("playlist:init",e),i.trigger("episode-details:init",e),i.trigger("player:init",e),s.show(e),s.$el.cssExtended("background-image","none",AP_Player.importantStr);var n=e.model.get("options");if("blurred_logo"==n.background){var r=/MSIE (\d+\.\d+);/.test(navigator.userAgent)||1==!!document.documentMode;if(!r){var a=t.at(0).get("data").show_logo;e.$el.find(".spp-main-image").append('<img src="'+a+'"/>')}}})}),e.Core.Controller}),a("text!templates/episode-details-template.html",[],function(){return'<div class="spp-episode-details-header">\r\n	<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-more-show-notes" tabindex="0" aria-labelledby="spp-svg-title-back-arrow" role="img" width="22" height="16" viewBox="0 0 22 16">\n  <title id="spp-svg-title-back-arrow">Back to playlist view</title>\n  <path id="Back_Arrow" d="M122.1,11.079H104.254l5.337-5.586a0.863,0.863,0,0,0,0-1.239,0.914,0.914,0,0,0-1.27,0L101,11.973l7.209,7.773a0.913,0.913,0,0,0,1.268,0,0.86,0.86,0,0,0,0-1.238L104.2,12.83H122.1A0.876,0.876,0,1,0,122.1,11.079Z" transform="translate(-101 -4)"/>\n</svg>\n\r\n	<%="Episode Details".toLocaleString()%>\r\n</div>\r\n\r\n<div class="spp-episode-details-body">\r\n	<% /* This extra wrapper is required so special characters don\'t break the layout */ %>\r\n	<div class="spp-show-notes">\r\n		<%= data.show_notes %>\r\n	</div>\r\n</div>\r\n\r\n<div class="spp-dss-region">\r\n</div>\r\n'}),a("text!templates/download-subscribe-share-template.html",[],function(){return'<% if ( data.download == true ) { %>\r\n	<div class="spp-dss-row">\r\n		<% var adl = document.createElement("a"); %>\r\n		<% var adloff = /Firefox/i.test(navigator.userAgent); %>\r\n		<% if ( typeof adl.download != "undefined" && !adloff && data.method != "soundcloud" ) { %>\r\n			<a class="spp-button-downloada" href="<%= data.download_url %>" download="<%= data.title %>">\r\n				<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-dss-image spp-download-image" aria-labelledby="spp-svg-title-download" role="img" width="24" height="24" viewBox="0 0 24 24">\n  <title id="spp-svg-title-download">Download</title>\n  <path id="Download" d="M23,24H1a1,1,0,0,1-1-1V19a1,1,0,1,1,2,0v3H22V19a1,1,0,0,1,2,0v4A1,1,0,0,1,23,24ZM12.753,17.661c-0.015.018-.019,0.04-0.036,0.057a1.031,1.031,0,0,1-1.435,0c-0.018-.018-0.025-0.043-0.041-0.062L6.282,12.7A1,1,0,0,1,7.7,11.282l3.3,3.3V1a1,1,0,0,1,2,0V14.586l3.3-3.3A1,1,0,0,1,17.718,12.7Z"/>\n</svg>\n\r\n			</a>\r\n			<div class="spp-dss-download-text">\r\n				<div class="spp-dss-download-text-2">\r\n					<a href="<%= data.download_url %>" download="<%= data.title %>" tabindex="-1">\r\n						<%="Download".toLocaleString()%>\r\n					</a>\r\n				</div>\r\n			</div>\r\n		<% } else { %>\r\n			<a class="spp-button-download" href="<%= data.download_url %>" target="_blank" tabindex="-1">\r\n				<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-dss-image spp-download-image" aria-labelledby="spp-svg-title-download" role="img" width="24" height="24" viewBox="0 0 24 24">\n  <title id="spp-svg-title-download">Download</title>\n  <path id="Download" d="M23,24H1a1,1,0,0,1-1-1V19a1,1,0,1,1,2,0v3H22V19a1,1,0,0,1,2,0v4A1,1,0,0,1,23,24ZM12.753,17.661c-0.015.018-.019,0.04-0.036,0.057a1.031,1.031,0,0,1-1.435,0c-0.018-.018-0.025-0.043-0.041-0.062L6.282,12.7A1,1,0,0,1,7.7,11.282l3.3,3.3V1a1,1,0,0,1,2,0V14.586l3.3-3.3A1,1,0,0,1,17.718,12.7Z"/>\n</svg>\n\r\n			</a>\r\n			<div class="spp-dss-download-text">\r\n				<div class="spp-dss-download-text-2">\r\n					<a class="spp-button-download" href="<%= data.download_url %>" target="_blank" tabindex="-1">\r\n						<%="Download".toLocaleString()%>\r\n					</a>\r\n				</div>\r\n			</div>\r\n		<% } %>\r\n	</div>\r\n<% } %>\r\n<% if ( data.subscribe_itunes || data.subscribe_buzzsprout || data.subscribe_googleplay\r\n		|| data.subscribe_iheartradio || data.subscribe_pocketcasts\r\n		|| data.subscribe_soundcloud || data.subscribe_stitcher || data.subscribe_rss ) { %>\r\n	<div class="spp-dss-row">\r\n		<div class="spp-dss-image-container">\r\n			<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-dss-image spp-subscribe-image" aria-labelledby="spp-svg-title-subscribe" role="img" viewBox="0 0 24 24">\n  <title id="spp-svg-title-subscribe">Subscribe</title>\n  <path id="RSS" d="M54,24A22,22,0,0,0,32,2V0A24,24,0,0,1,56,24H54ZM36,16a4,4,0,1,1-4,4A4,4,0,0,1,36,16Zm0,6a2,2,0,1,0-2-2A2,2,0,0,0,36,22ZM32,8A16,16,0,0,1,48,24H46A14,14,0,0,0,32,10V8Z" transform="translate(-32)"/>\n</svg>\n\r\n		</div>\r\n		<div class="spp-dss-subscribe-text">\r\n			<div class="spp-dss-subscribe-text-2">\r\n				<%="Subscribe".toLocaleString()%>\r\n			</div>\r\n			<div class="spp-dss-subscribe-icon-list">\r\n				<% if ( data.subscribe_itunes ) { %>\r\n					<div class="spp-subscribe-icon-container1">\r\n						<div class="spp-subscribe-icon-container">\r\n							<a href="<%= data.subscribe_itunes %>" target="_blank">\r\n								<img class="spp-subscribe-btn spp-itunes"\r\n										src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Subscribe via iTunes">\r\n							</a>\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if ( data.subscribe_buzzsprout ) { %>\r\n					<div class="spp-subscribe-icon-container1">\r\n						<div class="spp-subscribe-icon-container">\r\n							<a href="<%= data.subscribe_buzzsprout %>" target="_blank">\r\n								<img class="spp-subscribe-btn spp-buzzsprout"\r\n										src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Subscribe via Buzzsprout">\r\n							</a>\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if ( data.subscribe_googleplay ) { %>\r\n					<div class="spp-subscribe-icon-container1">\r\n						<div class="spp-subscribe-icon-container">\r\n							<a href="<%= data.subscribe_googleplay %>" target="_blank">\r\n								<img class="spp-subscribe-btn spp-googleplay"\r\n										src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Subscribe via Google Play">\r\n							</a>\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if ( data.subscribe_iheartradio ) { %>\r\n					<div class="spp-subscribe-icon-container1">\r\n						<div class="spp-subscribe-icon-container">\r\n							<a href="<%= data.subscribe_iheartradio %>" target="_blank">\r\n								<img class="spp-subscribe-btn spp-iheartradio"\r\n										src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Subscribe via iHeartRadio">\r\n							</a>\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if ( data.subscribe_pocketcasts ) { %>\r\n					<div class="spp-subscribe-icon-container1">\r\n						<div class="spp-subscribe-icon-container">\r\n							<a href="<%= data.subscribe_pocketcasts %>" target="_blank">\r\n								<img class="spp-subscribe-btn spp-pocketcasts"\r\n										src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Subscribe via PocketCasts">\r\n							</a>\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if ( data.subscribe_soundcloud ) { %>\r\n					<div class="spp-subscribe-icon-container1">\r\n						<div class="spp-subscribe-icon-container">\r\n							<a href="<%= data.subscribe_soundcloud %>" target="_blank">\r\n								<img class="spp-subscribe-btn spp-soundcloud"\r\n										src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Subscribe via Soundcloud">\r\n							</a>\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if ( data.subscribe_stitcher ) { %>\r\n					<div class="spp-subscribe-icon-container1">\r\n						<div class="spp-subscribe-icon-container">\r\n							<a href="<%= data.subscribe_stitcher %>" target="_blank">\r\n								<img class="spp-subscribe-btn spp-stitcher"\r\n										src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Subscribe via Stitcher">\r\n							</a>\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if ( data.subscribe_rss ) { %>\r\n					<div class="spp-subscribe-icon-container1">\r\n						<div class="spp-subscribe-icon-container">\r\n							<a href="<%= data.subscribe_rss %>" target="_blank">\r\n								<img class="spp-subscribe-btn spp-rss"\r\n										src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Subscribe via RSS">\r\n							</a>\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n			</div>\r\n		</div>\r\n	</div>\r\n<% } %>\r\n<% if ( data.social ) { %>\r\n	<div class="spp-dss-row">\r\n		<div class="spp-dss-image-container">\r\n			<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-dss-image spp-share-image" tabindex="0" aria-labelledby="spp-svg-title-share" role="img" width="24" height="24" viewBox="0 0 24 24">\n  <title id="spp-svg-title-share">Share</title>\n  <path id="Share" d="M84,8a3.975,3.975,0,0,1-2.946-1.314L71.9,11.12a3.767,3.767,0,0,1,0,1.761l9.158,4.434a4.027,4.027,0,1,1-.95,1.805l-9.158-4.434a4,4,0,1,1,0-5.371L80.1,4.88A4,4,0,1,1,84,8Zm0,14a2,2,0,0,0,0-4,1.978,1.978,0,0,0-.98.267,2.029,2.029,0,0,0-.724.7c-0.011.019-.02,0.039-0.031,0.058a1.966,1.966,0,0,0-.162.374c-0.012.038-.026,0.075-0.035,0.114A1.958,1.958,0,0,0,82,20a0.11,0.11,0,0,0,0,.014A2,2,0,0,0,84,22ZM69.9,11.4a1.967,1.967,0,0,0-.162-0.374c-0.011-.019-0.02-0.039-0.031-0.058a2.03,2.03,0,0,0-.724-0.7h0A1.978,1.978,0,0,0,68,10a2,2,0,0,0,0,4,1.975,1.975,0,0,0,.981-0.267,2.029,2.029,0,0,0,.716-0.689c0.016-.027.03-0.055,0.045-0.082a1.967,1.967,0,0,0,.149-0.343c0.015-.045.031-0.088,0.043-0.134a1.8,1.8,0,0,0,0-.975C69.923,11.471,69.909,11.434,69.9,11.4ZM84,2a2,2,0,0,0-2,1.984A0.12,0.12,0,0,0,82,4a1.958,1.958,0,0,0,.068.49c0.01,0.039.023,0.076,0.035,0.114a1.966,1.966,0,0,0,.162.374C82.276,5,82.285,5.016,82.3,5.035a2.03,2.03,0,0,0,.723.7A1.979,1.979,0,0,0,84,6,2,2,0,0,0,84,2Z" transform="translate(-64)"/>\n</svg>\n\r\n		</div>\r\n		<div class="spp-dss-share-text">\r\n			<div class="spp-dss-share-text-2">\r\n				<%="Share".toLocaleString()%>\r\n			</div>\r\n			<div class="spp-dss-share-icon-list">\r\n				<% if( data.social_twitter ) { %>\r\n					<div class="spp-share-icon-container1">\r\n						<div class="spp-share-icon-container">\r\n							<img class="spp-control spp-share-btn spp-twitter"\r\n									src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Twitter">\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if( data.social_facebook ) { %>\r\n					<div class="spp-share-icon-container1">\r\n						<div class="spp-share-icon-container">\r\n							<img class="spp-control spp-share-btn spp-facebook"\r\n									src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Facebook">\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if( data.social_linkedin ) { %>\r\n					<div class="spp-share-icon-container1">\r\n						<div class="spp-share-icon-container">\r\n							<img class="spp-control spp-share-btn spp-linked-in"\r\n									src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Linked In">\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if( data.social_gplus ) { %>\r\n					<div class="spp-share-icon-container1">\r\n						<div class="spp-share-icon-container">\r\n							<img class="spp-control spp-share-btn spp-google-plus"\r\n									src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Google Plus">\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if( data.social_pinterest ) { %>\r\n					<div class="spp-share-icon-container1">\r\n						<div class="spp-share-icon-container">\r\n							<img class="spp-control spp-share-btn spp-pinterest"\r\n									src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Pinterest">\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n				<% if( data.social_email ) { %>\r\n					<div class="spp-share-icon-container1">\r\n						<div class="spp-share-icon-container">\r\n							<a href="mailto:<%= data.email %>" target="_blank">\r\n								<img class="spp-share-btn spp-email"\r\n										src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share via email">\r\n							</a>\r\n						</div>\r\n					</div>\r\n				<% } %>\r\n			</div>\r\n		</div>\r\n	</div>\r\n<% } %>\r\n\r\n<iframe class="spp-downloader" style="display:none"></iframe>\r\n'
}),a("apps/smart-podcast-player/dss",["spp-app","text!templates/download-subscribe-share-template.html","entities/track-model","l10n","translations"],function(e,t){return e.module("Dss",function(e,i,s,n,r,a){e.DssLayout=n.Layout.extend({template:a.template(t),className:"spp-dss-layout",events:{"click    .spp-share-btn":"shareButtonClick","keypress .spp-share-btn":"shareButtonClick","click    .spp-button-download":"download","keypress .spp-button-download":"download","keypress .spp-download-image":"download","mouseenter .spp-dss-row":"showIcons","keypress .spp-dss-row":"toggleIcons","touchend .spp-dss-row":"showIcons","keyup .spp-dss-row":function(e){if(27==e.which){var t=this.$el.closest(".spp-player-layout");t.children(".blockUI").length>0&&(t.unblock(),t.find(".spp-more").first().find(".spp-control").focus())}}},onRender:function(){var e=this.model.get("data"),t=0;e.social_facebook&&t++,e.social_twitter&&t++,e.social_gplus&&t++,e.social_linkedin&&t++,e.social_pinterest&&t++,e.social_email&&t++;var i="14%";6==t?i="14%":5==t?i="17%":4==t?i="22%":3==t?i="22%":2==t?i="29%":1==t&&(i="45%"),this.$(".spp-share-icon-container1").cssExtended("max-width",i,AP_Player.importantStr),this.$(".spp-share-icon-container").cssExtended("max-width",i,AP_Player.importantStr);var s=0;e.subscribe_rss&&s++,e.subscribe_itunes&&s++,e.subscribe_stitcher&&s++,e.subscribe_soundcloud&&s++,e.subscribe_buzzsprout&&s++,e.subscribe_iheartradio&&s++,e.subscribe_googleplay&&s++,e.subscribe_pocketcasts&&s++;var i="8%";8==s?i="8%":7==s?i="11%":6==s?i="14%":5==s?i="17%":4==s?i="22%":3==s?i="22%":2==s?i="29%":1==s&&(i="45%"),this.$(".spp-subscribe-icon-container1").cssExtended("max-width",i,AP_Player.importantStr),this.$(".spp-subscribe-icon-container").cssExtended("max-width",i,AP_Player.importantStr)},showIcons:function(e){r(e.currentTarget).hasClass("spp-show-icons")||(this.$el.find(".spp-dss-row").removeClass("spp-show-icons"),r(e.currentTarget).addClass("spp-show-icons"),r(e.currentTarget).find(".spp-control").attr("tabindex","0"),e.preventDefault())},hideIcons:function(e){r(e.currentTarget).hasClass("spp-show-icons")&&(r(e.currentTarget).removeClass("spp-show-icons"),r(e.currentTarget).find(".spp-control").removeAttr("tabindex"),e.preventDefault())},toggleIcons:function(e){r(e.currentTarget).hasClass("spp-show-icons")?this.hideIcons(e):this.showIcons(e)},socialPopup:function(e){window.open(e,"pinterest","screenX=100,screenY=100,height=360,width=730")},shareButtonClick:function(e){var t,i=this,s=i.model.get("data"),n=r(e.currentTarget);if(t=s.permalink?s.permalink:window.location.href,n.hasClass("spp-facebook")&&this.socialPopup("http://www.facebook.com/sharer/sharer.php?m2w&s=100&p[url]="+encodeURIComponent(t)+"&p[images][0]=&p[title]="+encodeURIComponent(s.title)),n.hasClass("spp-twitter")){var a="https://twitter.com/intent/tweet?";if(a+=s.tweet_text?"text="+encodeURIComponent(s.tweet_text):"text="+encodeURIComponent(s.title),a+="&url="+encodeURIComponent(t),s.hashtag){a+="&hashtags=";for(var o=s.hashtag.split(","),l=0;l<o.length;l++)a+=encodeURIComponent(o[l].replace("#",""))+","}s.twitter_username&&(a+="&via="+encodeURIComponent(s.twitter_username.replace("@",""))),this.socialPopup(a)}n.hasClass("spp-linked-in")&&this.socialPopup("https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(t)+"&title="+encodeURIComponent(s.title)),n.hasClass("spp-google-plus")&&this.socialPopup("https://plus.google.com/share?url="+encodeURIComponent(t)),n.hasClass("spp-pinterest")&&this.socialPopup("https://pinterest.com/pin/create/button/?url="+encodeURIComponent(t)),n.hasClass("spp-stumble")&&this.socialPopup("http://www.stumbleupon.com/submit?url="+encodeURIComponent(t)+"&title="+encodeURIComponent(s.title))},elementsTabbable:function(e){e?(this.$el.find(".spp-button-downloada").removeAttr("tabindex"),this.$el.find(".spp-subscribe-image").attr("tabindex","0"),this.$el.find(".spp-share-image").attr("tabindex","0")):(this.$el.find(".spp-button-downloada").attr("tabindex","-1"),this.$el.find(".spp-subscribe-image").removeAttr("tabindex"),this.$el.find(".spp-share-image").removeAttr("tabindex"))},removeOutlines:function(){this.$el.find(".spp-control").each(function(){this.classList&&this.classList.add("spp-no-outline")})},focusFirstControl:function(){this.$el.find(".spp-subscribe-image").first().focus()},download:function(e){e.preventDefault();var t=this.model.get("data"),i=t.download_url,s=t.download_id;"https:"===location.protocol&&(i=i.replace(/^http:\/\//i,"https://"));var n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(n||"soundcloud"==t.method&&"http:"!==location.protocol){if("soundcloud"==t.method)var r=i.includes("?")?"&":"?",a=i+r+"consumer_key="+AP_Player.soundcloudConsumerKey;else var a=i;window.location=a}else{if("soundcloud"==t.method)var r=i.includes("?")?"&":"?",a=i+r+"consumer_key="+AP_Player.soundcloudConsumerKey;else var a=AP_Player.homeUrl+"/?spp_download="+s;this.$(".spp-downloader").prop("src",a)}}})}),e.Dss.DssLayout}),function(e){function t(){this===n.elem&&(n.pos=[-260,-260],n.elem=!1,r=3)}var i,s,n={pos:[-260,-260]},r=3,a=document,o=a.documentElement,l=a.body;e.event.special.mwheelIntent={setup:function(){var i=e(this).bind("mousewheel",e.event.special.mwheelIntent.handler);return this!==a&&this!==o&&this!==l&&i.bind("mouseleave",t),i=null,!0},teardown:function(){return e(this).unbind("mousewheel",e.event.special.mwheelIntent.handler).unbind("mouseleave",t),!0},handler:function(t){var a=[t.clientX,t.clientY];return this===n.elem||Math.abs(n.pos[0]-a[0])>r||Math.abs(n.pos[1]-a[1])>r?(n.elem=this,n.pos=a,r=250,clearTimeout(s),s=setTimeout(function(){r=10},200),clearTimeout(i),i=setTimeout(function(){r=3},1500),t=e.extend({},t,{type:"mwheelIntent"}),(e.event.dispatch||e.event.handle).apply(this,arguments)):void 0}},e.fn.extend({mwheelIntent:function(e){return e?this.bind("mwheelIntent",e):this.trigger("mwheelIntent")},unmwheelIntent:function(e){return this.unbind("mwheelIntent",e)}}),e(function(){l=a.body,e(a).bind("mwheelIntent.mwheelIntentDefault",e.noop)})}(jQuery),a("mwheel-intent",function(){}),function(e){"function"==typeof a&&a.amd?a("vendor/jquery.mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,o=l.call(arguments,1),p=0,d=0,c=0,u=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(c=-1*a.detail),"wheelDelta"in a&&(c=a.wheelDelta),"wheelDeltaY"in a&&(c=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*c,c=0),p=0===c?d:c,"deltaY"in a&&(c=-1*a.deltaY,p=c),"deltaX"in a&&(d=a.deltaX,0===c&&(p=-1*d)),0!==c||0!==d){if(1===a.deltaMode){var h=e.data(this,"mousewheel-line-height");p*=h,c*=h,d*=h}else if(2===a.deltaMode){var f=e.data(this,"mousewheel-page-height");p*=f,c*=f,d*=f}return u=Math.max(Math.abs(c),Math.abs(d)),(!r||r>u)&&(r=u,s(a,u)&&(r/=40)),s(a,u)&&(p/=40,d/=40,c/=40),p=Math[p>=1?"floor":"ceil"](p/r),d=Math[d>=1?"floor":"ceil"](d/r),c=Math[c>=1?"floor":"ceil"](c/r),t.deltaX=d,t.deltaY=c,t.deltaFactor=r,t.deltaMode=0,o.unshift(t,p,d,c),n&&clearTimeout(n),n=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,o)}}function i(){r=null}function s(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var n,r,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var p=a.length;p;)e.event.fixHooks[a[--p]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=o.length;i;)this.addEventListener(o[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),e(jQuery,this),a("vendor/jquery.jscrollpane",function(){}),a("apps/smart-podcast-player/episode-details",["spp-app","text!templates/episode-details-template.html","apps/smart-podcast-player/dss","entities/track-model","soundmanager2","vendor/jquery.jscrollpane","vendor/jquery.mousewheel","l10n","translations"],function(e,t){return e.module("EpisodeDetails",function(e,i,s,n,r,a){e.MainLayout=n.Layout.extend({template:a.template(t),className:"spp-episode-details-layout",regions:{dssRegion:".spp-dss-region"},events:{"click .spp-more-show-notes":function(){i.trigger("toggleEpisodeDetails",this.options.sppLayout,!0)},"keypress .spp-more-show-notes":function(){i.trigger("toggleEpisodeDetails",this.options.sppLayout,!1)}},initialize:function(){var e=this;r(window).on("resize",function(){e.$el.find(".spp-episode-details-body").data("jsp").reinitialise()})},onRender:function(){this.dssRegion.show(new i.Dss.DssLayout({model:this.model}));var e,t=this.options.sppLayout.$el.find(".spp-tabs"),s=this.$el.find(".spp-episode-details-header");"none"!=t.css("display")?(e=t.outerHeight(),e+=parseInt(t.find(".spp-tab-active").css("border-bottom"),10)):"none"!=s.css("display")&&(e=s.outerHeight());var n=this.options.sppLayout.$el.outerHeight()-e-this.$el.find(".spp-dss-layout").outerHeight()-parseInt(this.$el.find(".spp-episode-details-body").css("margin-top"),10)-parseInt(this.$el.find(".spp-episode-details-body").css("margin-bottom"),10),r=this.$el.find(".spp-episode-details-body");r.height(n),r.jScrollPane({contentWidth:"0px"}),this.elementsTabbable(!1)},elementsTabbable:function(e){e?(this.$el.find(".spp-episode-details-body").attr("tabindex","0"),this.$el.find(".spp-episode-details-body a").removeAttr("tabindex"),this.$el.find(".spp-more-show-notes").attr("tabindex","0")):(this.$el.find(".spp-episode-details-body").removeAttr("tabindex"),this.$el.find(".spp-episode-details-body a").attr("tabindex","-1"),this.$el.find(".spp-more-show-notes").removeAttr("tabindex")),this.dssRegion.currentView.elementsTabbable(e)}}),e.Controller={init:function(t){var s=i.request("track:featured",t);t.episodeDetailsRegion.show(new e.MainLayout({model:s,sppLayout:t}))}}}),e.on("previewTrack",function(e,t){var i=e.episodeDetailsRegion.currentView;i.model=t,i.dssRegion.currentView.model=t}),e.on("showEpisodeDetails",function(e,t){e.episodeDetailsRegion.$el.removeClass("spp-off-to-right"),e.episodeDetailsRegion.currentView.elementsTabbable(!0),t&&e.episodeDetailsRegion.$el.find(".spp-episode-details-body").addClass("spp-no-outline")}),e.on("hideEpisodeDetails",function(e){e.episodeDetailsRegion.$el.addClass("spp-off-to-right"),e.episodeDetailsRegion.currentView.elementsTabbable(!1)}),e.EpisodeDetails.Controller}),a("text!templates/podcast-track-template.html",[],function(){return'<div class="spp-track-row">\r\n	<div class="spp-episode">\r\n		<% if ( data.show_episode_numbers == true ) { %>\r\n			<div class="spp-number"><%= parseInt( data.episode_number, 10) %></div>\r\n		<% } else { %>\r\n			<div class="spp-play-hidden-numbers"></div>\r\n		<% } %>\r\n		<span class="spp-play">\r\n			<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-play spp-play-svg" tabindex="0" aria-labelledby="spp-svg-title-play" role="img" viewBox="0 0 20 26">\n  <title id="spp-svg-title-play">Play</title>\n  <path id="Play" d="M110.99,64.008l-20,13V51Z" transform="translate(-91 -51)"/>\n</svg>\n\r\n		</span>\r\n		<span class="spp-equalizer">\r\n			<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-eq-svg" width="14" height="16" viewBox="0 0 14 16">\n  <path id="EQ" d="M201,4h2V20h-2V4Zm4,4h2v8h-2V8Zm-8-2h2V18h-2V6Zm-4,4h2v4h-2V10Z" transform="translate(-193 -4)"/>\n</svg>\n\r\n		</span>\r\n	</div>\r\n	<div class="spp-track-title-container">\r\n		<div class="spp-track-title"><%= data.title_without_episode_number %></div>\r\n	</div>\r\n</div>'}),a("text!templates/playlist-template.html",[],function(){return'<div class="spp-playlist-header-region"></div>\r\n<div class="spp-playlist-scroller">\r\n	<div class="spp-playlist-tracks-region"></div>\r\n</div>\r\n<div class="spp-playlist-footer-region"></div>\r\n'}),a("text!templates/playlist-header-template.html",[],function(){return'<div class="spp-search-container">\r\n	<div class="spp-search-icon-container">\r\n		<svg xmlns="http://www.w3.org/2000/svg" width="16.531" height="16.531" viewBox="0 0 16.531 16.531">\n  <defs>\n    <style>\n      .cls-1 {\n        fill-rule: evenodd;\n      }\n    </style>\n  </defs>\n  <path id="Search" class="cls-1" d="M688.536,43.121l-1.415,1.414-4.8-4.8a6.541,6.541,0,1,1,1.415-1.414ZM678.5,30a4.5,4.5,0,1,0,4.5,4.5A4.5,4.5,0,0,0,678.5,30Z" transform="translate(-672 -28)"/>\n</svg>\n\r\n	</div>\r\n	<form>\r\n		<input type="Search" class="spp-search" aria-label="Search episodes" value="<%= data.searchTerm %>">\r\n	</form>\r\n</div>\r\n<div class="spp-sort-container">\r\n	<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-sort spp-sort-down" tabindex="0" aria-labelledby="spp-svg-title-sort-down" role="img" width="21" height="17" viewBox="0 0 21 17">\n  <title id="spp-svg-title-sort-down">Sort oldest first</title>\n  <path id="Sort_Down" d="M156,16.994l-4,5-4-5H151V5h2V16.994h3ZM135,11h13v2H135V11Zm0-6h13V7H135V5Zm10,14H135V17h10v2Z" transform="translate(-135 -5)"/>\n</svg>\n\r\n	<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-sort spp-sort-up" tabindex="0" aria-labelledby="spp-svg-title-sort-up" role="img" width="21" height="17" viewBox="0 0 21 17">\n  <title id="spp-svg-title-sort-up">Sort newest first</title>\n  <path id="Sort_Up" d="M185,9.006l-4-5-4,5H180V21h2V9.006h3ZM164,15h13V13H164v2Zm0,6h13V19H164v2ZM174,7H164V9h10V7Z" transform="translate(-164 -4)"/>\n</svg>\n\r\n</div>\r\n'}),a("text!templates/playlist-footer-template.html",[],function(){return'<div class="spp-playlist-pagination">\r\n	<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-playlist-prev-page" tabindex="0" aria-labelledby="spp-svg-title-page-back" role="img" width="22" height="16" viewBox="0 0 22 16">\n  <title id="spp-svg-title-page-back">Previous page</title>\n  <path id="Page_Back" d="M122.1,11.079H104.254l5.337-5.586a0.863,0.863,0,0,0,0-1.239,0.914,0.914,0,0,0-1.27,0L101,11.973l7.209,7.773a0.913,0.913,0,0,0,1.268,0,0.86,0.86,0,0,0,0-1.238L104.2,12.83H122.1A0.876,0.876,0,1,0,122.1,11.079Z" transform="translate(-101 -4)"/>\n</svg>\n\r\n	<span class="spp-current-page">\r\n		<%= current_page %>\r\n	</span>\r\n	<%="of".toLocaleString()%>\r\n	<span class="spp-num-pages">\r\n		<% if( typeof num_pages === "number" ) { %>\r\n			<%=num_pages%>\r\n		<% } else { %>\r\n			...\r\n		<% } %>\r\n	</span>\r\n	<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-playlist-next-page" tabindex="0" aria-labelledby="spp-svg-title-page-forward" role="img" width="22" height="16" viewBox="0 0 22 16">\n  <title id="spp-svg-title-page-forward">Next page</title>\n  <path id="Page_Forward" d="M122.1,11.079H104.254l5.337-5.586a0.863,0.863,0,0,0,0-1.239,0.914,0.914,0,0,0-1.27,0L101,11.973l7.209,7.773a0.913,0.913,0,0,0,1.268,0,0.86,0.86,0,0,0,0-1.238L104.2,12.83H122.1A0.876,0.876,0,1,0,122.1,11.079Z" transform="translate(-101 -4)"/>\n</svg>\n\r\n</div>\r\n'}),a("apps/smart-podcast-player/playlist",["spp-app","text!templates/podcast-track-template.html","text!templates/playlist-template.html","text!templates/playlist-header-template.html","text!templates/playlist-footer-template.html","entities/track-model","entities/playlist-model","vendor/jquery.jscrollpane","vendor/jquery.mousewheel","l10n","translations"],function(e,t,i,s,n){return e.module("Playlist",function(e,r,a,o,l,p){e.HeaderLayout=o.Layout.extend({template:p.template(s),className:"spp-playlist-header",elementsTabbable:function(e){e?(this.$el.find(".spp-search").removeAttr("tabindex"),this.$el.find(".spp-sort").attr("tabindex","0")):(this.$el.find(".spp-search").attr("tabindex","-1"),this.$el.find(".spp-sort").attr("tabindex","-1"))},onRender:function(){var e=/MSIE (\d+\.\d+);/.test(navigator.userAgent)||1==!!document.documentMode;e&&this.$(".spp-search-icon-container").cssExtended("top","40px",AP_Player.importantStr),this.enableDisableSort()},enableDisableSort:function(){var e=/MSIE (\d+\.\d+);/.test(navigator.userAgent)||1==!!document.documentMode;e||(this.model.get("data").playlistMainLayout.model.isMoreTracksComing()?this.$(".spp-sort")[0].classList.add("spp-disabled"):this.$(".spp-sort")[0].classList.remove("spp-disabled"))}}),e.FooterLayout=o.Layout.extend({template:p.template(n),className:"spp-playlist-footer",onRender:function(){if(this.enableDisableArrows(),"unknown"===this.model.get("num_pages")){var e=0,t=this;this.loading_timer=setInterval(function(){e++;var i;i=e%3==0?".&nbsp;&nbsp;":e%3==1?"..&nbsp;":"...",t.$el.find(".spp-num-pages").html(i)},400)}},modelEvents:{"change:current_page":"textChanged","change:num_pages":"textChanged"},textChanged:function(){this.$el.find(".spp-current-page").text(this.model.get("current_page"));var e=this.model.get("num_pages");"unknown"!==e&&(this.$el.find(".spp-num-pages").text(e),void 0!==this.loading_timer&&clearInterval(this.loading_timer)),this.enableDisableArrows()},enableDisableArrows:function(){if("undefined"!=typeof this.$(".spp-playlist-prev-page")[0].classList){var e=this.model.get("current_page"),t=this.model.get("num_pages"),i="unknown"===t;i||1==e?(this.$(".spp-playlist-prev-page")[0].classList.add("spp-disabled"),this.$(".spp-playlist-prev-page").attr("tabindex","-1")):(this.$(".spp-playlist-prev-page")[0].classList.remove("spp-disabled"),this.$(".spp-playlist-prev-page").attr("tabindex","0")),i||e==t?(this.$(".spp-playlist-next-page")[0].classList.add("spp-disabled"),this.$(".spp-playlist-next-page").attr("tabindex","-1")):(this.$(".spp-playlist-next-page")[0].classList.remove("spp-disabled"),this.$(".spp-playlist-next-page").attr("tabindex","0"))}},elementsTabbable:function(e){if(e){var t=this.model.get("current_page");t>1&&this.$(".spp-playlist-prev-page").attr("tabindex","0"),t<this.model.get("num_pages")&&this.$(".spp-playlist-next-page").attr("tabindex","0")}else this.$(".spp-playlist-prev-page").attr("tabindex","-1"),this.$(".spp-playlist-next-page").attr("tabindex","-1")}}),e.TrackView=o.ItemView.extend({template:p.template(t),className:"spp-track",modelEvents:{change:"render"},triggers:{"click .spp-track-row":"track:play","focus .spp-track-row":"track:focus"},events:{"keydown .spp-track-row":function(e){13==e.which?this.triggerMethod("track:play"):(38==e.which||40==e.which)&&this.triggerMethod("keydown",e)}},onRender:function(){var e=this.model.get("data"),t="track_"+this.model.cid;e.active===!0&&this.$el.addClass("active"),this.$el.find(".spp-track-row").attr("tabindex","0"),this.$el.attr("data-tid",t)}}),e.TrackPageView=o.CollectionView.extend({itemView:e.TrackView,className:"spp-track-list",onItemviewTrackPlay:function(e){var t=r.request("currentTrack",this.options.sppLayout),i=t.get("speed"),s=e.model;t.set("isPlaying",!1),r.trigger("previewTrack",this.options.sppLayout,s),s.set("isPlaying",!0),s.set("speed",i)},onItemviewTrackFocus:function(e){this.children.each(function(e){e.$el.find(".spp-track-row").attr("tabindex","-1")}),e.$el.find(".spp-track-row").attr("tabindex","0")},onItemviewKeydown:function(e,t){var i,s=this.collection.indexOf(e.model);if(38==t.which&&s>0)i=s-1,t.preventDefault();else{if(!(40==t.which&&s<this.collection.length-1))return;i=s+1,t.preventDefault()}this.$el.find(".spp-track-row").attr("tabindex","-1");var n=this.children.findByIndex(i).$el.find(".spp-track-row");n.attr("tabindex","0"),n.focus()},elementsTabbable:function(e){e?this.$el.find(".spp-track-row").attr("tabindex","0"):this.$el.find(".spp-track-row").attr("tabindex","-1")}}),e.MainLayout=o.Layout.extend({template:p.template(i),className:"spp-playlist",regions:{headerRegion:".spp-playlist-header-region",tracksRegion:".spp-playlist-tracks-region",footerRegion:".spp-playlist-footer-region"},triggers:{"click    .spp-sort":"playlist:sort","keypress .spp-sort-container":"playlist:sort","click    .spp-playlist-prev-page":"paging:prev","keypress .spp-playlist-prev-page":"paging:prev","click    .spp-playlist-next-page":"paging:next","keypress .spp-playlist-next-page":"paging:next"},events:{"click .spp-search":function(){var e=this.$el.find(".spp-search");e.val().toLowerCase()=="Search".toLocaleString().toLowerCase()&&e.val("")},"input .spp-search":"searchInput","keypress .spp-search":"searchKeypress"},initialize:function(){var e=this;l(window).on("resize",function(){e.$el.find(".spp-playlist-scroller").data("jsp").reinitialise()})},onRender:function(){var t,i=this.options.sppLayout.model.get("options"),s=this.model.getNumTracks(),n=this.model.getCurrentPage();t=this.model.isMoreTracksComing()?"unknown":Math.ceil(s/i.tracks_per_page);var r=this;this.headerRegion.show(new e.HeaderLayout({model:new a.Model({data:{playlistMainLayout:r,searchTerm:this.searchTerm?this.searchTerm:"Search".toLocaleString()}})})),this.footerRegion.show(new e.FooterLayout({model:new a.Model({current_page:n,num_pages:t,sppLayout:this.options.sppLayout})})),this.tracksRegion.show(new e.TrackPageView({collection:this.model.getPageOfTracks(),sppLayout:this.options.sppLayout}))},onShow:function(){var e,t=this.options.sppLayout.$el.find(".spp-tabs");if("none"!=t.css("display")){e=t.outerHeight();var i=parseInt(t.find(".spp-tab-active").css("border-bottom"),10);isNaN(i)&&(i=3),e+=i}else e=0;var s=this.options.sppLayout.$el.outerHeight()-e-this.headerRegion.currentView.$el.outerHeight()-this.footerRegion.currentView.$el.outerHeight();this.$el.find(".spp-playlist-scroller").height(s),this.$el.find(".spp-playlist-scroller").jScrollPane({enableKeyboardNavigation:!1,contentWidth:"0px"})},onPlaylistSort:function(){if(!this.model.isMoreTracksComing()){this.$el.toggleClass("spp-sort-reverse"),this.model.reverseSortOrder();{this.model.setCurrentPage(1)}this.tracksRegion.currentView.collection=this.model.getPageOfTracks(),this.tracksRegion.currentView.render(),this.footerRegion.currentView.model.set("current_page",this.model.getCurrentPage())}},onPagingPrev:function(){this.model.getCurrentPage()>1&&(this.model.setCurrentPage(this.model.getCurrentPage()-1),this.tracksRegion.currentView.collection=this.model.getPageOfTracks(),this.tracksRegion.currentView.render(),this.footerRegion.currentView.model.set("current_page",this.model.getCurrentPage()),this.$el.find(".spp-playlist-scroller").data("jsp").reinitialise())},onPagingNext:function(){var e=this.options.sppLayout.model.get("options"),t=Math.ceil(this.model.getNumTracks()/e.tracks_per_page);this.model.getCurrentPage()<t&&(this.model.setCurrentPage(this.model.getCurrentPage()+1),this.tracksRegion.currentView.collection=this.model.getPageOfTracks(),this.tracksRegion.currentView.render(),this.footerRegion.currentView.model.set("current_page",this.model.getCurrentPage()),this.$el.find(".spp-playlist-scroller").data("jsp").reinitialise())},searchInput:function(){r.options.searchWhileTyping&&this.searchTracks()},searchKeypress:function(e){13==e.which&&(r.options.searchWhileTyping||this.searchTracks(),e.preventDefault())},searchTracks:function(){this.searchTerm=this.$el.find(".spp-search").val(),this.model.searchTracks(this.searchTerm);var e=this.options.sppLayout.model.get("options"),t=this.model.getNumTracks(),i=Math.ceil(t/e.tracks_per_page);this.footerRegion.currentView.model.set("current_page",1),this.footerRegion.currentView.model.set("num_pages",i),this.model.setCurrentPage(1),this.tracksRegion.currentView.collection=this.model.getPageOfTracks(),this.tracksRegion.currentView.render(),this.$el.find(".spp-search").focus().val("").val(this.searchTerm)},elementsTabbable:function(e){this.headerRegion.currentView.elementsTabbable(e),this.footerRegion.currentView.elementsTabbable(e),this.tracksRegion.currentView.elementsTabbable(e)}}),e.Controller={init:function(t){var i=r.request("tracks:get",t),s=new e.MainLayout({model:i,sppLayout:t});t.playlistRegion.show(s)}}}),e.on("changeEpisodePlaying",function(e,t){var i=e.mainRegion.currentView;if(i){var s=i.model.get("isPlaying"),n=e.playlistRegion.currentView.tracksRegion.currentView;n.children.each(function(e){e.model==t&&s?e.$el.addClass("spp-playing"):e.$el.removeClass("spp-playing")})}}),e.on("showEpisodeDetails",function(e){e.playlistRegion.currentView.elementsTabbable(!1)}),e.on("hideEpisodeDetails",function(e){e.playlistRegion.currentView.elementsTabbable(!0)}),e.on("tracksAdded",function(t){var i=t.playlistRegion.currentView,s=t.model.get("options"),n=e.request("tracks:get",t);i.model=n;var r=i.model.getNumTracks(),a=Math.ceil(r/s.tracks_per_page);i.footerRegion.currentView.model.set("num_pages",a),i.headerRegion.currentView.enableDisableSort()}),e.Playlist.Controller}),a("text!templates/main-template.html",[],function(){return'<div class="spp-top-matter">\r\n	<div class="spp-show-logo">\r\n		<% if ( data.show_logo != undefined && data.show_logo != null && data.show_logo != "" ) { %>\r\n			<img src="<%= data.show_logo %>" alt="<%= data.show_name %>" />\r\n		<% } %>\r\n	</div>\r\n\r\n	<div class="spp-artist-and-title">\r\n		<p class="spp-show-title"><%= data.show_name %><span class="spp-show-count"></span></p>\r\n		<p class="spp-track-title"><%= data.title %></p>\r\n	</div>\r\n</div>\r\n\r\n<div class="spp-main-separator"></div>\r\n\r\n<div class="spp-truncated-show-notes">\r\n	<%= data.truncated_show_notes %>\r\n	<span class="spp-control spp-more-show-notes" tabindex="0"><u><%="more".toLocaleString()%></u></span>\r\n</div>\r\n\r\n<ul class="spp-tag-list"></ul>\r\n\r\n<div class="spp-controls">\r\n	<div class="spp-speed">\r\n	<% if ( data.paid == true ) { %>\r\n		<% if ( data.speedcontrol == true ) { %>\r\n			<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-half" tabindex="0" aria-labelledby="spp-svg-title-half-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-half-speed">Speed: 50%</title>\n  <path id="_.5X" data-name=".5X"d="M32,112A16,16,0,1,1,4.21,101.21l2.121,2.121A12.995,12.995,0,1,0,17,99.051V104H14V96h3v0.05A15.987,15.987,0,0,1,32,112ZM8.058,117.211a0.65,0.65,0,0,0,.5.182,0.669,0.669,0,0,0,.508-0.182,0.628,0.628,0,0,0,.173-0.451,0.665,0.665,0,0,0-.173-0.469A0.657,0.657,0,0,0,8.56,116.1a0.638,0.638,0,0,0-.5.187,0.678,0.678,0,0,0-.167.469A0.64,0.64,0,0,0,8.058,117.211Zm3.832-3.937,0.288-.235a1.792,1.792,0,0,1,1.115-.31,1.587,1.587,0,0,1,1.241.518A1.978,1.978,0,0,1,15,114.621a2.154,2.154,0,0,1-.431,1.424,1.466,1.466,0,0,1-1.188.516,1.626,1.626,0,0,1-1.115-.372,1.722,1.722,0,0,1-.522-1.1H10.716a2.5,2.5,0,0,0,.816,1.734,2.7,2.7,0,0,0,1.849.627,2.6,2.6,0,0,0,1.992-.758,2.914,2.914,0,0,0,.713-2.078,3.018,3.018,0,0,0-.687-2.083,2.361,2.361,0,0,0-1.854-.77,2.761,2.761,0,0,0-1.426.369l0.258-2.326h3.457v-1H11.456l-0.434,4.254Zm6.763-4.477h-1.32l2.705,4.23-2.77,4.3H18.6L20.713,114l2.1,3.328h1.338l-2.764-4.3,2.7-4.23H22.761l-2.048,3.269Z" transform="translate(0 -96)"/>\n</svg>\n\r\n			<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-one" tabindex="0" aria-labelledby="spp-svg-title-normal-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-normal-speed">Speed: Normal</title>\n  <path id="_1X" data-name="1X" d="M72,112a16,16,0,1,1-27.79-10.79l2.121,2.121A12.995,12.995,0,1,0,57,99.051V104H54V96h3v0.05A15.987,15.987,0,0,1,72,112Zm-19.737-3h-0.17l-3.11,1.166v0.984l2.189-.8v7.224h1.092V109Zm4.431,0.041H55.373l2.705,4.231-2.77,4.3h1.332l2.113-3.328,2.1,3.328h1.338l-2.764-4.3,2.7-4.231H60.8l-2.048,3.27Z" transform="translate(-40 -96)"/>\n</svg>\n\r\n			<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-onehalf" tabindex="0" aria-labelledby="spp-svg-title-1p5-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-1p5-speed">Speed: 150%</title>\n  <path id="_1.5X" data-name="1.5X" d="M112,112a16,16,0,1,1-27.79-10.79l2.121,2.121A12.995,12.995,0,1,0,97,99.051V104H94V96h3v0.05A15.988,15.988,0,0,1,112,112Zm-22.284-2.254H89.589l-2.333.874v0.739l1.642-.6v5.418h0.819v-6.429Zm2.218,6.341a0.486,0.486,0,0,0,.376.136,0.5,0.5,0,0,0,.381-0.136,0.471,0.471,0,0,0,.13-0.338,0.5,0.5,0,0,0-.13-0.352,0.491,0.491,0,0,0-.381-0.14,0.477,0.477,0,0,0-.376.14,0.51,0.51,0,0,0-.125.352A0.48,0.48,0,0,0,91.935,116.087Zm3.107-2.953,0.216-.176a1.346,1.346,0,0,1,.836-0.233,1.192,1.192,0,0,1,.931.389,1.483,1.483,0,0,1,.35,1.031,1.616,1.616,0,0,1-.323,1.068,1.1,1.1,0,0,1-.891.386,1.219,1.219,0,0,1-.836-0.279,1.29,1.29,0,0,1-.392-0.828h-0.77a1.877,1.877,0,0,0,.612,1.3,2.03,2.03,0,0,0,1.386.47,1.952,1.952,0,0,0,1.494-.569,2.186,2.186,0,0,0,.535-1.558,2.262,2.262,0,0,0-.515-1.562A1.767,1.767,0,0,0,96.283,112a2.067,2.067,0,0,0-1.07.277l0.194-1.745H98v-0.751H94.716l-0.326,3.19Zm5.014-3.357h-0.99l2.029,3.172-2.078,3.226h1l1.585-2.5,1.575,2.5h1l-2.073-3.226,2.024-3.172h-0.994l-1.536,2.452Z" transform="translate(-80 -96)"/>\n</svg>\n\r\n			<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-two" tabindex="0" aria-labelledby="spp-svg-title-double-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-double-speed">Speed: Double</title>\n  <path id="_2X" data-name="2X" d="M152,112a16,16,0,1,1-27.79-10.79l2.121,2.121A12.995,12.995,0,1,0,137,99.051V104h-3V96h3v0.05A15.988,15.988,0,0,1,152,112Zm-17.334,4.43h-4.29l2.289-2.478a4.877,4.877,0,0,0,1.608-3,2.125,2.125,0,0,0-.693-1.661,2.707,2.707,0,0,0-1.883-.624,2.823,2.823,0,0,0-2.034.726,2.514,2.514,0,0,0-.76,1.905h1.086a1.759,1.759,0,0,1,.449-1.281,1.681,1.681,0,0,1,1.259-.46,1.417,1.417,0,0,1,1.079.428,1.529,1.529,0,0,1,.405,1.1,2.021,2.021,0,0,1-.249.964,7.034,7.034,0,0,1-.907,1.21l-2.957,3.281v0.779h5.6V116.43Zm2.953-7.646H136.3l2.7,4.23-2.77,4.3h1.332l2.113-3.328,2.1,3.328h1.338l-2.764-4.3,2.7-4.23h-1.326l-2.048,3.269Z" transform="translate(-120 -96)"/>\n</svg>\n\r\n			<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-three" tabindex="0" aria-labelledby="spp-svg-title-triple-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-triple-speed">Speed: Triple</title>\n  <path id="_3X" data-name="3X" d="M192,112a16,16,0,1,1-27.79-10.79l2.121,2.121A12.995,12.995,0,1,0,177,99.051V104h-3V96h3v0.05A15.988,15.988,0,0,1,192,112Zm-21.289,1.662h0.816a1.994,1.994,0,0,1,1.32.41,1.432,1.432,0,0,1,.458,1.143,1.577,1.577,0,0,1-.417,1.177,1.639,1.639,0,0,1-1.2.41,1.671,1.671,0,0,1-1.179-.4,1.39,1.39,0,0,1-.44-1.078h-1.092a2.159,2.159,0,0,0,.754,1.717,2.893,2.893,0,0,0,1.957.65,2.815,2.815,0,0,0,1.955-.674,2.327,2.327,0,0,0,.751-1.822,2.045,2.045,0,0,0-.385-1.26,2.106,2.106,0,0,0-1.088-.738,2.182,2.182,0,0,0,.983-0.779,1.876,1.876,0,0,0,.361-1.078,2.306,2.306,0,0,0-.687-1.776,3.059,3.059,0,0,0-3.782.033,2.173,2.173,0,0,0-.743,1.684h1.086a1.4,1.4,0,0,1,.42-1.063,1.555,1.555,0,0,1,1.124-.4,1.324,1.324,0,0,1,1.5,1.5,1.351,1.351,0,0,1-.44,1.061,1.8,1.8,0,0,1-1.209.4h-0.816v0.885Zm6.372-4.623h-1.32l2.7,4.23-2.77,4.3h1.332l2.113-3.328,2.1,3.328h1.338l-2.764-4.3,2.7-4.23h-1.326l-2.048,3.269Z" transform="translate(-160 -96)"/>\n</svg>\n\r\n		<% } %>\r\n	<% } %>\r\n	</div>\r\n	<div class="spp-step-back">\r\n		<svg xmlns="http://www.w3.org/2000/svg" class="spp-control" tabindex="0" aria-labelledby="spp-svg-title-back-15" role="img" viewBox="0 0 76.344 44">\n  <title id="spp-svg-title-back-15">Back 15 seconds</title>\n  <path id="RW_15" d="M36.645,62.008H36.318L31,64.289v1.927l3.566-1.571V78.784h2.074V62.008Zm7.418,8.841,0.548-.539a2.444,2.444,0,0,1,1.643-.528,2.284,2.284,0,0,1,1.963,1.032,4.533,4.533,0,0,1,.728,2.672,4.978,4.978,0,0,1-.676,2.769,2.129,2.129,0,0,1-1.876,1.026,2.208,2.208,0,0,1-1.719-.728,3.854,3.854,0,0,1-.833-2.161H41.907a5.286,5.286,0,0,0,1.375,3.394,4.573,4.573,0,0,0,6.485-.252A6.182,6.182,0,0,0,51,73.463a6.653,6.653,0,0,0-1.13-4.071,3.669,3.669,0,0,0-3.111-1.514,3.908,3.908,0,0,0-2.261.722l0.4-4.552h5.64V62.088H43.153l-0.734,8.325ZM75,73A33,33,0,0,0,9,73h4.67l-6,8-6-8H6a36,36,0,0,1,72,0H75Z" transform="translate(-1.656 -37)"/>\n</svg>\n\r\n	</div>\r\n	<div class="spp-play-pause-circle">\r\n		<div class="spp-play-invisisquare">\r\n			<div class="spp-control spp-play" aria-label="Play" tabindex="0">\r\n				<div class="spp-play-bar spp-play-bar-left"></div>\r\n				<div class="spp-play-bar spp-play-bar-right"></div>\r\n				<div class="spp-play-mask spp-play-mask-top"></div>\r\n				<div class="spp-play-mask spp-play-mask-bottom"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="spp-step-forward">\r\n		<svg xmlns="http://www.w3.org/2000/svg" class="spp-control" tabindex="0" aria-labelledby="spp-svg-title-forward-60" role="img" viewBox="0 0 76.344 44">\n  <title id="spp-svg-title-forward-60">Forward 60 seconds</title>\n  <path id="FF-60" d="M185.75,62.229a6.816,6.816,0,0,0-3.714,1.017,6,6,0,0,0-2.261,3.006,15.677,15.677,0,0,0-.768,5.432V72.49a7.977,7.977,0,0,0,1.276,4.739,3.949,3.949,0,0,0,3.365,1.784,4.057,4.057,0,0,0,3.313-1.511,6.32,6.32,0,0,0,1.234-4.114,6.47,6.47,0,0,0-1.116-3.949,3.561,3.561,0,0,0-3.017-1.506,3.631,3.631,0,0,0-2.929,1.386,6.42,6.42,0,0,1,1.358-3.949,4.31,4.31,0,0,1,3.271-1.358H186.1V62.229H185.75Zm-0.271,8.517a5.133,5.133,0,0,1,.661,2.744,5.06,5.06,0,0,1-.661,2.744,2.063,2.063,0,0,1-1.831,1.04,2.121,2.121,0,0,1-1.812-1.267,6.448,6.448,0,0,1-.739-3.278V71.9a3.519,3.519,0,0,1,1.04-1.591,2.347,2.347,0,0,1,1.57-.625A2.01,2.01,0,0,1,185.479,70.746Zm15.53-1.915a9.746,9.746,0,0,0-1.175-5.125,4.313,4.313,0,0,0-6.92.091,10.389,10.389,0,0,0-1.116,5.409v2.841a9.939,9.939,0,0,0,1.18,5.227A4.261,4.261,0,0,0,199.9,77.2a10.684,10.684,0,0,0,1.11-5.472v-2.9Zm-2.09,3.443a9.267,9.267,0,0,1-.626,3.784,1.977,1.977,0,0,1-1.878,1.239,2.027,2.027,0,0,1-1.913-1.312,9.5,9.5,0,0,1-.626-3.926V68.649a8.876,8.876,0,0,1,.626-3.687,1.984,1.984,0,0,1,1.889-1.222,2.008,2.008,0,0,1,1.925,1.244,9.341,9.341,0,0,1,.6,3.869v3.42ZM157,73a33,33,0,0,1,66,0h-4.67l6,8,6-8H226a36,36,0,0,0-72,0h3Z" transform="translate(-154 -37)"/>\n</svg>\n\r\n	</div>\r\n	<div class="spp-more">\r\n		<svg xmlns="http://www.w3.org/2000/svg" class="spp-control" tabindex="0" aria-labelledby="spp-svg-title-more" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-more">More</title>\n  <path id="More" d="M216,128a16,16,0,1,1,16-16A16,16,0,0,1,216,128Zm0-29a13,13,0,1,0,13,13A13,13,0,0,0,216,99Zm6,15a2,2,0,1,1,2-2A2,2,0,0,1,222,114Zm-6,0a2,2,0,1,1,2-2A2,2,0,0,1,216,114Zm-6,0a2,2,0,1,1,2-2A2,2,0,0,1,210,114Z" transform="translate(-200 -96)"/>\n</svg>\n\r\n	</div>\r\n</div>\r\n\r\n<div class="spp-progress-bar">\r\n	<div class="spp-progress-played"></div>\r\n	<div class="spp-position"></div>\r\n	<div class="spp-time-elapsed"></div>\r\n	<div class="spp-time-remaining"></div>\r\n	<div class="spp-seek-time"></div>\r\n</div>\r\n'
}),function(){function e(e){function t(t,s){var r,g,m=t==window,v=s&&void 0!==s.message?s.message:void 0;if(s=e.extend({},e.blockUI.defaults,s||{}),!s.ignoreIfBlocked||!e(t).data("blockUI.isBlocked")){if(s.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,s.overlayCSS||{}),r=e.extend({},e.blockUI.defaults.css,s.css||{}),s.onOverlayClick&&(s.overlayCSS.cursor="pointer"),g=e.extend({},e.blockUI.defaults.themedCSS,s.themedCSS||{}),v=void 0===v?s.message:v,m&&h&&i(window,{fadeOut:0}),v&&"string"!=typeof v&&(v.parentNode||v.jquery)){var y=v.jquery?v[0]:v,b={};e(t).data("blockUI.history",b),b.el=y,b.parent=y.parentNode,b.display=y.style.display,b.position=y.style.position,b.parent&&b.parent.removeChild(y)}e(t).data("blockUI.onUnblock",s.onUnblock);var w,_,k,x,P=s.baseZ;w=e(d||s.forceIframe?'<iframe class="blockUI" style="z-index:'+P++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+s.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),_=e(s.theme?'<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+P++ +';display:none"></div>':'<div class="blockUI blockOverlay" style="z-index:'+P++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),s.theme&&m?(x='<div class="blockUI '+s.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(P+10)+';display:none;position:fixed">',s.title&&(x+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(s.title||"&nbsp;")+"</div>"),x+='<div class="ui-widget-content ui-dialog-content"></div>',x+="</div>"):s.theme?(x='<div class="blockUI '+s.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(P+10)+';display:none;position:absolute">',s.title&&(x+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(s.title||"&nbsp;")+"</div>"),x+='<div class="ui-widget-content ui-dialog-content"></div>',x+="</div>"):x=m?'<div class="blockUI '+s.blockMsgClass+' blockPage" style="z-index:'+(P+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+s.blockMsgClass+' blockElement" style="z-index:'+(P+10)+';display:none;position:absolute"></div>',k=e(x),v&&(s.theme?(k.css(g),k.addClass("ui-widget-content")):k.css(r)),s.theme||_.css(s.overlayCSS),_.css("position",m?"fixed":"absolute"),(d||s.forceIframe)&&w.css("opacity",0);var M=[w,_,k],C=e(m?"body":t);e.each(M,function(){this.appendTo(C)}),s.theme&&s.draggable&&e.fn.draggable&&k.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var S=u&&(!e.support.boxModel||e("object,embed",m?null:t).length>0);if(c||S){if(m&&s.allowBodyStretch&&e.support.boxModel&&e("html,body").css("height","100%"),(c||!e.support.boxModel)&&!m)var T=l(t,"borderTopWidth"),A=l(t,"borderLeftWidth"),E=T?"(0 - "+T+")":0,I=A?"(0 - "+A+")":0;e.each(M,function(e,t){var i=t[0].style;if(i.position="absolute",2>e)m?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+s.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),m?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),I&&i.setExpression("left",I),E&&i.setExpression("top",E);else if(s.centerY)m&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0;else if(!s.centerY&&m){var n=s.css&&s.css.top?parseInt(s.css.top,10):0,r="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+n+') + "px"';i.setExpression("top",r)}})}if(v&&(s.theme?k.find(".ui-widget-content").append(v):k.append(v),(v.jquery||v.nodeType)&&e(v).show()),(d||s.forceIframe)&&s.showOverlay&&w.show(),s.fadeIn){var O=s.onBlock?s.onBlock:p,L=s.showOverlay&&!v?O:p,R=v?O:p;s.showOverlay&&_._fadeIn(s.fadeIn,L),v&&k._fadeIn(s.fadeIn,R)}else s.showOverlay&&_.show(),v&&k.show(),s.onBlock&&s.onBlock.bind(k)();if(n(1,t,s),m?(h=k[0],f=e(s.focusableElements,h),s.focusInput&&setTimeout(a,20)):o(k[0],s.centerX,s.centerY),s.timeout){var $=setTimeout(function(){m?e.unblockUI(s):e(t).unblock(s)},s.timeout);e(t).data("blockUI.timeout",$)}}}function i(t,i){var r,a=t==window,o=e(t),l=o.data("blockUI.history"),p=o.data("blockUI.timeout");p&&(clearTimeout(p),o.removeData("blockUI.timeout")),i=e.extend({},e.blockUI.defaults,i||{}),n(0,t,i),null===i.onUnblock&&(i.onUnblock=o.data("blockUI.onUnblock"),o.removeData("blockUI.onUnblock"));var d;d=a?e("body").children().filter(".blockUI").add("body > .blockUI"):o.find(">.blockUI"),i.cursorReset&&(d.length>1&&(d[1].style.cursor=i.cursorReset),d.length>2&&(d[2].style.cursor=i.cursorReset)),a&&(h=f=null),i.fadeOut?(r=d.length,d.stop().fadeOut(i.fadeOut,function(){0===--r&&s(d,l,i,t)})):s(d,l,i,t)}function s(t,i,s,n){var r=e(n);if(!r.data("blockUI.isBlocked")){t.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.el.style.cursor="default",i.parent&&i.parent.appendChild(i.el),r.removeData("blockUI.history")),r.data("blockUI.static")&&r.css("position","static"),"function"==typeof s.onUnblock&&s.onUnblock(n,s);var a=e(document.body),o=a.width(),l=a[0].style.width;a.width(o-1).width(o),a[0].style.width=l}}function n(t,i,s){var n=i==window,a=e(i);if((t||(!n||h)&&(n||a.data("blockUI.isBlocked")))&&(a.data("blockUI.isBlocked",t),s.bindEvents&&(!t||s.showOverlay))){var o="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";t?e(document).bind(o,s,r):e(document).unbind(o,r)}}function r(t){if("keydown"===t.type&&t.keyCode&&9==t.keyCode&&h&&t.data.constrainTabKey){var i=f,s=!t.shiftKey&&t.target===i[i.length-1],n=t.shiftKey&&t.target===i[0];if(s||n)return setTimeout(function(){a(n)},10),!1}var r=t.data,o=e(t.target);return o.hasClass("blockOverlay")&&r.onOverlayClick&&r.onOverlayClick(t),o.parents("div."+r.blockMsgClass).length>0?!0:0===o.parents().children().filter("div.blockUI").length}function a(e){if(f){var t=f[e===!0?f.length-1:0];t&&t.focus()}}function o(e,t,i){var s=e.parentNode,n=e.style,r=(s.offsetWidth-e.offsetWidth)/2-l(s,"borderLeftWidth"),a=(s.offsetHeight-e.offsetHeight)/2-l(s,"borderTopWidth");t&&(n.left=r>0?r+"px":"0"),i&&(n.top=a>0?a+"px":"0")}function l(t,i){return parseInt(e.css(t,i),10)||0}e.fn._fadeIn=e.fn.fadeIn;var p=e.noop||function(){},d=/MSIE/.test(navigator.userAgent),c=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),u=(document.documentMode||0,e.isFunction(document.createElement("div").style.setExpression));e.blockUI=function(e){t(window,e)},e.unblockUI=function(e){i(window,e)},e.growlUI=function(t,i,s,n){var r=e('<div class="growlUI"></div>');t&&r.append("<h1>"+t+"</h1>"),i&&r.append("<h2>"+i+"</h2>"),void 0===s&&(s=3e3);var a=function(t){t=t||{},e.blockUI({message:r,fadeIn:"undefined"!=typeof t.fadeIn?t.fadeIn:700,fadeOut:"undefined"!=typeof t.fadeOut?t.fadeOut:1e3,timeout:"undefined"!=typeof t.timeout?t.timeout:s,centerY:!1,showOverlay:!1,onUnblock:n,css:e.blockUI.defaults.growlCSS})};a();r.css("opacity");r.mouseover(function(){a({fadeIn:0,timeout:3e4});var t=e(".blockMsg");t.stop(),t.fadeTo(300,1)}).mouseout(function(){e(".blockMsg").fadeOut(1e3)})},e.fn.block=function(i){if(this[0]===window)return e.blockUI(i),this;var s=e.extend({},e.blockUI.defaults,i||{});return this.each(function(){var t=e(this);s.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){"static"==e.css(this,"position")&&(this.style.position="relative",e(this).data("blockUI.static",!0)),this.style.zoom=1,t(this,i)})},e.fn.unblock=function(t){return this[0]===window?(e.unblockUI(t),this):this.each(function(){i(this,t)})},e.blockUI.version=2.7,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var h=null,f=[]}"function"==typeof a&&a.amd&&a.amd.jQuery?a("blockUI",["jquery"],e):e(jQuery)}(),a("apps/smart-podcast-player/player-view",["spp-app","text!templates/main-template.html","apps/smart-podcast-player/dss","blockUI","l10n","translations"],function(e,t){return e.module("Player",function(e,s,n,r,a,o){e.PlayerLayout=r.ItemView.extend({template:o.template(t),className:"spp-main-view",events:{"click    .spp-play-pause-circle":"clickPlay","keypress .spp-play-pause-circle":"clickPlay","click    .spp-speed":"clickSpeed","keypress .spp-speed":"clickSpeed","click    .spp-more":"clickMore","keypress .spp-more":"clickMore","click    .spp-more-show-notes":"clickMoreShowNotes","keypress .spp-more-show-notes":function(e){13==e.which&&this.clickMoreShowNotes()},"click    .spp-step-forward":"clickStepForward","keypress .spp-step-forward":"clickStepForward","click    .spp-step-back":"clickStepBack","keypress .spp-step-back":"clickStepBack","mousemove .spp-progress-bar":"cursorMove","mouseout .spp-progress-bar":"cursorOut","click .spp-position":"positionClick","click .spp-time-elapsed":"positionClick","click .spp-time-remaining":"positionClick","touchstart .spp-progress-bar":"touchStart","touchmove .spp-progress-bar":"touchMove","touchend .spp-progress-bar":"touchEnd"},initialize:function(){this.hover=!1,this.spp_elements={};var e=this;a(window).on("resize",function(){e.setCircleSize()})},whileplaying:function(e){var t=e.durationEstimate/1e3,i=e.position/1e3,s=i/t*100;a(this.spp_elements.progress_played).cssExtended("width",s+"%",AP_Player.importantStr),a(this.spp_elements.position).cssExtended("display","block",AP_Player.importantStr);var n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);(!this.hover||n)&&a(this.spp_elements.position).cssExtended("left",s+"%",AP_Player.importantStr);var r=this.toTimeString(i),o=this.toTimeString(t-i);this.spp_elements.time_elapsed.text(r),this.spp_elements.time_remaining.text(o)},setSppElements:function(){this.spp_elements.time_elapsed=this.$el.find(".spp-time-elapsed"),this.spp_elements.time_remaining=this.$el.find(".spp-time-remaining"),this.spp_elements.progress_bar=this.$el.find(".spp-progress-bar"),this.spp_elements.position=this.$el.find(".spp-position"),this.spp_elements.seek_time=this.$el.find(".spp-seek-time"),this.spp_elements.progress_played=this.$el.find(".spp-progress-played")},toTimeString:function(e){var t=Math.floor(e%60),s=Math.floor(e/60%60),n=Math.floor(e/3600);return n>0?n+":"+i(s,2)+":"+i(t,2):s+":"+i(t,2)},clickPlay:function(e){this.isCursorMoving=!1,this.model.get("isPlaying")?this.model.set("isPlaying",!1):this.model.set("isPlaying",!0),a(e.currentTarget).find(".spp-control").focus()},clickSpeed:function(t){this.isCursorMoving=!1;var i=soundManager.getSoundById("track_"+this.model.cid);null!=i&&i.loaded&&(e.Controller.rotateTrackSpeed(this.options.sppLayout),a(t.currentTarget).find(".spp-control").focus())},clickMore:function(e){var t=this.model.get("data");if(!(t.download||t.social||t.subscribe_itunes||t.subscribe_buzzsprout||t.subscribe_googleplay||t.subscribe_iheartradio||t.subscribe_pocketcasts||t.subscribe_soundcloud||t.subscribe_stitcher||t.subscribe_rss))return void s.trigger("toggleEpisodeDetails",this.options.sppLayout,"click"==e.type);var i=this.$el.parents(".spp-player-layout"),r=this.$el,a=o.template('<div class="spp-dss-region"></div');i.block({message:a({data:t}),css:{left:.05*r.width()+"px",width:.9*r.width()+"px",bottom:"25px",top:"auto",border:"1px solid #aaa",cursor:"default","border-radius":"5px",color:"inherit"},centerX:!1,centerY:!1,onOverlayClick:function(){i.unblock()}});var l=new n.Marionette.Region({el:i.find(".spp-dss-region").last()});l.show(new s.Dss.DssLayout({model:this.model})),l.currentView.elementsTabbable(!0),"click"==e.type&&l.currentView.removeOutlines(),l.currentView.focusFirstControl()},clickMoreShowNotes:function(e){s.trigger("toggleEpisodeDetails",this.options.sppLayout,"click"==e.type)},clickStepBack:function(){if(this.model.get("isPlaying")){var e=soundManager.getSoundById("track_"+this.model.cid);e.setPosition(e.position-15e3)}},clickStepForward:function(){if(this.model.get("isPlaying")){var e=soundManager.getSoundById("track_"+this.model.cid);e.setPosition(e.position+6e4)}},cursorMove:function(e){var t=this.isCursorMoving;if(this.isCursorMoving=!0,t){var i=soundManager.getSoundById("track_"+this.model.cid);if(null!=i&&i.loaded){var s=this.spp_elements.progress_bar,n=s.offset();if(!(e.pageY<n.top||e.pageY>n.top+s[0].clientHeight||e.pageX<n.left||e.pageX>n.left+s[0].clientWidth)){var r=e.pageX-n.left;this.showTimestamp(r,this.model)}}}},cursorOut:function(){var e=soundManager.getSoundById("track_"+this.model.cid);null!=e&&e.loaded&&this.hideTimestamp()},positionClick:function(e){this.isCursorMoving=!1;var t=soundManager.getSoundById("track_"+this.model.cid);if(null!=t&&t.loaded){var i=e.pageX-this.spp_elements.progress_bar.offset().left,s=this.spp_elements.progress_bar.outerWidth();this.seek(i/s)}},touchStart:function(e){this.isTouchMoving=!1,this.touchStartX=e.originalEvent.touches[0].clientX,this.touchStartY=e.originalEvent.touches[0].clientY},touchMove:function(e){this.isTouchMoving=!0;var t=soundManager.getSoundById("track_"+this.model.cid);if(null!=t&&t.loaded){var i=e.originalEvent.touches[0];if(!(Math.abs(this.touchStartX-i.clientX)<Math.abs(this.touchStartY-i.clientY))){var s=i.pageX-this.spp_elements.progress_bar.offset().left;0>s&&(s=0),this.showTimestamp(s,this.model)}}},touchEnd:function(e){if(this.isTouchMoving){var t=e.originalEvent.changedTouches[e.originalEvent.changedTouches.length-1];if(!(Math.abs(this.touchStartX-t.clientX)<Math.abs(this.touchStartY-t.clientY))){var i=soundManager.getSoundById("track_"+this.model.cid);if(null!=i&&i.loaded){var s=this.spp_elements.progress_bar.offset(),n=t.pageX-s.left,r=t.pageY-s.top;if(!(0>r||r>this.$(".spp-player").clientHeight||n>this.$(".spp-player").clientWidth)){0>n&&(n=0);var a=this.spp_elements.progress_bar.outerWidth();this.seek(n/a),this.hideTimestamp()}}}}},seek:function(e){var t="track_"+this.model.cid;this.model.get("isPlaying")||(soundManager.pauseAll(),soundManager.play(t),this.model.set("isPlaying",!0));var i=soundManager.getSoundById(t);i.setPosition(e*i.durationEstimate)},showTimestamp:function(e){this.hover=!0,this.spp_elements.progress_bar.addClass("spp-hover"),this.spp_elements.position.cssExtended("left",e+"px","important");var t=this.spp_elements.progress_bar.outerWidth(),i="track_"+this.model.cid,s=soundManager.getSoundById(i);if(null!=s)var n=null!==s.duration?s.duration:s.durationEstimate;var r=this.options.shortcode_options;if(null!=s&&null!==n&&n>0&&r.hover_timestamp){var a=n*e/t/1e3,o=Math.floor(a%60),l=Math.floor(a/60%60),p=Math.floor(a/3600),d=l+":";d+=o>9?o:"0"+o,p>0&&(d=l>9?p+":"+d:p+":0"+d);var c=this.spp_elements.seek_time;c.text(d);var u=c.width(),h=e-u/2;c.cssExtended("left",h+"px","important"),c.cssExtended("display","block","important")}},hideTimestamp:function(){var e=(this.model.get("data"),"track_"+this.model.cid),t=soundManager.getSoundById(e);if(t){var i=t.position/t.duration*100;this.spp_elements.position.cssExtended("left",i+"%","important")}this.spp_elements.seek_time.cssExtended("display","none","important"),this.spp_elements.progress_bar.removeClass("spp-hover"),this.hover=!1},setCircleSize:function(){var e=.16*this.$el.width();if("number"==typeof e){20>e&&(e=20),e>70&&(e=70);var t=this.$el.find(".spp-play-pause-circle");t.cssExtended("width",e+"px","important"),t.cssExtended("height",e+"px","important"),t.cssExtended("top",e/5+"px","important")}},onRender:function(){this.setSppElements(),this.listenTo(this.model,"updateTime",this.timeUpdated);for(var e=this.model.get("data"),t="",i=0;i<e.tags.length;i++)t+='<li class="spp-tag">'+e.tags[i]+"</li>";this.$(".spp-tag-list").html(t);var n=this.options.shortcode_options;if(0==n.hide_listens){var r=s.request("tracks:get",this.options.sppLayout),o=r.totalPlaybackCount();if(o){var l=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" Listens";""!=e.show_name&&void 0!==e.show_name&&(l="  "+l),this.$(".spp-show-count").text(l)}}this.model.set("isPlaying",!1),this.model.set("speed",1);var p=/MSIE (\d+\.\d+);/.test(navigator.userAgent)||1==!!document.documentMode;p&&this.$(".spp-controls").children().each(function(){a(this).cssExtended("height","70px",AP_Player.importantStr)})},onShow:function(){this.setCircleSize()},updateSpeedControl:function(){this.$el.removeClass("spp-speeding-half"),this.$el.removeClass("spp-speeding-onehalf"),this.$el.removeClass("spp-speeding-two"),this.$el.removeClass("spp-speeding-three");var e=this.model.get("speed");.5==e?this.$el.addClass("spp-speeding-half"):1.5==e?this.$el.addClass("spp-speeding-onehalf"):2==e?this.$el.addClass("spp-speeding-two"):3==e&&this.$el.addClass("spp-speeding-three")}})}),e.on("changeEpisodePlaying",function(e){var t=e.mainRegion.currentView;if(t){var i=t.model.get("isPlaying");i?(t.$el.addClass("spp-playing"),t.$(".spp-play").attr("aria-label","Pause")):(t.$el.removeClass("spp-playing"),t.$(".spp-play").attr("aria-label","Play"))}}),e.on("changeSpeed",function(e){var t=e.mainRegion.currentView;t&&t.updateSpeedControl()}),e.reqres.setHandler("currentTrack",function(e){var t=e.mainRegion.currentView;return t?t.model:void 0}),e.Player.PlayerLayout}),a("apps/smart-podcast-player/player-controller",["spp-app","apps/smart-podcast-player/player-view","entities/track-model","soundmanager2"],function(e){return e.module("Player",function(e,t){e.Controller={init:function(i){playerView=new e.PlayerLayout({model:t.request("track:featured",i),sppLayout:i,shortcode_options:i.model.get("options")}),i.mainRegion.show(playerView)},rotateTrackSpeed:function(e){var t=e.mainRegion.currentView.model,i=t.get("speed");t.get("isPlaying")||t.set("isPlaying",!0),.5==i?t.set("speed",1):1==i?t.set("speed",1.5):1.5==i?t.set("speed",2):2==i?t.set("speed",3):3==i?t.set("speed",.5):t.set("speed",1)}},t.on("previewTrack",function(e,t){var i=e.mainRegion.currentView;i&&(i.model=t,i.render())}),t.on("changeEpisodePlaying",function(e,i){var s=e.mainRegion.currentView;if(s){var n="track_"+s.model.cid,r=soundManager.getSoundById(n);if(i.get("isPlaying")){if(!r){var a=s.model.get("data");if(a.stream_url.toLowerCase().includes("soundcloud.com"))var o=a.stream_url.includes("?")?"&":"?",l=a.stream_url+o+"consumer_key="+AP_Player.soundcloudConsumerKey;else var l=a.stream_url;soundManager.createSound({id:n,url:l,whileplaying:function(){s.whileplaying(this)},onfinish:function(){var s=i.get("speed");i.set("isPlaying",!1);var n=t.request("tracks:get",e),r=n.getNextTrack(i);r&&(t.trigger("previewTrack",e,r),r.set("isPlaying",!0),r.set("speed",s))}})}soundManager.play(n)}else r&&soundManager.pause(n)}}),t.on("changeSpeed",function(e,t){var i="track_"+t.cid,s=soundManager.getSoundById(i),n=t.get("speed");s&&s.isHTML5&&(s._a.playbackRate=n)})}),e.Player.Controller}),a("spp-app",["jquery","marionette","soundmanager2"],function(e,t){var i=new t.Application;return i.options={},i.options.current_page=1,i.options.tracks_per_page=10,i.options.searchWhileTyping=!0,i.on("initialize:after",function(){jQuery(".smart-podcast-player-container").length>0&&(soundManager.setup({flashVersion:9,useHighPerformance:!0,wmode:"transparent",useHTML5Audio:!0,preferFlash:!1,onready:function(){i.trigger("app:core:init")}}),soundManager.beginDelayedInit())}),i.on("app:core:init",function(){r(["apps/smart-podcast-player/core"],function(e){e.init()})}),i.on("episode-details:init",function(e){r(["apps/smart-podcast-player/episode-details"],function(t){t.init(e)})}),i.on("playlist:init",function(e){r(["apps/smart-podcast-player/playlist"],function(t){t.init(e)})}),i.on("player:init",function(e){r(["apps/smart-podcast-player/player-controller"],function(t){t.init(e)})}),i}),a("text!templates/stp-track-template.html",[],function(){return'<% if ( data.show_logo != undefined && data.show_logo != null ) { %>\r\n	<div class="spp-show-logo">\r\n		<img src="<%= data.show_logo %>" alt="<%= data.show_name %>" />\r\n	</div>\r\n<% } %>\r\n\r\n<div class="spp-track-layer-0">\r\n</div>\r\n\r\n<div class="spp-track-layer-1">\r\n	\r\n	<div class="spp-playback-controls">\r\n		<div class="spp-play-pause">\r\n			<div class="spp-control spp-play" aria-label="Play" tabindex="0">\r\n				<div class="spp-play-bar spp-play-bar-left"></div>\r\n				<div class="spp-play-bar spp-play-bar-right"></div>\r\n				<div class="spp-play-mask spp-play-mask-top"></div>\r\n				<div class="spp-play-mask spp-play-mask-bottom"></div>\r\n			</div>\r\n		</div>\r\n		<div class="spp-playback-controls-2">\r\n			<% if ( data.paid == true ) { %>\r\n				<% if ( data.speedcontrol == true ) { %>\r\n					<div class="spp-speed">\r\n						<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-half" tabindex="0" aria-labelledby="spp-svg-title-half-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-half-speed">Speed: 50%</title>\n  <path id="_.5X" data-name=".5X"d="M32,112A16,16,0,1,1,4.21,101.21l2.121,2.121A12.995,12.995,0,1,0,17,99.051V104H14V96h3v0.05A15.987,15.987,0,0,1,32,112ZM8.058,117.211a0.65,0.65,0,0,0,.5.182,0.669,0.669,0,0,0,.508-0.182,0.628,0.628,0,0,0,.173-0.451,0.665,0.665,0,0,0-.173-0.469A0.657,0.657,0,0,0,8.56,116.1a0.638,0.638,0,0,0-.5.187,0.678,0.678,0,0,0-.167.469A0.64,0.64,0,0,0,8.058,117.211Zm3.832-3.937,0.288-.235a1.792,1.792,0,0,1,1.115-.31,1.587,1.587,0,0,1,1.241.518A1.978,1.978,0,0,1,15,114.621a2.154,2.154,0,0,1-.431,1.424,1.466,1.466,0,0,1-1.188.516,1.626,1.626,0,0,1-1.115-.372,1.722,1.722,0,0,1-.522-1.1H10.716a2.5,2.5,0,0,0,.816,1.734,2.7,2.7,0,0,0,1.849.627,2.6,2.6,0,0,0,1.992-.758,2.914,2.914,0,0,0,.713-2.078,3.018,3.018,0,0,0-.687-2.083,2.361,2.361,0,0,0-1.854-.77,2.761,2.761,0,0,0-1.426.369l0.258-2.326h3.457v-1H11.456l-0.434,4.254Zm6.763-4.477h-1.32l2.705,4.23-2.77,4.3H18.6L20.713,114l2.1,3.328h1.338l-2.764-4.3,2.7-4.23H22.761l-2.048,3.269Z" transform="translate(0 -96)"/>\n</svg>\n\r\n						<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-one" tabindex="0" aria-labelledby="spp-svg-title-normal-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-normal-speed">Speed: Normal</title>\n  <path id="_1X" data-name="1X" d="M72,112a16,16,0,1,1-27.79-10.79l2.121,2.121A12.995,12.995,0,1,0,57,99.051V104H54V96h3v0.05A15.987,15.987,0,0,1,72,112Zm-19.737-3h-0.17l-3.11,1.166v0.984l2.189-.8v7.224h1.092V109Zm4.431,0.041H55.373l2.705,4.231-2.77,4.3h1.332l2.113-3.328,2.1,3.328h1.338l-2.764-4.3,2.7-4.231H60.8l-2.048,3.27Z" transform="translate(-40 -96)"/>\n</svg>\n\r\n						<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-onehalf" tabindex="0" aria-labelledby="spp-svg-title-1p5-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-1p5-speed">Speed: 150%</title>\n  <path id="_1.5X" data-name="1.5X" d="M112,112a16,16,0,1,1-27.79-10.79l2.121,2.121A12.995,12.995,0,1,0,97,99.051V104H94V96h3v0.05A15.988,15.988,0,0,1,112,112Zm-22.284-2.254H89.589l-2.333.874v0.739l1.642-.6v5.418h0.819v-6.429Zm2.218,6.341a0.486,0.486,0,0,0,.376.136,0.5,0.5,0,0,0,.381-0.136,0.471,0.471,0,0,0,.13-0.338,0.5,0.5,0,0,0-.13-0.352,0.491,0.491,0,0,0-.381-0.14,0.477,0.477,0,0,0-.376.14,0.51,0.51,0,0,0-.125.352A0.48,0.48,0,0,0,91.935,116.087Zm3.107-2.953,0.216-.176a1.346,1.346,0,0,1,.836-0.233,1.192,1.192,0,0,1,.931.389,1.483,1.483,0,0,1,.35,1.031,1.616,1.616,0,0,1-.323,1.068,1.1,1.1,0,0,1-.891.386,1.219,1.219,0,0,1-.836-0.279,1.29,1.29,0,0,1-.392-0.828h-0.77a1.877,1.877,0,0,0,.612,1.3,2.03,2.03,0,0,0,1.386.47,1.952,1.952,0,0,0,1.494-.569,2.186,2.186,0,0,0,.535-1.558,2.262,2.262,0,0,0-.515-1.562A1.767,1.767,0,0,0,96.283,112a2.067,2.067,0,0,0-1.07.277l0.194-1.745H98v-0.751H94.716l-0.326,3.19Zm5.014-3.357h-0.99l2.029,3.172-2.078,3.226h1l1.585-2.5,1.575,2.5h1l-2.073-3.226,2.024-3.172h-0.994l-1.536,2.452Z" transform="translate(-80 -96)"/>\n</svg>\n\r\n						<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-two" tabindex="0" aria-labelledby="spp-svg-title-double-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-double-speed">Speed: Double</title>\n  <path id="_2X" data-name="2X" d="M152,112a16,16,0,1,1-27.79-10.79l2.121,2.121A12.995,12.995,0,1,0,137,99.051V104h-3V96h3v0.05A15.988,15.988,0,0,1,152,112Zm-17.334,4.43h-4.29l2.289-2.478a4.877,4.877,0,0,0,1.608-3,2.125,2.125,0,0,0-.693-1.661,2.707,2.707,0,0,0-1.883-.624,2.823,2.823,0,0,0-2.034.726,2.514,2.514,0,0,0-.76,1.905h1.086a1.759,1.759,0,0,1,.449-1.281,1.681,1.681,0,0,1,1.259-.46,1.417,1.417,0,0,1,1.079.428,1.529,1.529,0,0,1,.405,1.1,2.021,2.021,0,0,1-.249.964,7.034,7.034,0,0,1-.907,1.21l-2.957,3.281v0.779h5.6V116.43Zm2.953-7.646H136.3l2.7,4.23-2.77,4.3h1.332l2.113-3.328,2.1,3.328h1.338l-2.764-4.3,2.7-4.23h-1.326l-2.048,3.269Z" transform="translate(-120 -96)"/>\n</svg>\n\r\n						<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-speed-three" tabindex="0" aria-labelledby="spp-svg-title-triple-speed" role="img" viewBox="0 0 32 32">\n  <title id="spp-svg-title-triple-speed">Speed: Triple</title>\n  <path id="_3X" data-name="3X" d="M192,112a16,16,0,1,1-27.79-10.79l2.121,2.121A12.995,12.995,0,1,0,177,99.051V104h-3V96h3v0.05A15.988,15.988,0,0,1,192,112Zm-21.289,1.662h0.816a1.994,1.994,0,0,1,1.32.41,1.432,1.432,0,0,1,.458,1.143,1.577,1.577,0,0,1-.417,1.177,1.639,1.639,0,0,1-1.2.41,1.671,1.671,0,0,1-1.179-.4,1.39,1.39,0,0,1-.44-1.078h-1.092a2.159,2.159,0,0,0,.754,1.717,2.893,2.893,0,0,0,1.957.65,2.815,2.815,0,0,0,1.955-.674,2.327,2.327,0,0,0,.751-1.822,2.045,2.045,0,0,0-.385-1.26,2.106,2.106,0,0,0-1.088-.738,2.182,2.182,0,0,0,.983-0.779,1.876,1.876,0,0,0,.361-1.078,2.306,2.306,0,0,0-.687-1.776,3.059,3.059,0,0,0-3.782.033,2.173,2.173,0,0,0-.743,1.684h1.086a1.4,1.4,0,0,1,.42-1.063,1.555,1.555,0,0,1,1.124-.4,1.324,1.324,0,0,1,1.5,1.5,1.351,1.351,0,0,1-.44,1.061,1.8,1.8,0,0,1-1.209.4h-0.816v0.885Zm6.372-4.623h-1.32l2.7,4.23-2.77,4.3h1.332l2.113-3.328,2.1,3.328h1.338l-2.764-4.3,2.7-4.23h-1.326l-2.048,3.269Z" transform="translate(-160 -96)"/>\n</svg>\n\r\n					</div>\r\n				<% } %>\r\n			<% } %>\r\n			<div class="spp-step-back">\r\n				<svg xmlns="http://www.w3.org/2000/svg" class="spp-control" tabindex="0" aria-labelledby="spp-svg-title-back-15" role="img" viewBox="0 0 76.344 44">\n  <title id="spp-svg-title-back-15">Back 15 seconds</title>\n  <path id="RW_15" d="M36.645,62.008H36.318L31,64.289v1.927l3.566-1.571V78.784h2.074V62.008Zm7.418,8.841,0.548-.539a2.444,2.444,0,0,1,1.643-.528,2.284,2.284,0,0,1,1.963,1.032,4.533,4.533,0,0,1,.728,2.672,4.978,4.978,0,0,1-.676,2.769,2.129,2.129,0,0,1-1.876,1.026,2.208,2.208,0,0,1-1.719-.728,3.854,3.854,0,0,1-.833-2.161H41.907a5.286,5.286,0,0,0,1.375,3.394,4.573,4.573,0,0,0,6.485-.252A6.182,6.182,0,0,0,51,73.463a6.653,6.653,0,0,0-1.13-4.071,3.669,3.669,0,0,0-3.111-1.514,3.908,3.908,0,0,0-2.261.722l0.4-4.552h5.64V62.088H43.153l-0.734,8.325ZM75,73A33,33,0,0,0,9,73h4.67l-6,8-6-8H6a36,36,0,0,1,72,0H75Z" transform="translate(-1.656 -37)"/>\n</svg>\n\r\n			</div>\r\n			<div class="spp-step-forward">\r\n				<svg xmlns="http://www.w3.org/2000/svg" class="spp-control" tabindex="0" aria-labelledby="spp-svg-title-forward-60" role="img" viewBox="0 0 76.344 44">\n  <title id="spp-svg-title-forward-60">Forward 60 seconds</title>\n  <path id="FF-60" d="M185.75,62.229a6.816,6.816,0,0,0-3.714,1.017,6,6,0,0,0-2.261,3.006,15.677,15.677,0,0,0-.768,5.432V72.49a7.977,7.977,0,0,0,1.276,4.739,3.949,3.949,0,0,0,3.365,1.784,4.057,4.057,0,0,0,3.313-1.511,6.32,6.32,0,0,0,1.234-4.114,6.47,6.47,0,0,0-1.116-3.949,3.561,3.561,0,0,0-3.017-1.506,3.631,3.631,0,0,0-2.929,1.386,6.42,6.42,0,0,1,1.358-3.949,4.31,4.31,0,0,1,3.271-1.358H186.1V62.229H185.75Zm-0.271,8.517a5.133,5.133,0,0,1,.661,2.744,5.06,5.06,0,0,1-.661,2.744,2.063,2.063,0,0,1-1.831,1.04,2.121,2.121,0,0,1-1.812-1.267,6.448,6.448,0,0,1-.739-3.278V71.9a3.519,3.519,0,0,1,1.04-1.591,2.347,2.347,0,0,1,1.57-.625A2.01,2.01,0,0,1,185.479,70.746Zm15.53-1.915a9.746,9.746,0,0,0-1.175-5.125,4.313,4.313,0,0,0-6.92.091,10.389,10.389,0,0,0-1.116,5.409v2.841a9.939,9.939,0,0,0,1.18,5.227A4.261,4.261,0,0,0,199.9,77.2a10.684,10.684,0,0,0,1.11-5.472v-2.9Zm-2.09,3.443a9.267,9.267,0,0,1-.626,3.784,1.977,1.977,0,0,1-1.878,1.239,2.027,2.027,0,0,1-1.913-1.312,9.5,9.5,0,0,1-.626-3.926V68.649a8.876,8.876,0,0,1,.626-3.687,1.984,1.984,0,0,1,1.889-1.222,2.008,2.008,0,0,1,1.925,1.244,9.341,9.341,0,0,1,.6,3.869v3.42ZM157,73a33,33,0,0,1,66,0h-4.67l6,8,6-8H226a36,36,0,0,0-72,0h3Z" transform="translate(-154 -37)"/>\n</svg>\n\r\n			</div>\r\n		</div>\r\n	</div>\r\n		\r\n	<div class="spp-download-share-controls">\r\n		<% if ( data.paid == true ) { %>\r\n		\r\n			<% if ( data.download == true ) { %>\r\n				<% var adl = document.createElement("a"); %>\r\n				<% var adloff = /Firefox/i.test(navigator.userAgent); %>\r\n\r\n				<% if ( typeof adl.download != "undefined" && !adloff && data.method != "soundcloud" ) { %>\r\n					<a class="spp-button-downloada spp-control" href="<%= data.download_url %>" download>\r\n						<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-dss-image spp-download-image" aria-labelledby="spp-svg-title-download" role="img" width="24" height="24" viewBox="0 0 24 24">\n  <title id="spp-svg-title-download">Download</title>\n  <path id="Download" d="M23,24H1a1,1,0,0,1-1-1V19a1,1,0,1,1,2,0v3H22V19a1,1,0,0,1,2,0v4A1,1,0,0,1,23,24ZM12.753,17.661c-0.015.018-.019,0.04-0.036,0.057a1.031,1.031,0,0,1-1.435,0c-0.018-.018-0.025-0.043-0.041-0.062L6.282,12.7A1,1,0,0,1,7.7,11.282l3.3,3.3V1a1,1,0,0,1,2,0V14.586l3.3-3.3A1,1,0,0,1,17.718,12.7Z"/>\n</svg>\n\r\n					</a>\r\n				<% } %>\r\n				<% if ( typeof adl.download == "undefined" || adloff || data.method == "soundcloud" ) { %>\r\n					<a class="spp-button-download spp-control" href="<%= data.download_url %>" target="_blank">\r\n						<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-dss-image spp-download-image" aria-labelledby="spp-svg-title-download" role="img" width="24" height="24" viewBox="0 0 24 24">\n  <title id="spp-svg-title-download">Download</title>\n  <path id="Download" d="M23,24H1a1,1,0,0,1-1-1V19a1,1,0,1,1,2,0v3H22V19a1,1,0,0,1,2,0v4A1,1,0,0,1,23,24ZM12.753,17.661c-0.015.018-.019,0.04-0.036,0.057a1.031,1.031,0,0,1-1.435,0c-0.018-.018-0.025-0.043-0.041-0.062L6.282,12.7A1,1,0,0,1,7.7,11.282l3.3,3.3V1a1,1,0,0,1,2,0V14.586l3.3-3.3A1,1,0,0,1,17.718,12.7Z"/>\n</svg>\n\r\n					</a>\r\n				<% } %>\r\n			<% } %>\r\n			<% if ( data.social == true ) { %>\r\n				<div class="spp-social">\r\n					<svg xmlns="http://www.w3.org/2000/svg" class="spp-control spp-dss-image spp-share-image" tabindex="0" aria-labelledby="spp-svg-title-share" role="img" width="24" height="24" viewBox="0 0 24 24">\n  <title id="spp-svg-title-share">Share</title>\n  <path id="Share" d="M84,8a3.975,3.975,0,0,1-2.946-1.314L71.9,11.12a3.767,3.767,0,0,1,0,1.761l9.158,4.434a4.027,4.027,0,1,1-.95,1.805l-9.158-4.434a4,4,0,1,1,0-5.371L80.1,4.88A4,4,0,1,1,84,8Zm0,14a2,2,0,0,0,0-4,1.978,1.978,0,0,0-.98.267,2.029,2.029,0,0,0-.724.7c-0.011.019-.02,0.039-0.031,0.058a1.966,1.966,0,0,0-.162.374c-0.012.038-.026,0.075-0.035,0.114A1.958,1.958,0,0,0,82,20a0.11,0.11,0,0,0,0,.014A2,2,0,0,0,84,22ZM69.9,11.4a1.967,1.967,0,0,0-.162-0.374c-0.011-.019-0.02-0.039-0.031-0.058a2.03,2.03,0,0,0-.724-0.7h0A1.978,1.978,0,0,0,68,10a2,2,0,0,0,0,4,1.975,1.975,0,0,0,.981-0.267,2.029,2.029,0,0,0,.716-0.689c0.016-.027.03-0.055,0.045-0.082a1.967,1.967,0,0,0,.149-0.343c0.015-.045.031-0.088,0.043-0.134a1.8,1.8,0,0,0,0-.975C69.923,11.471,69.909,11.434,69.9,11.4ZM84,2a2,2,0,0,0-2,1.984A0.12,0.12,0,0,0,82,4a1.958,1.958,0,0,0,.068.49c0.01,0.039.023,0.076,0.035,0.114a1.966,1.966,0,0,0,.162.374C82.276,5,82.285,5.016,82.3,5.035a2.03,2.03,0,0,0,.723.7A1.979,1.979,0,0,0,84,6,2,2,0,0,0,84,2Z" transform="translate(-64)"/>\n</svg>\n\r\n				</div>\r\n			<% } %>\r\n		<% } %>\r\n	</div>\r\n			\r\n	<% if ( data.social == true ) { %>\r\n		<div class="spp-share-icon-list">\r\n			<% if( data.social_twitter ) { %>\r\n				<div class="spp-share-icon-container1">\r\n					<div class="spp-share-icon-container">\r\n						<img class="spp-control spp-share-btn spp-twitter"\r\n								src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Twitter">\r\n					</div>\r\n				</div>\r\n			<% } %>\r\n			<% if( data.social_facebook ) { %>\r\n				<div class="spp-share-icon-container1">\r\n					<div class="spp-share-icon-container">\r\n						<img class="spp-control spp-share-btn spp-facebook"\r\n								src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Facebook">\r\n					</div>\r\n				</div>\r\n			<% } %>\r\n			<% if( data.social_linkedin ) { %>\r\n				<div class="spp-share-icon-container1">\r\n					<div class="spp-share-icon-container">\r\n						<img class="spp-control spp-share-btn spp-linked-in"\r\n								src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Linked In">\r\n					</div>\r\n				</div>\r\n			<% } %>\r\n			<% if( data.social_gplus ) { %>\r\n				<div class="spp-share-icon-container1">\r\n					<div class="spp-share-icon-container">\r\n						<img class="spp-control spp-share-btn spp-google-plus"\r\n								src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Google Plus">\r\n					</div>\r\n				</div>\r\n			<% } %>\r\n			<% if( data.social_pinterest ) { %>\r\n				<div class="spp-share-icon-container1">\r\n					<div class="spp-share-icon-container">\r\n						<img class="spp-control spp-share-btn spp-pinterest"\r\n								src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share on Pinterest">\r\n					</div>\r\n				</div>\r\n			<% } %>\r\n			<% if( data.social_email ) { %>\r\n				<div class="spp-share-icon-container1">\r\n					<div class="spp-share-icon-container">\r\n						<a href="mailto:<%= data.email %>" target="_blank">\r\n							<img class="spp-share-btn spp-email"\r\n									src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Share via email">\r\n						</a>\r\n					</div>\r\n				</div>\r\n			<% } %>\r\n			<div class="spp-share-icon-container1">\r\n				<div class="spp-share-icon-container">\r\n					<img class="spp-control spp-close-btn"\r\n							src="<%= AP_Player.baseUrl %>../images/SPP-sprite.png" alt="Close">\r\n				</div>\r\n			</div>\r\n		</div>\r\n	<% } %>\r\n\r\n	<iframe class="spp-downloader" style="display:none"></iframe>\r\n	\r\n</div>\r\n<div class="spp-track-layer-2">\r\n	\r\n	<div class="spp-artist-and-title">\r\n		<% if ( data.artist != undefined && data.artist != null ) { %>\r\n			<div class="spp-artist"><div class="spp-artist-box">\r\n				<span class="spp-artist-first-container">\r\n					<span><%= data.artist %></span>\r\n					<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n				</span>\r\n				<span class="spp-artist-second-container">\r\n					<span><%= data.artist %></span>\r\n					<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n				</span>\r\n			</div></div>\r\n		<% } %>\r\n\r\n		<div class="spp-track-title"><div class="spp-track-title-box">\r\n			<span class="spp-track-title-first-container">\r\n				<span><%= data.title %></span>\r\n				<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n			</span>\r\n			<span class="spp-track-title-second-container">\r\n				<span><%= data.title %></span>\r\n				<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n			</span>\r\n		</div></div>\r\n	</div>\r\n	\r\n	<div class="spp-progress-bar">\r\n		<div class="spp-progress-played"></div>\r\n		<div class="spp-position"></div>\r\n		<div class="spp-time-elapsed"></div>\r\n		<div class="spp-time-remaining"></div>\r\n		<div class="spp-seek-time"></div>\r\n	</div>\r\n</div>\r\n\r\n<%if ( data.paid != true ) { %>\r\n	<div class="spp-logo"></div>\r\n<% } %>\r\n'
}),t(jQuery),a("style",function(){}),a("apps/smart-track-player/stp-view",["stp-app","text!templates/stp-track-template.html","style"],function(e,t){return e.module("View",function(e,s,n,r,a,o){e.Player=r.ItemView.extend({template:o.template(t),className:"smart-track-player",events:{"mousemove .spp-progress-bar":"cursorMove","mouseout .spp-progress-bar":"cursorOut","click    .spp-position":"positionClick","keypress .spp-position":"positionClick","click    .spp-time-elapsed":"positionClick","keypress .spp-time-elapsed":"positionClick","click    .spp-time-remaining":"positionClick","keypress .spp-time-remaining":"positionClick","click    .spp-play-pause":"play","keypress .spp-play-pause":"play","click    .spp-button-download":"download","keypress .spp-button-download":"download","click    .spp-dload":"download","keypress .spp-dload":"download","click    .spp-speed":"speed","keypress .spp-speed":"speed","click    .spp-step-back":"stepBack","keypress .spp-step-back":"stepBack","click    .spp-step-forward":"stepForward","keypress .spp-step-forward":"stepForward","click    .spp-social":"toggleShare","keypress .spp-social":"toggleShare","click    .spp-share-btn":"share","keypress .spp-share-btn":"share","click    .spp-close-btn":"toggleShare","keypress .spp-close-btn":"toggleShare","touchstart .spp-progress-bar":"touchStart","touchmove .spp-progress-bar":"touchMove","touchend .spp-progress-bar":"touchEnd","mousedown .spp-control":function(){this.isMouse||(this.isMouse=!0,this.$el.find(".spp-control").each(function(){this.classList&&this.classList.add("spp-no-outline")}),this.$(".spp-playback-controls").removeClass("spp-show-controls"))},"keydown .spp-control":function(e){if(this.isMouse&&9==e.which&&0==e.altKey){this.isMouse=!1,this.$el.find(".spp-control").each(function(){this.classList&&this.classList.remove("spp-no-outline")});var t=this.$el.hasClass("spp-playing");t&&this.$(".spp-playback-controls").addClass("spp-show-controls")}}},initialize:function(){this.hover=!1;var e=this.model.get("data");this.track_id="smart_track_"+e.track_uid+"_"+this.model.cid;var t=this;a(window).on("resize",function(){t.resize()})},timeUpdated:function(e,t){var i=e/t*100;a(this.$el.find(".spp-progress-played")).cssExtended("width",i+"%",AP_Player.importantStr);var s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);a(this.$el.find(".spp-position")).cssExtended("display","block",AP_Player.importantStr),(!this.hover||s)&&a(this.$el.find(".spp-position")).cssExtended("left",i+"%",AP_Player.importantStr);var n=this.toTimeString(e),r=this.toTimeString(t-e);this.$el.find(".spp-time-elapsed").text(n),this.$el.find(".spp-time-remaining").text(r)},toTimeString:function(e){var t=Math.floor(e%60),s=Math.floor(e/60%60),n=Math.floor(e/3600);return n>0?n+":"+i(s,2)+":"+i(t,2):s+":"+i(t,2)},toggleShare:function(){this.$(".spp-share-icon-list").toggleClass("spp-show-icons"),this.$(".spp-show-icons").length>0?(this.shareIconsTabbable(!0),this.$(".spp-share-icon-list").find(".spp-control").focus()):(this.shareIconsTabbable(!1),this.$(".spp-share-image").focus())},download:function(e){this.isCursorMoving=!1,e.preventDefault();var t=this.model.get("data"),i=t.download_url,s=t.download_id;"https:"===location.protocol&&(i=i.replace(/^http:\/\//i,"https://"));var n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(n||"soundcloud"==t.method&&"http:"!==location.protocol){if("soundcloud"==t.method)var r=i.includes("?")?"&":"?",a=i+r+"consumer_key="+AP_Player.soundcloudConsumerKey;else var a=i;window.location=a}else{if("soundcloud"==t.method)var r=i.includes("?")?"&":"?",a=i+r+"consumer_key="+AP_Player.soundcloudConsumerKey;else var a=AP_Player.homeUrl+"/?spp_download="+s;this.$(".spp-downloader").prop("src",a)}},resize:function(){var e=this.model.get("data");if(window.innerWidth<768||"mobile"===e.view)this.$(".spp-track-layer-0").cssExtended({width:"100%"},AP_Player.importantStr),this.$(".spp-track-layer-1").cssExtended("width","100%",AP_Player.importantStr),this.$(".spp-track-layer-2").cssExtended("width","100%",AP_Player.importantStr),this.$(".spp-artist-and-title").cssExtended("width","calc(100% - 50px)",AP_Player.importantStr);else{if(null===e.show_logo||void 0===e.show_logo);else{var t="calc(100% - 100px)",i=/MSIE 10.0;/.test(navigator.userAgent);i&&(t=this.$el.parent().width()-100+"px",this.$(".spp-track-layer-0").cssExtended("left","100px",AP_Player.importantStr),this.$(".spp-track-layer-1").cssExtended("left","100px",AP_Player.importantStr),this.$(".spp-track-layer-2").cssExtended("left","100px",AP_Player.importantStr),this.$(".spp-artist-and-title").cssExtended("height","50px",AP_Player.importantStr)),this.$(".spp-track-layer-0").cssExtended("width",t,AP_Player.importantStr),this.$(".spp-track-layer-1").cssExtended("width",t,AP_Player.importantStr),this.$(".spp-track-layer-2").cssExtended("width",t,AP_Player.importantStr)}var s=120;e.download&&(s+=39),e.social&&(s+=39),(e.download||e.share)&&(s+=10),this.$(".spp-artist-and-title").cssExtended("width","calc(100% - "+s+"px)",AP_Player.importantStr)}var n=this.$el.find(".spp-artist-first-container").children()[0],r=this.$el.find(".spp-artist")[0];n&&n.offsetWidth>r.clientWidth&&(this.$el.find(".spp-artist-first-container").addClass("spp-marquee"),this.$el.find(".spp-artist-second-container").addClass("spp-marquee"),this.$el.find(".spp-artist-second-container").cssExtended("visibility","visible",AP_Player.importantStr));var a=this.$el.find(".spp-track-title-first-container").children()[0],o=this.$el.find(".spp-track-title")[0];a&&a.offsetWidth>o.clientWidth&&(this.$el.find(".spp-track-title-first-container").addClass("spp-marquee"),this.$el.find(".spp-track-title-second-container").addClass("spp-marquee"),this.$el.find(".spp-track-title-second-container").cssExtended("visibility","visible",AP_Player.importantStr))},socialPopup:function(e,t){window.open(t,"pinterest","screenX=100,screenY=100,height=360,width=730"),e.preventDefault(),e.stopPropagation()},share:function(e){this.isCursorMoving=!1;var t,i=this,s=i.model.get("data"),n=a(e.currentTarget);if(t=s.permalink?s.permalink:window.location.href,(n.hasClass("spp-facebook")||n.hasClass("spp-fb-btn"))&&this.socialPopup(e,"http://www.facebook.com/sharer/sharer.php?m2w&s=100&p[url]="+encodeURIComponent(t)+"&p[images][0]=&p[title]="+encodeURIComponent(s.title)),n.hasClass("spp-twitter")||n.hasClass("spp-twitter-btn")){var r="https://twitter.com/intent/tweet?";if(r+=s.tweet_text?"text="+encodeURIComponent(s.tweet_text):"text="+encodeURIComponent(s.title),r+="&url="+encodeURIComponent(t),s.hashtag){r+="&hashtags=";for(var o=s.hashtag.split(","),l=0;l<o.length;l++)r+=encodeURIComponent(o[l].replace("#",""))+","}s.twitter_username&&(r+="&via="+encodeURIComponent(s.twitter_username.replace("@",""))),this.socialPopup(e,r)}(n.hasClass("spp-google-plus")||n.hasClass("spp-gplus-btn"))&&this.socialPopup(e,"https://plus.google.com/share?url="+encodeURIComponent(t)),(n.hasClass("spp-stumble")||n.hasClass("spp-stumble-btn"))&&this.socialPopup(e,"http://www.stumbleupon.com/submit?url="+encodeURIComponent(t)+"&title="+encodeURIComponent(s.title)),(n.hasClass("spp-pinterest")||n.hasClass("spp-pinterest-btn"))&&this.socialPopup(e,"https://pinterest.com/pin/create/button/?url="+encodeURIComponent(t)),(n.hasClass("spp-linked-in")||n.hasClass("spp-linkedin-btn"))&&this.socialPopup(e,"https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(t)+"&title="+encodeURIComponent(s.title))},stop:function(){this.$el.removeClass("spp-playing")},stepBack:function(){if(this.$el.hasClass("spp-playing")){var e=soundManager.getSoundById(this.track_id);e.setPosition(e.position-15e3)}},stepForward:function(){if(this.$el.hasClass("spp-playing")){var e=soundManager.getSoundById(this.track_id);e.setPosition(e.position+6e4)}},positionClick:function(e){this.isCursorMoving=!1,null!=this.sound&&(x=e.pageX-this.$(".spp-track-layer-2").offset().left,this.seek(x))},touchStart:function(e){this.isTouchMoving=!1,this.horizontalTouchMove=!1,this.touchStartX=e.originalEvent.touches[0].clientX,this.touchStartY=e.originalEvent.touches[0].clientY},touchMove:function(e){if(this.isTouchMoving=!0,null!=this.sound){var t=e.originalEvent.touches[0];if(this.horizontalTouchMove||!(Math.abs(this.touchStartX-t.clientX)<Math.abs(this.touchStartY-t.clientY))){this.horizontalTouchMove=!0;var i=t.pageX-this.$(".spp-track-layer-1").offset().left;0>i&&(i=0),this.showTimestamp(i)}}},touchEnd:function(e){if(this.isTouchMoving&&null!=this.sound){var t=e.originalEvent.changedTouches[e.originalEvent.changedTouches.length-1];if(this.horizontalTouchMove||!(Math.abs(this.touchStartX-t.clientX)<Math.abs(this.touchStartY-t.clientY))){var i=this.$el.offset(),s=t.pageX-i.left,n=t.pageY-i.top;(this.horizontalTouchMove||!(0>n||n>this.el.clientHeight||s>this.el.clientWidth))&&(0>s&&(s=0),this.seek(s),this.hideTimestamp())}}},cursorMove:function(e){var t=this.isCursorMoving;if(this.isCursorMoving=!0,t&&null!=this.sound){var i=this.$el.find(".spp-progress-bar"),s=i.offset(),n=e.pageX-s.left,r=e.pageY-s.top;0>r||r>i[0].clientHeight||0>n||n>i[0].clientWidth||this.showTimestamp(n)}},cursorOut:function(){null!=this.sound&&this.hideTimestamp()},onRender:function(){var e=this.model.get("data");this.listenTo(this.model,"updateTime",this.timeUpdated),this.resize(),e.artist||this.$el.find(".spp-artist").hide();var t=1;e.social_facebook&&t++,e.social_twitter&&t++,e.social_gplus&&t++,e.social_linkedin&&t++,e.social_pinterest&&t++,e.social_email&&t++;var i="265px",s="13%";if(7==t?(i="265px",s="13%"):6==t?(i="230px",s="15%"):5==t?(i="192px",s="18%"):4==t?(i="155px",s="23%"):3==t?(i="120px",s="30%"):2==t?(i="80px",s="45%"):1==t&&(i="40px",s="95%"),this.$(".spp-share-icon-list").cssExtended("max-width",i,AP_Player.importantStr),this.$(".spp-share-icon-container1").cssExtended("max-width",s,AP_Player.importantStr),this.$(".spp-share-icon-container").cssExtended("max-width","100%",AP_Player.importantStr),void 0!==e.color&&this.$el.addClass("stp-color-"+e.color+"-"+e.background_color.replace("#","")),"dark"==e.style&&this.$el.addClass("smart-track-player-dark"),"mobile"==e.view&&this.$el.addClass("smart-track-player-mobile-view"),e.background_color){var n=e.background_color;n&&n.length>0&&this.$el.cssExtended("background-color",n,AP_Player.importantStr)}if("blurred_logo"===e.background&&e.show_logo){var r=/MSIE (\d+\.\d+);/.test(navigator.userAgent)||1==!!document.documentMode,a=/Edge\//.test(navigator.userAgent);r||a||this.$(".spp-track-layer-0").append('<img src="'+e.show_logo+'"/>')}("soundcloud"==e.method||e.feed_url||"file"==e.method&&void 0==e.title_shortcode)&&this.gettingFileData();var r=/MSIE (\d+\.\d+);/.test(navigator.userAgent)||1==!!document.documentMode;r&&(this.$el.cssExtended("font-size","0",AP_Player.importantStr),this.$el.cssExtended("margin","38px 0",AP_Player.importantStr))},gettingFileData:function(){if(this.$(".spp-loading-ellipsis").length>0){var e=this,t=0;this.loading_timer=setInterval(function(){t++;var i=new Array(t%5).join(".");e.$(".spp-loading-ellipsis").text("."+i)},300)}},pause:function(){var e=soundManager.getSoundById(this.track_id);e.pause(),this.$el.removeClass("spp-playing")},speed:function(){this.isCursorMoving=!1,null!=this.sound&&(this.sound.isHTML5&&(.5==this.sound._a.playbackRate?(this.$el.hasClass("spp-speeding-half")&&this.$el.removeClass("spp-speeding-half"),this.sound._a.playbackRate=1):1==this.sound._a.playbackRate?(this.$el.addClass("spp-speeding-onehalf"),this.sound._a.playbackRate=1.5):1.5==this.sound._a.playbackRate?(this.$el.hasClass("spp-speeding-onehalf")&&this.$el.removeClass("spp-speeding-onehalf"),this.$el.addClass("spp-speeding-two"),this.sound._a.playbackRate=2):2==this.sound._a.playbackRate?(this.$el.hasClass("spp-speeding-two")&&this.$el.removeClass("spp-speeding-two"),this.$el.addClass("spp-speeding-three"),this.sound._a.playbackRate=3):3==this.sound._a.playbackRate?(this.$el.hasClass("spp-speeding-three")&&this.$el.removeClass("spp-speeding-three"),this.$el.addClass("spp-speeding-half"),this.sound._a.playbackRate=.5):this.sound._a.playbackRate=1),this.$(".spp-speed").find(".spp-control").focus())},play:function(e){this.isCursorMoving=!1,(void 0===this.sound||null===this.sound)&&(this.sound=this.createSound());var t=this.$el.hasClass("spp-playing");t?(this.$el.removeClass("spp-playing"),soundManager.pauseAll(),this.$(".spp-play").attr("aria-label","Play"),e&&"keypress"==e.type&&this.$(".spp-playback-controls").removeClass("spp-show-controls")):(soundManager.pauseAll(),this.sound.play(),this.$el.addClass("spp-playing"),this.$(".spp-play").attr("aria-label","Pause"),e&&"keypress"==e.type&&this.$(".spp-playback-controls").addClass("spp-show-controls")),a(e.currentTarget).find(".spp-control").focus()},shareIconsTabbable:function(e){e?(this.$(".spp-share-btn").attr("tabindex","0"),this.$(".spp-close-btn").attr("tabindex","0"),this.$(".spp-share-image").removeAttr("tabindex"),this.$(".spp-button-download").attr("tabindex","-1")):(this.$(".spp-share-btn").removeAttr("tabindex"),this.$(".spp-close-btn").removeAttr("tabindex"),this.$(".spp-share-image").attr("tabindex","0"),this.$(".spp-button-download").removeAttr("tabindex"))},createSound:function(){var e=this,t=this.model,i=t.get("data"),s=soundManager.createSound({id:e.track_id,url:i.url,onload:function(){},onresume:function(){},onplay:function(){},onid3:function(){},onfinish:function(){e.stop()},whileplaying:function(){var t=this.durationEstimate,i=this.position;e.model.trigger("updateTime",i/1e3,t/1e3)}});return s},showTimestamp:function(e){this.hover=!0,this.$el.find(".spp-progress-bar").addClass("spp-hover"),this.$(".spp-position").cssExtended("left",e+"px","important");var t=this.model.get("data"),i=soundManager.getSoundById(this.track_id);if(null!=i)var s=null!==i.duration?i.duration:i.durationEstimate;if(null!=i&&null!==s&&s>0&&t.hover_timestamp){var n=this.$el.find(".spp-progress-bar").outerWidth(),r=s*e/n/1e3,a=Math.floor(r%60),o=Math.floor(r/60%60),l=Math.floor(r/3600),p=o+":";p+=a>9?a:"0"+a,l>0&&(p=o>9?l+":"+p:l+":0"+p);var d=this.$(".spp-seek-time");d.text(p);var c=d.width(),u=e-c/2;d.cssExtended("left",u+"px","important"),d.cssExtended("display","block","important")}},hideTimestamp:function(){var e=soundManager.getSoundById(this.track_id);if(e){var t=e.position/e.duration*100;this.$(".spp-position").cssExtended("left",t+"%","important")}this.$(".spp-seek-time").cssExtended("display","none","important"),this.$el.find(".spp-progress-bar").removeClass("spp-hover"),this.hover=!1},seek:function(e){if(null!=this.sound){if(2==this.sound.readyState)return this.sound.destruct(),this.sound=null,this.$el.removeClass("spp-playing"),this.$(".spp-loaded").cssExtended("width",0,"important"),this.$(".spp-current-time").cssExtended("width",0,"important"),void this.$(".spp-seek-time").cssExtended("display","none","important");var t=this.$(".spp-track-layer-2").outerWidth(),i=null!==this.sound.duration?this.sound.duration:this.sound.durationEstimate,s=e/t,n=this.$el.hasClass("spp-playing");this.sound.pause(),this.sound.setPosition(s*i),n?this.sound.resume():this.play()}}})}),e.View}),a("apps/smart-track-player/stp-controller",["stp-app","apps/smart-track-player/stp-view","soundmanager2"],function(e,t){return e.module("Controller",function(e,i,n,r,a){e.init=function(){var e=function(e,t){var i="";if(e){var s=encodeURIComponent(e.replace(/&amp;/g,"&").replace(/&quot;/g,'"'));i="?subject="+s}else i="?subject=A podcast for you";return i+="&amp;body=Hi,%0D%0A%0D%0AI thought you might enjoy this podcast:%0D%0A%0D%0A",e&&(i+=s+"%0D%0A"),i+=t?t:window.location.href,i+="%0D%0A%0D%0AEnjoy!"},i=[];if(a(".smart-track-player-container").each(function(r,o){var l=a(o),p={track_uid:l.data("uid"),show_logo:l.data("image"),download:l.data("download"),view:l.data("view"),style:l.data("style"),background:l.data("background"),background_color:l.data("background_color"),color:l.data("color"),title:l.data("title"),title_shortcode:l.data("title"),artist:l.data("artist"),filename:"",social:l.data("social"),social_twitter:l.data("social_twitter"),social_facebook:l.data("social_facebook"),social_gplus:l.data("social_gplus"),social_linkedin:l.data("social_linkedin"),social_stumble:l.data("social_stumble"),social_pinterest:l.data("social_pinterest"),social_email:l.data("social_email"),speedcontrol:l.data("speedcontrol"),paid:l.data("paid"),get:l.data("get"),method:"file",sticky:l.data("sticky"),episode_timer:l.data("episode_timer"),hover_timestamp:l.data("hover_timestamp"),download_id:l.data("download_id"),hashtag:l.data("hashtag"),tweet_text:l.data("tweet_text"),twitter_username:l.data("twitter_username"),permalink:l.data("permalink")};0!=p.hover_timestamp&&(p.hover_timestamp=!0),"undefined"==typeof p.social_twitter&&(p.social_twitter=!0),"undefined"==typeof p.social_facebook&&(p.social_facebook=!0),"undefined"==typeof p.social_gplus&&(p.social_gplus=!0),p.email=e(p.title_shortcode,p.permalink);var d=void 0!==l.data("feed_url");if(d)p.feed_url=l.data("feed_url");else{p.url=l.data("url"),p.download_url=p.url;var c=document.createElement("a");c.href=l.data("url")||l.data("feed_url");var u=c.hostname,h=u.indexOf("soundcloud.com")>-1;h?p.method="soundcloud":p.filename=p.url.replace(/^.*[\\\/]/,"")}(d||"soundcloud"==p.method||"file"==p.method&&void 0==p.title_shortcode)&&(p.title='Getting file data<span class="spp-loading-ellipsis">...</span>');var f=new n.Model({data:p}),g=new t.Player({model:f});if(d||"soundcloud"!=p.method||i.push({data:p,view:g}),g.render(),l.after(g.$el),l.remove(),g.resize(),d){var m={action:"get_spplayer_tracks",stream:p.feed_url,episode_limit:1};a.ajax({url:AP_Player.ajaxurl,dataType:"json",async:!0,type:"POST",data:m,success:function(t){if(p.url=t[0].stream_url,p.download_url=t[0].download_url,p.title=p.title_shortcode||t[0].title,p.artist=p.artist||t[0].artist||t[0].album||t[0].show_name,p.download_id=t[0].download_id,p.url.toLowerCase().includes("soundcloud.com")){var i=p.url.includes("?")?"&":"?";p.url=p.url+i+"consumer_key="+AP_Player.soundcloudConsumerKey,p.artist=p.artist||(t[0].user?t[0].user.username:""),p.download_url=t[0].download_url,p.filename=t[0].permalink+".mp3"}p.email=e(p.title,p.permalink),g.model.set({data:p}),void 0!=g.loading_timer&&clearInterval(g.loading_timer),g.render()},error:function(e,t){if(p.title="Unable to retrieve track data",g.model.set({data:p}),void 0!=g.loading_timer&&clearInterval(g.loading_timer),g.render(),"parsererror"===t){var i=e.responseText.replace(/(\r\n|\n|\r)/gm,""),n=/(<span.*\/span>)(.*)/.exec(i);n&&s("There was an error while retrieving the track data. The error message is: ",n[1])}}})}if(!d&&"file"==p.method&&void 0==p.title_shortcode){var m={action:"fetch_track_data",url:p.url};a.ajax({url:AP_Player.ajaxurl,dataType:"json",async:!0,type:"POST",data:m,success:function(t){null===t?p.title="Unable to retrieve track data":(void 0!==typeof t.title&&void 0==p.title_shortcode?(p.title=t.title,p.email=e(p.title,p.permalink)):p.title="Unable to retrieve track data",void 0!==typeof t.artist&&void 0==p.artist&&(p.artist=t.artist)),g.model.set({data:p}),void 0!=g.loading_timer&&clearInterval(g.loading_timer),g.render()},error:function(e,t){if(p.title="Unable to retrieve track data",g.model.set({data:p}),void 0!=g.loading_timer&&clearInterval(g.loading_timer),g.render(),"parsererror"===t){var i=e.responseText.replace(/(\r\n|\n|\r)/gm,""),n=/(<span.*\/span>)(.*)/.exec(i);n&&s("There was an error while retrieving the track data. The error message is: ",n[1])}}})}}),i.length>0){var r=i.map(function(e){return e.data.url}),o={action:"get_soundcloud_track",streams:r};a.ajax({url:AP_Player.ajaxurl,dataType:"json",async:!0,type:"POST",data:o,success:function(t){for(var s=t.length,n=0;s>n;n++){var r=t[n],a=i[n].data,o=i[n].view,l=r.stream_url.includes("?")?"&":"?";a.url=r.stream_url+l+"consumer_key="+AP_Player.soundcloudConsumerKey,a.artist=a.artist||(r.user?r.user.username:""),a.title=a.title_shortcode||r.title||"Unable to retrieve track data",a.download_url=r.download_url,a.filename=r.permalink+".mp3","Unable to retrieve track data"!==a.title&&(a.email=e(a.title,a.permalink)),o.model.set({data:a}),void 0!=o.loading_timer&&clearInterval(o.loading_timer),o.render()}},error:function(e,t){for(var n=i.length,r=0;n>r;r++){var a=i[r].data,o=i[r].view;a.title="Unable to retrieve track data",o.model.set({data:a}),void 0!=o.loading_timer&&clearInterval(o.loading_timer),o.render()}if("parsererror"===t){var l=e.responseText.replace(/(\r\n|\n|\r)/gm,""),p=/(<span.*\/span>)(.*)/.exec(l);p&&s("There was an error while retrieving the track data. The error message is: ",p[1])}}})}}}),e.Controller}),a("stp-app",["jquery","marionette","soundmanager2"],function(e,t){var i=new t.Application;return i.on("initialize:after",function(){jQuery(".smart-track-player-container").length>0&&(soundManager.setup({flashVersion:9,wmode:"transparent",useHTML5Audio:!0,preferFlash:!1,onready:function(){r(["apps/smart-track-player/stp-controller"],function(e){e.init()})}}),soundManager.beginDelayedInit())}),i}),"function"==typeof jQuery&&a("jquery",function(){return jQuery}),"function"==typeof _&&a("underscore",function(){return _}),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),t+e.length>this.length?!1:-1!==this.indexOf(e,t)}),document.getElementsByTagName("body")[0].className+=" spp",window.SmartPodcastPlayer={},window.SmartPodcastPlayer.version="2.2.0",window.SmartPodcastPlayer.initialize=function(){SmartPodcastPlayer.version!==AP_Player.version&&console.log("Warning: Smart Podcast Player version mismatch detected.  Backend is running version '"+AP_Player.version+"' and frontend is running version '"+SmartPodcastPlayer.version+"'.  Try clearing all caches in caching plugins."),r(["jquery","spp-app"],function(i,s){t(i),e(jQuery,this),s.start()}),r(["jquery","stp-app"],function(i,s){jQuery(".smart-track-player-container ").length>0&&(t(i),e(jQuery,this),s.start())})},SmartPodcastPlayer.initialize(),a("main",function(){})}();